<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpack4 | ModyQyW&#39;s Site</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="alternate" type="application/atom+xml" href="https://modyqyw.top/atom.xml" title=" Atom Feed">
    <link rel="alternate" type="application/json" href="https://modyqyw.top/feed.json" title=" JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://modyqyw.top/rss.xml" title=" RSS Feed">
    <link rel="icon" href="/favicon.ico">
    <link rel="icon" href="/icons/w48.png" type="image/png" sizes="48x48">
    <link rel="icon" href="/icons/w72.png" type="image/png" sizes="72x72">
    <link rel="icon" href="/icons/w96.png" type="image/png" sizes="96x96">
    <link rel="icon" href="/icons/w144.png" type="image/png" sizes="144x144">
    <link rel="icon" href="/icons/w168.png" type="image/png" sizes="168x168">
    <link rel="icon" href="/icons/w192.png" type="image/png" sizes="192x192">
    <link rel="icon" href="/icons/w256.png" type="image/png" sizes="256x256">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <link rel="apple-touch-icon" href="/icons/w48.png">
    <meta name="description" content="åŸºäº vuepress å’Œ vuepress-theme-hope æ‰“é€ çš„ä¸ªäººç½‘ç«™ï¼Œå¦‚æœ‰é—®é¢˜è¯·å°è¯•å¼ºåˆ¶åˆ·æ–°ã€‚">
    <meta property="og:url" content="/webpack4/">
    <meta property="og:title" content="Webpack4">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh-CN">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="article:author" content="ModyQyW <wurui7@mail3.sysu.edu.cn>">
    <meta name="theme-color" content="#46bd87">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/w48.png">
    <meta name="msapplication-TileColor" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.aae05d4a.css" as="style"><link rel="preload" href="/assets/js/app.97090625.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.2575cae3.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.98c9c1a5.js" as="script"><link rel="preload" href="/assets/js/page-Webpack4.88b01faa.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.ec478e91.js" as="script"><link rel="prefetch" href="/assets/js/19.97cb309d.js"><link rel="prefetch" href="/assets/js/layout-Blog.436e05ac.js"><link rel="prefetch" href="/assets/js/layout-Layout.54347a9b.js"><link rel="prefetch" href="/assets/js/layout-NotFound.e98815ff.js"><link rel="prefetch" href="/assets/js/layout-Slide.144d7ab1.js"><link rel="prefetch" href="/assets/js/page-Home.002f9c71.js"><link rel="prefetch" href="/assets/js/page-ä¼˜åŒ–.4906bffb.js"><link rel="prefetch" href="/assets/js/page-å…³äº.a4cdc67a.js"><link rel="prefetch" href="/assets/js/page-å­¦ä¹ è·¯å¾„.bca4e2aa.js"><link rel="prefetch" href="/assets/js/page-å®‰å…¨.c44b341e.js"><link rel="prefetch" href="/assets/js/page-å¼€å‘.a8ee4af1.js"><link rel="prefetch" href="/assets/js/page-æ‚è°ˆ.98b98957.js"><link rel="prefetch" href="/assets/js/page-ç¯å¢ƒé…ç½®.85f14af6.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.eb4db7e8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aae05d4a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">ä¸»é¢˜è‰²:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">ä¸»é¢˜æ¨¡å¼:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active"><!---->
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/roadmap/" class="nav-link"><!---->
  å­¦ä¹ è·¯å¾„
</a></div><div class="nav-item"><a href="/environment/" class="nav-link"><!---->
  ç¯å¢ƒé…ç½®
</a></div><div class="nav-item"><a href="/development/" class="nav-link"><!---->
  å¼€å‘
</a></div><div class="nav-item"><a href="/optimization/" class="nav-link"><!---->
  ä¼˜åŒ–
</a></div><div class="nav-item"><a href="/safety/" class="nav-link"><!---->
  å®‰å…¨
</a></div><div class="nav-item"><a href="/webpack4/" aria-current="page" class="nav-link router-link-exact-active router-link-active active"><!---->
  Webpack4
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><!---->
  å…³äº
</a></div></nav> <!----> <a rel="noopener noreferrer" href="https://github.com/ModyQyW/modyqyw.github.io" target="_blank" class="repo-link can-hide">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active"><!---->
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/roadmap/" class="nav-link"><!---->
  å­¦ä¹ è·¯å¾„
</a></div><div class="nav-item"><a href="/environment/" class="nav-link"><!---->
  ç¯å¢ƒé…ç½®
</a></div><div class="nav-item"><a href="/development/" class="nav-link"><!---->
  å¼€å‘
</a></div><div class="nav-item"><a href="/optimization/" class="nav-link"><!---->
  ä¼˜åŒ–
</a></div><div class="nav-item"><a href="/safety/" class="nav-link"><!---->
  å®‰å…¨
</a></div><div class="nav-item"><a href="/webpack4/" aria-current="page" class="nav-link router-link-exact-active router-link-active active"><!---->
  Webpack4
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><!---->
  å…³äº
</a></div> <a rel="noopener noreferrer" href="https://github.com/ModyQyW/modyqyw.github.io" target="_blank" class="repo-link">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span class="title">Webpack4</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webpack4/#è¯´æ˜" class="sidebar-link">è¯´æ˜</a></li><li><a href="/webpack4/#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ„å»ºå·¥å…·" class="sidebar-link">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ„å»ºå·¥å…·</a></li><li><a href="/webpack4/#webpack-ç®€ä»‹" class="sidebar-link">webpack ç®€ä»‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack4/#æ˜¯ä»€ä¹ˆ" class="sidebar-link heading3">æ˜¯ä»€ä¹ˆ</a></li><li class="sidebar-sub-header"><a href="/webpack4/#ä¼˜ç‚¹" class="sidebar-link heading3">ä¼˜ç‚¹</a></li><li class="sidebar-sub-header"><a href="/webpack4/#ç¼ºç‚¹" class="sidebar-link heading3">ç¼ºç‚¹</a></li><li class="sidebar-sub-header"><a href="/webpack4/#ç«å“" class="sidebar-link heading3">ç«å“</a></li><li class="sidebar-sub-header"><a href="/webpack4/#åœ¨çº¿é…ç½®" class="sidebar-link heading3">åœ¨çº¿é…ç½®</a></li></ul></li><li><a href="/webpack4/#åŸºæœ¬æ¦‚å¿µ" class="sidebar-link">åŸºæœ¬æ¦‚å¿µ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack4/#æ¨¡å—-module" class="sidebar-link heading3">æ¨¡å— module</a></li><li class="sidebar-sub-header"><a href="/webpack4/#å…¥å£-entry" class="sidebar-link heading3">å…¥å£ entry</a></li><li class="sidebar-sub-header"><a href="/webpack4/#è¾“å‡º-output" class="sidebar-link heading3">è¾“å‡º output</a></li><li class="sidebar-sub-header"><a href="/webpack4/#åŠ è½½å™¨-loader" class="sidebar-link heading3">åŠ è½½å™¨ loader</a></li><li class="sidebar-sub-header"><a href="/webpack4/#æ’ä»¶-plugin" class="sidebar-link heading3">æ’ä»¶ plugin</a></li><li class="sidebar-sub-header"><a href="/webpack4/#æ¨¡å¼-mode" class="sidebar-link heading3">æ¨¡å¼ mode</a></li><li class="sidebar-sub-header"><a href="/webpack4/#module-chunk-bundle" class="sidebar-link heading3">moduleï¼Œchunkï¼Œbundle</a></li></ul></li><li><a href="/webpack4/#demo01-ä¸€ä¸ªç®€å•çš„-demo" class="sidebar-link">demo01 - ä¸€ä¸ªç®€å•çš„ demo</a></li><li><a href="/webpack4/#demo02-å†çœ‹æ ¸å¿ƒæ¦‚å¿µ" class="sidebar-link">demo02 - å†çœ‹æ ¸å¿ƒæ¦‚å¿µ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack4/#å†çœ‹å…¥å£-entry" class="sidebar-link heading3">å†çœ‹å…¥å£ entry</a></li><li class="sidebar-sub-header"><a href="/webpack4/#å†çœ‹è¾“å‡º-output" class="sidebar-link heading3">å†çœ‹è¾“å‡º output</a></li><li class="sidebar-sub-header"><a href="/webpack4/#å†çœ‹æ’ä»¶-plugin" class="sidebar-link heading3">å†çœ‹æ’ä»¶ plugin</a></li><li class="sidebar-sub-header"><a href="/webpack4/#å†çœ‹åŠ è½½å™¨-loader" class="sidebar-link heading3">å†çœ‹åŠ è½½å™¨ loader</a></li><li class="sidebar-sub-header"><a href="/webpack4/#js-è¯­æ³•å’Œç‰¹æ€§ç›¸å…³çš„-loader" class="sidebar-link heading4">js è¯­æ³•å’Œç‰¹æ€§ç›¸å…³çš„ loader</a></li><li class="sidebar-sub-header"><a href="/webpack4/#æ ·å¼ç›¸å…³çš„-loader" class="sidebar-link heading4">æ ·å¼ç›¸å…³çš„ loader</a></li><li class="sidebar-sub-header"><a href="/webpack4/#èµ„äº§ç›¸å…³çš„-loader" class="sidebar-link heading4">èµ„äº§ç›¸å…³çš„ loader</a></li><li class="sidebar-sub-header"><a href="/webpack4/#å†çœ‹æ¨¡å¼-mode" class="sidebar-link heading3">å†çœ‹æ¨¡å¼ mode</a></li></ul></li><li><a href="/webpack4/#demo03-ä¼˜åŒ–" class="sidebar-link">demo03 - ä¼˜åŒ–</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack4/#ä½¿ç”¨æ–‡ä»¶æŒ‡çº¹åšç‰ˆæœ¬ç®¡ç†" class="sidebar-link heading3">ä½¿ç”¨æ–‡ä»¶æŒ‡çº¹åšç‰ˆæœ¬ç®¡ç†</a></li><li class="sidebar-sub-header"><a href="/webpack4/#ç§»é™¤-js-ä¸­çš„æ³¨é‡Šä»¥å‹ç¼©-js" class="sidebar-link heading3">ç§»é™¤ js ä¸­çš„æ³¨é‡Šä»¥å‹ç¼© js</a></li><li class="sidebar-sub-header"><a href="/webpack4/#å‹ç¼©-html" class="sidebar-link heading3">å‹ç¼© html</a></li><li class="sidebar-sub-header"><a href="/webpack4/#åŸºç¡€ä¾èµ–çš„å¤„ç†" class="sidebar-link heading3">åŸºç¡€ä¾èµ–çš„å¤„ç†</a></li><li class="sidebar-sub-header"><a href="/webpack4/#ä½¿ç”¨-gzip-æ–‡ä»¶" class="sidebar-link heading3">ä½¿ç”¨ gzip æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/webpack4/#ç¯å¢ƒå˜é‡å’Œæ¨¡å¼" class="sidebar-link heading3">ç¯å¢ƒå˜é‡å’Œæ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/webpack4/#æ ¼å¼åŒ–å’Œæ£€éªŒä»£ç " class="sidebar-link heading3">æ ¼å¼åŒ–å’Œæ£€éªŒä»£ç </a></li><li class="sidebar-sub-header"><a href="/webpack4/#ä¼˜åŒ–æ—¥å¿—æ˜¾ç¤º" class="sidebar-link heading3">ä¼˜åŒ–æ—¥å¿—æ˜¾ç¤º</a></li><li class="sidebar-sub-header"><a href="/webpack4/#æ„å»ºåˆ†æ" class="sidebar-link heading3">æ„å»ºåˆ†æ</a></li></ul></li><li><a href="/webpack4/#ä¸€äº›ç®€å•çš„æ‹“å±•" class="sidebar-link">ä¸€äº›ç®€å•çš„æ‹“å±•</a></li><li><a href="/webpack4/#ç»“æŸ" class="sidebar-link">ç»“æŸ</a></li><li><a href="/webpack4/#å‚è€ƒ" class="sidebar-link">å‚è€ƒ</a></li><li><a href="/webpack4/#è‡´è°¢" class="sidebar-link">è‡´è°¢</a></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">Webpack4</span></h1> <div class="page-info"><!----> <!----><!----><span aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2021-7-5</span></span><!----><!----><span aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>å¤§çº¦ 59 åˆ†é’Ÿ</span> <meta property="timeRequired" content="PT59M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/webpack4/#è¯´æ˜" class="anchor-link heading2"><div>è¯´æ˜</div></a></li><li class="anchor"><a href="/webpack4/#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ„å»ºå·¥å…·" class="anchor-link heading2"><div>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ„å»ºå·¥å…·</div></a></li><li class="anchor"><a href="/webpack4/#webpack-ç®€ä»‹" class="anchor-link heading2"><div>webpack ç®€ä»‹</div></a></li><li class="anchor"><a href="/webpack4/#æ˜¯ä»€ä¹ˆ" class="anchor-link heading3"><div>æ˜¯ä»€ä¹ˆ</div></a></li><li class="anchor"><a href="/webpack4/#ä¼˜ç‚¹" class="anchor-link heading3"><div>ä¼˜ç‚¹</div></a></li><li class="anchor"><a href="/webpack4/#ç¼ºç‚¹" class="anchor-link heading3"><div>ç¼ºç‚¹</div></a></li><li class="anchor"><a href="/webpack4/#ç«å“" class="anchor-link heading3"><div>ç«å“</div></a></li><li class="anchor"><a href="/webpack4/#åœ¨çº¿é…ç½®" class="anchor-link heading3"><div>åœ¨çº¿é…ç½®</div></a></li><li class="anchor"><a href="/webpack4/#åŸºæœ¬æ¦‚å¿µ" class="anchor-link heading2"><div>åŸºæœ¬æ¦‚å¿µ</div></a></li><li class="anchor"><a href="/webpack4/#æ¨¡å—-module" class="anchor-link heading3"><div>æ¨¡å— module</div></a></li><li class="anchor"><a href="/webpack4/#å…¥å£-entry" class="anchor-link heading3"><div>å…¥å£ entry</div></a></li><li class="anchor"><a href="/webpack4/#è¾“å‡º-output" class="anchor-link heading3"><div>è¾“å‡º output</div></a></li><li class="anchor"><a href="/webpack4/#åŠ è½½å™¨-loader" class="anchor-link heading3"><div>åŠ è½½å™¨ loader</div></a></li><li class="anchor"><a href="/webpack4/#æ’ä»¶-plugin" class="anchor-link heading3"><div>æ’ä»¶ plugin</div></a></li><li class="anchor"><a href="/webpack4/#æ¨¡å¼-mode" class="anchor-link heading3"><div>æ¨¡å¼ mode</div></a></li><li class="anchor"><a href="/webpack4/#module-chunk-bundle" class="anchor-link heading3"><div>moduleï¼Œchunkï¼Œbundle</div></a></li><li class="anchor"><a href="/webpack4/#demo01-ä¸€ä¸ªç®€å•çš„-demo" class="anchor-link heading2"><div>demo01 - ä¸€ä¸ªç®€å•çš„ demo</div></a></li><li class="anchor"><a href="/webpack4/#demo02-å†çœ‹æ ¸å¿ƒæ¦‚å¿µ" class="anchor-link heading2"><div>demo02 - å†çœ‹æ ¸å¿ƒæ¦‚å¿µ</div></a></li><li class="anchor"><a href="/webpack4/#å†çœ‹å…¥å£-entry" class="anchor-link heading3"><div>å†çœ‹å…¥å£ entry</div></a></li><li class="anchor"><a href="/webpack4/#å†çœ‹è¾“å‡º-output" class="anchor-link heading3"><div>å†çœ‹è¾“å‡º output</div></a></li><li class="anchor"><a href="/webpack4/#å†çœ‹æ’ä»¶-plugin" class="anchor-link heading3"><div>å†çœ‹æ’ä»¶ plugin</div></a></li><li class="anchor"><a href="/webpack4/#å†çœ‹åŠ è½½å™¨-loader" class="anchor-link heading3"><div>å†çœ‹åŠ è½½å™¨ loader</div></a></li><li class="anchor"><a href="/webpack4/#js-è¯­æ³•å’Œç‰¹æ€§ç›¸å…³çš„-loader" class="anchor-link heading4"><div>js è¯­æ³•å’Œç‰¹æ€§ç›¸å…³çš„ loader</div></a></li><li class="anchor"><a href="/webpack4/#æ ·å¼ç›¸å…³çš„-loader" class="anchor-link heading4"><div>æ ·å¼ç›¸å…³çš„ loader</div></a></li><li class="anchor"><a href="/webpack4/#èµ„äº§ç›¸å…³çš„-loader" class="anchor-link heading4"><div>èµ„äº§ç›¸å…³çš„ loader</div></a></li><li class="anchor"><a href="/webpack4/#å†çœ‹æ¨¡å¼-mode" class="anchor-link heading3"><div>å†çœ‹æ¨¡å¼ mode</div></a></li><li class="anchor"><a href="/webpack4/#demo03-ä¼˜åŒ–" class="anchor-link heading2"><div>demo03 - ä¼˜åŒ–</div></a></li><li class="anchor"><a href="/webpack4/#ä½¿ç”¨æ–‡ä»¶æŒ‡çº¹åšç‰ˆæœ¬ç®¡ç†" class="anchor-link heading3"><div>ä½¿ç”¨æ–‡ä»¶æŒ‡çº¹åšç‰ˆæœ¬ç®¡ç†</div></a></li><li class="anchor"><a href="/webpack4/#ç§»é™¤-js-ä¸­çš„æ³¨é‡Šä»¥å‹ç¼©-js" class="anchor-link heading3"><div>ç§»é™¤ js ä¸­çš„æ³¨é‡Šä»¥å‹ç¼© js</div></a></li><li class="anchor"><a href="/webpack4/#å‹ç¼©-html" class="anchor-link heading3"><div>å‹ç¼© html</div></a></li><li class="anchor"><a href="/webpack4/#åŸºç¡€ä¾èµ–çš„å¤„ç†" class="anchor-link heading3"><div>åŸºç¡€ä¾èµ–çš„å¤„ç†</div></a></li><li class="anchor"><a href="/webpack4/#ä½¿ç”¨-gzip-æ–‡ä»¶" class="anchor-link heading3"><div>ä½¿ç”¨ gzip æ–‡ä»¶</div></a></li><li class="anchor"><a href="/webpack4/#ç¯å¢ƒå˜é‡å’Œæ¨¡å¼" class="anchor-link heading3"><div>ç¯å¢ƒå˜é‡å’Œæ¨¡å¼</div></a></li><li class="anchor"><a href="/webpack4/#æ ¼å¼åŒ–å’Œæ£€éªŒä»£ç " class="anchor-link heading3"><div>æ ¼å¼åŒ–å’Œæ£€éªŒä»£ç </div></a></li><li class="anchor"><a href="/webpack4/#ä¼˜åŒ–æ—¥å¿—æ˜¾ç¤º" class="anchor-link heading3"><div>ä¼˜åŒ–æ—¥å¿—æ˜¾ç¤º</div></a></li><li class="anchor"><a href="/webpack4/#æ„å»ºåˆ†æ" class="anchor-link heading3"><div>æ„å»ºåˆ†æ</div></a></li><li class="anchor"><a href="/webpack4/#ä¸€äº›ç®€å•çš„æ‹“å±•" class="anchor-link heading2"><div>ä¸€äº›ç®€å•çš„æ‹“å±•</div></a></li><li class="anchor"><a href="/webpack4/#ç»“æŸ" class="anchor-link heading2"><div>ç»“æŸ</div></a></li><li class="anchor"><a href="/webpack4/#å‚è€ƒ" class="anchor-link heading2"><div>å‚è€ƒ</div></a></li><li class="anchor"><a href="/webpack4/#è‡´è°¢" class="anchor-link heading2"><div>è‡´è°¢</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="webpack4"><a href="#webpack4" class="header-anchor">#</a> Webpack4</h1> <h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="header-anchor">#</a> è¯´æ˜</h2> <ul><li>å½¢å¼ï¼šå°½é‡å£è¯­åŒ–çš„ç¬”è®°å’Œç¤ºä¾‹ã€‚</li> <li>é€‚ç”¨ï¼šäº†è§£ npmï¼Œæœ‰åŸç”Ÿ js å’Œ <code>react</code> / <code>vue</code> å¼€å‘ç»éªŒï¼Œæƒ³è¦äº†è§£ã€è‡ªå®šä¹‰ js å·¥å…·é“¾çš„å¼€å‘è€…ã€‚</li> <li>ç›®æ ‡ï¼šè·Ÿç€å®æ“èƒ½å…¥é—¨ <code>webpack4</code>ï¼Œèƒ½è§£å†³å®é™…å¼€å‘ä¸­ 50% ä»¥ä¸Šçš„é—®é¢˜ï¼Œç†Ÿæ‚‰å‚è€ƒèµ„æ–™åèƒ½è§£å†³ 80% ä»¥ä¸Šçš„é—®é¢˜ã€‚</li> <li>æ€è·¯ï¼š<code>æ˜¯ä»€ä¹ˆ -&gt; ä¸ºä»€ä¹ˆ -&gt; æ€ä¹ˆåš</code> å’Œ <code>ä¸ºä»€ä¹ˆ -&gt; æ˜¯ä»€ä¹ˆ -&gt; æ€ä¹ˆåš</code>ã€‚</li> <li>ç»“æ„ï¼šæ‹¿å•é¡µåº”ç”¨ä½œç¤ºä¾‹ï¼Œç€é‡å…³æ³¨æ€ä¹ˆä½¿ç”¨ï¼Œæœ€ååˆ—å‡ºå‚è€ƒèµ„æ–™ç»™ä½ æŸ¥é˜…å­¦ä¹ ã€‚</li> <li>ç¯å¢ƒï¼šmacOSï¼Œzshï¼Œ<a href="https://ohmyz.sh/" target="_blank" rel="noopener noreferrer">oh-my-zsh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œ<a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">node<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> v12ï¼Œ<a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">vscode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å’Œ <a href="https://www.google.com/chrome/browser/index.html" target="_blank" rel="noopener noreferrer">chrome<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚å¦å¤–ç”¨ vscode çš„ <a href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer" target="_blank" rel="noopener noreferrer">live server æ’ä»¶<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æˆ– <a href="https://github.com/vercel/serve#readme" target="_blank" rel="noopener noreferrer">serve<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æµ‹è¯•æ„å»ºã€‚</li> <li>çº¦å®šï¼šä½¿ç”¨<code>${PROJECT_DIR}</code>è¡¨ç¤ºé¡¹ç›®æ ¹ç›®å½•ï¼Œä¸€èˆ¬è®¤ä¸º<code>package.json</code>æ‰€å¤„ç›®å½•å°±æ˜¯é¡¹ç›®æ ¹ç›®å½•ã€‚</li> <li>æ”¯æŒï¼šæ”¯æŒç°ä»£æµè§ˆå™¨å’Œ IE 11ã€‚</li> <li>çŠ¶æ€ï¼šç›®å‰å¤„äºå®Œå–„ä¸­çŠ¶æ€ï¼Œå¯èƒ½ä¼šæœ‰é—æ¼ã€é”™è¯¯ã€ä¸å®Œç¾ï¼Œä½†å·²ç»å¯ä»¥æ­£å¸¸é˜…è¯»ã€‚å¦‚æœä½ å‘ç°äº†é”™è¯¯ï¼Œè¯·åœ¨è¯„è®ºé‡Œå‘Šè¯‰æˆ‘ï¼Œè°¢è°¢ã€‚</li></ul> <h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ„å»ºå·¥å…·"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ„å»ºå·¥å…·" class="header-anchor">#</a> ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ„å»ºå·¥å…·</h2> <ul><li>å¼€å‘ä»£ç å¯ä»¥ä½¿ç”¨æ–°è¯­æ³• <code>syntax</code> å’Œæ–°ç‰¹æ€§ <code>feature</code></li> <li>è¿›ä¸€æ­¥å¤„ç†å›¾ç‰‡ã€æ–‡ä»¶ç­‰èµ„äº§æ–‡ä»¶</li> <li>è‡ªåŠ¨æ·»åŠ å¤§éƒ¨åˆ† css å‰ç¼€</li> <li>å‹ç¼©æ··æ·†åªéœ€è¦åšç®€å•çš„è‡ªå®šä¹‰</li> <li>æ„å»ºæ–‡ä»¶çš„ç‰ˆæœ¬ç®¡ç†åªéœ€è¦åšç®€å•çš„è‡ªå®šä¹‰</li></ul> <p>æ€»è€Œè¨€ä¹‹ï¼Œæ„å»ºå·¥å…·å¸®æˆ‘ä»¬å®Œæˆäº†å¤§é‡é‡å¤çš„æ„å»ºå·¥ä½œï¼Œä½¿æˆ‘ä»¬èƒ½æŠ•å…¥æ›´å¤šçš„æ—¶é—´åˆ°å¼€å‘å·¥ä½œã€‚</p> <h2 id="webpack-ç®€ä»‹"><a href="#webpack-ç®€ä»‹" class="header-anchor">#</a> webpack ç®€ä»‹</h2> <h3 id="æ˜¯ä»€ä¹ˆ"><a href="#æ˜¯ä»€ä¹ˆ" class="header-anchor">#</a> æ˜¯ä»€ä¹ˆ</h3> <p><code>webpack</code> æ˜¯ä¸€ä¸ªé™æ€æ¨¡å—æ„å»ºå·¥å…·ï¼Œæ ¹æ®é…ç½®åˆ†æä¾èµ–ã€ç”Ÿæˆä¾èµ–å›¾ã€æ„å»ºï¼ˆä¹Ÿå°±æ˜¯æ‰“åŒ…ï¼‰ã€‚</p> <h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="header-anchor">#</a> ä¼˜ç‚¹</h3> <ul><li>ä½¿ç”¨å¹¿æ³›</li> <li>ç”Ÿæ€ä¸°å¯Œ</li> <li>ç¤¾åŒºæ´»è·ƒ</li> <li>é…ç½®çµæ´»</li></ul> <h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="header-anchor">#</a> ç¼ºç‚¹</h3> <ul><li>æ–‡æ¡£ä¸å‹å¥½ï¼Œå¯¹æŸäº›æ¦‚å¿µæ²¡æœ‰è§£é‡Šå¾—å¾ˆå¥½</li> <li>é…ç½®é¡¹è¿‡å¤šä¸”å¤æ‚ï¼ŒæŸäº›é…ç½®é¡¹å¯èƒ½ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„å½±å“</li></ul> <h3 id="ç«å“"><a href="#ç«å“" class="header-anchor">#</a> ç«å“</h3> <ul><li><a href="https://parceljs.org/" target="_blank" rel="noopener noreferrer">parcel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - ç­‰ v2</li> <li><a href="https://www.snowpack.dev/" target="_blank" rel="noopener noreferrer">snowpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/vitejs/vite" target="_blank" rel="noopener noreferrer">vite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><a href="https://www.rollupjs.org/guide/en/" target="_blank" rel="noopener noreferrer">rollup<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åœ¨æŸäº›æ–¹é¢æœ‰ç¼ºå¤±ï¼Œä¸å±äº <code>webpack</code> ç«å“ã€‚</p> <p><a href="https://poi.js.org/" target="_blank" rel="noopener noreferrer">poi<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å±äº <code>webpack</code> çš„å°è£…ï¼ŒåŒæ ·ä¸å±äº <code>webpack</code> ç«å“ã€‚</p> <h3 id="åœ¨çº¿é…ç½®"><a href="#åœ¨çº¿é…ç½®" class="header-anchor">#</a> åœ¨çº¿é…ç½®</h3> <ul><li><a href="https://createapp.dev/" target="_blank" rel="noopener noreferrer">create-app<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="header-anchor">#</a> åŸºæœ¬æ¦‚å¿µ</h2> <h3 id="æ¨¡å—-module"><a href="#æ¨¡å—-module" class="header-anchor">#</a> æ¨¡å— module</h3> <p>ä»»ä½•æ–‡ä»¶éƒ½å¯ä»¥è¢« <code>webpack</code> è§£ææˆæ¨¡å— <code>module</code>ã€‚<code>webpack</code> æœ¬èº«æ”¯æŒè§£ææŸäº›æ–‡ä»¶ï¼Œè€Œ <code>webpack</code> æœ¬èº«ä¸æ”¯æŒè§£æçš„ï¼Œéœ€è¦ä½¿ç”¨å·¥å…·æ¥å¸®åŠ©è§£æã€‚</p> <h3 id="å…¥å£-entry"><a href="#å…¥å£-entry" class="header-anchor">#</a> å…¥å£ entry</h3> <p><code>entry</code> æŒ‡å®š <code>webpack</code> å·¥ä½œçš„æ—¶å€™ä»å“ªä¸ªæ–‡ä»¶å¼€å§‹åˆ†æä¾èµ–ï¼Œé»˜è®¤å€¼æ˜¯ <code>${PROJECT_DIR}/src/index.js</code>ã€‚è¿™ä¸ªæ–‡ä»¶ä¹Ÿä¼šè¢«å«åšå…¥å£æ–‡ä»¶æˆ–è€…å…¥å£æ¨¡å—ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ä½¿ç”¨ path æ¨¡å—æ¥æŒ‡å®šè·¯å¾„</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// æŒ‡å®š entry ä¸º ${PROJECT_DIR}/src/app.js</span>
  entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'app.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><code>path</code> æ˜¯ node çš„å†…ç½®æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>webpack</code> çš„é…ç½®æ–‡ä»¶é‡Œä½¿ç”¨ <code>require</code> è¯­å¥å¼•ç”¨è¿™ä¸ªæ¨¡å—ã€‚</li> <li><code>module.exports</code> ç”¨äºå¯¼å‡ºé…ç½®ã€‚</li> <li><code>path.resolve</code> æ˜¯ <code>path</code> æ¨¡å—å†…ç½®çš„æ–¹æ³•ï¼Œå®ƒèƒ½å°†æä¾›çš„å­—ç¬¦ä¸²å‚æ•°æ‹¼æ¥æˆä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œæ¥æŒ‡å®š <code>entry</code> çš„å€¼ã€‚</li></ul> <p><code>path.join</code> ä¹Ÿè¾ƒä¸ºå¸¸ç”¨ï¼Œå®ƒå’Œ <code>path.resolve</code> ç”¨æ³•ã€ä½œç”¨ç›¸ä¼¼ï¼Œä¸¤è€…ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯ <code>path.join</code> ä»…ä»…æ‹¼æ¥ç»™å‡ºçš„å­—ç¬¦ä¸²ç„¶åè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå¯èƒ½æ— æ„ä¹‰ï¼Œå–å†³äºç»™å‡ºçš„å­—ç¬¦ä¸²ï¼‰ï¼Œè€Œ <code>path.resolve</code> ä¼šè§£æç„¶åè¿”å›ä¸€ä¸ªç»å¯¹è·¯å¾„ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸¤ä¸ªå¯¹æ¯”ç¤ºä¾‹ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/a'</span><span class="token punctuation">,</span> <span class="token string">'/b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string /a/b</span>
path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/a'</span><span class="token punctuation">,</span> <span class="token string">'/b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string /b</span>

path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;..&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string a/b2</span>
path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;..&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string ${PROJECT_DIR}/a/b2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="è¾“å‡º-output"><a href="#è¾“å‡º-output" class="header-anchor">#</a> è¾“å‡º output</h3> <p><code>output</code> å¯ä»¥æŒ‡å®š <code>webpack</code> å­˜æ”¾æ‰€æœ‰è¾“å‡ºæ–‡ä»¶çš„åŸºæœ¬è·¯å¾„ <code>output.path</code>ï¼Œè¿˜æœ‰ <code>entry</code> å¯¹åº”çš„è¾“å‡ºæ–‡ä»¶çš„è·¯å¾„å’Œæ–‡ä»¶å <code>output.filename</code>ã€‚</p> <p><code>entry</code> å¯¹åº”çš„è¾“å‡ºæ–‡ä»¶é»˜è®¤æ˜¯ <code>${PROJECT_DIR}/dist/main.js</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ä½¿ç”¨ path æ¨¡å—æ¥æŒ‡å®šè·¯å¾„</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// æŒ‡å®š entry æ˜¯ ${PROJECT_DIR}/src/app.js</span>
  entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'app.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š output ç›®å½•æ˜¯ ${PROJECT_DIR}/dist</span>
  <span class="token comment">// æŒ‡å®š entry å¯¹åº”çš„è¾“å‡ºæ–‡ä»¶æ˜¯ ${PROJECT_DIR}/dist/bundle.js</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å¦‚æœæŒ‡å®š <code>output.filename = 'js/bundle.js'</code>ï¼Œé‚£ä¹ˆ <code>entry</code> å¯¹åº”çš„è¾“å‡ºæ–‡ä»¶æ˜¯ <code>${PROJECT_DIR}/dist/js/bundle.js</code>ã€‚</p> <h3 id="åŠ è½½å™¨-loader"><a href="#åŠ è½½å™¨-loader" class="header-anchor">#</a> åŠ è½½å™¨ loader</h3> <p><code>webpack</code> æœ¬èº«åªèƒ½å¤„ç† <code>.js</code> å’Œ <code>.json</code> æ–‡ä»¶ï¼Œ<code>loader</code> å¢å¼ºäº† <code>webpack</code> çš„è§£æèƒ½åŠ›ï¼Œä½¿å¾— <code>webpack</code> èƒ½å¤Ÿå¤„ç† <code>.jsx</code>ï¼Œ<code>.ts</code>ï¼Œ<code>.tsx</code>ï¼Œ<code>.css</code> ç­‰æ–‡ä»¶ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ä½¿ç”¨ path æ¨¡å—æ¥æŒ‡å®šè·¯å¾„</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// æŒ‡å®š entry ä¸º ${PROJECT_DIR}/src/app.js</span>
  entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'app.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š output ç›®å½•ä¸º ${PROJECT_DIR}/dist</span>
  <span class="token comment">// æŒ‡å®š entry å¯¹åº”çš„è¾“å‡ºæ–‡ä»¶ä¸º ${PROJECT_DIR}/dist/bundle.js</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// png æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// ä½¿ç”¨ url-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li><code>module.rules</code> æ•°ç»„é‡Œé¢çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯å¤„ç†æ¨¡å—çš„è§„åˆ™ã€‚</li> <li>æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯å¯¹è±¡ objectï¼Œæœ‰ä¸¤ä¸ªå¿…éœ€çš„å±æ€§ã€‚
<ul><li>ä¸€ä¸ªå¿…éœ€çš„å±æ€§æ˜¯ <code>test</code>ï¼Œç”¨æ¥æŒ‡å®šéœ€è¦è§£æçš„æ–‡ä»¶ï¼Œå®ƒçš„å€¼å¾€å¾€æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚</li> <li>å¦ä¸€ä¸ªå¿…éœ€çš„å±æ€§æ˜¯ <code>use</code>ï¼ŒæŒ‡å®šç”¨æ¥è§£ææ–‡ä»¶çš„ <code>loader</code>ã€‚</li></ul></li></ul> <p>æœ‰çš„ <code>loader</code> è¿˜ä¼šå…³è” <code>plugin</code> æˆ–è€…æœ‰é¢å¤–çš„å±æ€§ä¾›ä½ é…ç½®ï¼Œå…·ä½“ä¿¡æ¯è¦æŸ¥çœ‹å¯¹åº” <code>loader</code> çš„æ–‡æ¡£ã€‚</p> <h3 id="æ’ä»¶-plugin"><a href="#æ’ä»¶-plugin" class="header-anchor">#</a> æ’ä»¶ plugin</h3> <p><code>plugin</code>è¢«ç”¨æ¥æ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ï¼Œæ¯”å¦‚æ‰“åŒ…ä¼˜åŒ–ï¼Œèµ„æºç®¡ç†ï¼Œæ³¨å…¥ç¯å¢ƒå˜é‡ç­‰ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ä½¿ç”¨ path æ¨¡å—æ¥æŒ‡å®šè·¯å¾„</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> BundleAnalyzerPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-bundle-analyzer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// æŒ‡å®š entry ä¸º ${PROJECT_DIR}/src/app.js</span>
  entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'app.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š output ç›®å½•ä¸º ${PROJECT_DIR}/dist</span>
  <span class="token comment">// æŒ‡å®š entry å¯¹åº”çš„è¾“å‡ºæ–‡ä»¶ä¸º ${PROJECT_DIR}/dist/bundle.js</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// png æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// ä½¿ç”¨ url-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// åˆ†æç”ŸæˆåŒ…å¤§å°</span>
    <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      analyzerMode<span class="token operator">:</span> <span class="token string">'static'</span><span class="token punctuation">,</span>
      defaultSizes<span class="token operator">:</span> <span class="token string">'stat'</span><span class="token punctuation">,</span>
      openAnalyzer<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="æ¨¡å¼-mode"><a href="#æ¨¡å¼-mode" class="header-anchor">#</a> æ¨¡å¼ mode</h3> <p>æŒ‡å®šä¸åŒçš„æ¨¡å¼ï¼Œ<code>webpack</code> ä¼šè‡ªåŠ¨å¯ç”¨ä¸åŒçš„ä¼˜åŒ–ã€‚</p> <p>æ¨¡å¼ä¸€å…±æœ‰ä¸‰ç§ï¼š<code>production</code>ï¼ˆç”Ÿäº§æ¨¡å¼ï¼‰ï¼Œ<code>development</code>ï¼ˆå¼€å‘æ¨¡å¼ï¼‰ï¼Œ<code>none</code>ï¼ˆæ— ä¼˜åŒ–æ¨¡å¼ï¼‰ï¼Œé»˜è®¤å€¼æ˜¯<code>production</code>ï¼Œä¼˜åŒ–ç¨‹åº¦ç”±é«˜åˆ°ä½ä¾æ¬¡æ˜¯ <code>production</code>ï¼Œ<code>development</code>ï¼Œ<code>none</code>ã€‚</p> <p><code>none</code> ä¸ä¼šå¯ç”¨ä¼˜åŒ–ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šå»ç”¨å®ƒã€‚è€Œ <code>production</code> å’Œ <code>development</code> çš„é»˜è®¤ä¼˜åŒ–å¾€å¾€ä¸èƒ½æ»¡è¶³é¡¹ç›®è¦æ±‚ï¼Œæˆ‘ä»¬è¿˜è¦è¿›ä¸€æ­¥å®šåˆ¶ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ä½¿ç”¨ path æ¨¡å—æ¥æŒ‡å®šè·¯å¾„</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> BundleAnalyzerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-bundle-analyzer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// æŒ‡å®š mode ä¸º developmentï¼Œå³å¼€å‘æ¨¡å¼</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š entry ä¸º ${PROJECT_DIR}/src/app.js</span>
  entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'app.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š output ç›®å½•ä¸º ${PROJECT_DIR}/dist</span>
  <span class="token comment">// æŒ‡å®š entry å¯¹åº”çš„è¾“å‡ºæ–‡ä»¶ä¸º ${PROJECT_DIR}/dist/bundle.js</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// png æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// ä½¿ç”¨ url-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// åˆ†æç”ŸæˆåŒ…å¤§å°</span>
    <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      analyzerMode<span class="token operator">:</span> <span class="token string">'static'</span><span class="token punctuation">,</span>
      defaultSizes<span class="token operator">:</span> <span class="token string">'stat'</span><span class="token punctuation">,</span>
      openAnalyzer<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="module-chunk-bundle"><a href="#module-chunk-bundle" class="header-anchor">#</a> moduleï¼Œchunkï¼Œbundle</h3> <p><code>bundle</code> æ˜¯æœ€ç»ˆè¾“å‡ºçš„ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æœ€ç»ˆå¾—åˆ°çš„ä»£ç å—ï¼Œæˆ–è€…å«åšæ„å»ºåŒ…ã€‚</p> <p><code>chunk</code> åˆ™æ˜¯æ„å»ºè¿‡ç¨‹ä¸­çš„ä»£ç å—ï¼Œå®ƒæ˜¯ä¸€äº› <code>module</code> çš„å°è£…ï¼Œä¹Ÿå¯ä»¥å«åšè¿™äº› <code>module</code> çš„é›†åˆã€‚æ„å»ºç»“æŸåï¼Œ<code>chunk</code> å°±è¡¨ç°ä¸º <code>bundle</code>ã€‚ä½†ä¸ºäº†æ–¹ä¾¿åŒºåˆ†ï¼Œä¸€èˆ¬ä¼šåœ¨ä¸€äº›æ–‡ä»¶çš„æ–‡ä»¶åé‡Œä½¿ç”¨ <code>chunk</code>ã€‚</p> <p>ä¸€ä¸ª <code>entry</code> ä¼šå¯¹åº”ä¸€ä¸ªæˆ–è€…å¤šä¸ª <code>chunk</code>ï¼Œä½†æœ€ç»ˆåªä¼šç”Ÿæˆä¸€ä¸ª <code>bundle</code>ï¼Œè¿™ä¸ª <code>bundle</code> ä¸€èˆ¬ä¼šåŒ…å«å¤šä¸ªæ–‡ä»¶ã€‚</p> <h2 id="demo01-ä¸€ä¸ªç®€å•çš„-demo"><a href="#demo01-ä¸€ä¸ªç®€å•çš„-demo" class="header-anchor">#</a> demo01 - ä¸€ä¸ªç®€å•çš„ demo</h2> <p>å‰é¢ç®€å•åœ°è®²è¿°äº† <code>webpack</code> çš„å‡ ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œä¸‹é¢å¼€å§‹å®æˆ˜æ¥å¼ºåŒ–è¿™äº›æ¦‚å¿µã€‚</p> <p>è¿™é‡Œå†å¼ºè°ƒä¸€æ¬¡ï¼Œç¬”è®°å’Œç¤ºä¾‹æ˜¯ç”¨ macOS åšç¤ºä¾‹çš„ï¼Œè¯·ä¸è¦æ— è„‘è·Ÿåšã€‚</p> <p>é¦–å…ˆå®‰è£… <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">nvm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚nvm æ˜¯ä¸€ä¸ªç”¨äºç®¡ç† node ç‰ˆæœ¬çš„å·¥å…·ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.2/install.sh <span class="token operator">|</span> <span class="token function">bash</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¦‚æœä½ å·²ç»å®‰è£…äº† nodeï¼Œä½ ä¹Ÿå¯ä»¥è€ƒè™‘å®Œå…¨å¸è½½ node ä¹‹åå®‰è£… nvmã€‚å¦‚æœä¸éœ€è¦é¢‘ç¹æ›´æ¢ node ç‰ˆæœ¬ï¼Œå¯ä»¥ç›´æ¥å®‰è£… nodeã€‚</p> <p>å®‰è£… nvm ä¹‹åï¼Œä½¿ç”¨ nvm æ¥å®‰è£… node v12ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>nvm <span class="token function">install</span> <span class="token number">12</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ–°å»ºä¸€ä¸ª <code>demo</code> æ–‡ä»¶å¤¹ï¼Œè¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œç”¨ <code>npm</code> åˆå§‹åŒ–ï¼Œè¿™ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„ <code>package.json</code> æ–‡ä»¶ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">mkdir</span> demo <span class="token comment"># æ–°å»ºä¸€ä¸ª demo æ–‡ä»¶å¤¹</span>
<span class="token builtin class-name">cd</span> demo <span class="token comment"># è¿›å…¥è¯¥æ–‡ä»¶å¤¹</span>
<span class="token function">npm</span> init -y <span class="token comment"># npm åˆå§‹åŒ–</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>.npmrc</code> æ–‡ä»¶ç”¨æ¥é…ç½® <code>npm</code>ï¼Œè¿™é‡Œæˆ‘ä»¬æŒ‡å®šä¾èµ–æºæ˜¯å›½å†…çš„æ·˜å®æºï¼Œè¿™æ ·å®‰è£…ä¾èµ–çš„é€Ÿåº¦ä¼šæ›´å¿«ä¸€ç‚¹ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">registry</span><span class="token operator">=</span>https://registry.npm.taobao.org/
<span class="token assign-left variable">chromedriver_cdnurl</span><span class="token operator">=</span>https://npm.taobao.org/mirrors/chromedriver/
<span class="token assign-left variable">electron_builder_binaries_mirror</span><span class="token operator">=</span>https://npm.taobao.org/mirrors/electron-builder-binaries/
<span class="token assign-left variable">electron_mirror</span><span class="token operator">=</span>https://npm.taobao.org/mirrors/electron/
<span class="token assign-left variable">fsevents_binary_host_mirror</span><span class="token operator">=</span>http://npm.taobao.org/mirrors/fsevents/
<span class="token assign-left variable">node_inspector_cdnurl</span><span class="token operator">=</span>https://npm.taobao.org/mirrors/node-inspector/
<span class="token assign-left variable">phantomjs_cdnurl</span><span class="token operator">=</span>https://npm.taobao.org/mirrors/phantomjs/
<span class="token assign-left variable">sass_binary_site</span><span class="token operator">=</span>https://npm.taobao.org/mirrors/node-sass/
<span class="token assign-left variable">selenium_cdnurl</span><span class="token operator">=</span>https://npm.taobao.org/mirrors/selenium/

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ç„¶åå®‰è£…ç›¸å…³ä¾èµ–ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i clean-webpack-plugin@~3.0.0 -D
<span class="token function">npm</span> i copy-webpack-plugin@~6.4.0 -D
<span class="token function">npm</span> i friendly-errors-webpack-plugin@~1.7.0 -D
<span class="token function">npm</span> i html-webpack-plugin@~4.5.1 -D
<span class="token function">npm</span> i webpack@~4.46.0 -D
<span class="token function">npm</span> i webpack-cli@~4.5.0 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>åˆ›å»ºä¸€ä¸ªå†…å®¹ç®€å•çš„ <code>${PROJECT_DIR}/src/index.js</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'Hello webpack!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>åˆ›å»ºä¸€ä¸ª <code>webpack</code> é…ç½®æ–‡ä»¶ <code>${PROJECT_DIR}/webpack.config.js</code>ã€‚ä¸ç‰¹æ„æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œ<code>webpack</code> ä¼šé»˜è®¤ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶ä½œä¸ºé…ç½®æ–‡ä»¶ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ä½¿ç”¨ path æ¨¡å—æ¥æŒ‡å®šè·¯å¾„</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// æŒ‡å®š mode</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š entry</span>
  entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š output</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>æˆ‘ä»¬å†æ¥ä¿®æ”¹ <code>package.json</code> é‡Œé¢çš„ <code>scripts</code> å­—æ®µã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½é€šè¿‡ <code>webpack-cli</code> æä¾›çš„å‘½ä»¤è°ƒç”¨ <code>webpack</code> æ„å»ºã€‚</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...<span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ¥ç€ï¼Œå°±æ‰§è¡Œå‘½ä»¤å¼€å§‹æ„å»ºå§ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> run build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ„å»ºç»“æŸåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ <code>dist</code> æ–‡ä»¶å¤¹é‡Œé¢ä¼šå‡ºç°ä¸€ä¸ª <code>bundle.js</code> æ–‡ä»¶ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ª <code>.html</code> æ–‡ä»¶ç„¶åå¼•ç”¨å®ƒï¼Œæ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚</p> <p>å®é™…å¼€å‘çš„æ—¶å€™ï¼Œæ¯æ¬¡æ„å»ºä¹‹åéƒ½è€—è´¹æ—¶é—´å»åšè¿™æ ·çš„é‡å¤å·¥ä½œæ˜¯éš¾ä»¥å¿å—çš„ã€‚æˆ‘ä»¬éœ€è¦ä¸€äº›è‡ªåŠ¨å¤„ç†çš„æ‰‹æ®µï¼Œæ¥å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆ <code>.html</code> æ–‡ä»¶å¹¶å¼•ç”¨è¿™ä¸ª <code>bundle.js</code> æ–‡ä»¶ã€‚</p> <p>é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª <code>public</code> æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ”¾ <code>favicon.ico</code>ï¼ˆå¯ä»¥è‡ªå·±éšä¾¿æ‰¾ä¸€ä¸ªï¼Œæˆ–è€…æŠŠä½ ç°åœ¨æœ‰çš„å›¾ç‰‡è½¬æˆ ico æ ¼å¼ï¼‰å’Œ <code>index.html</code>ã€‚</p> <p><code>index.html</code> é‡Œé¢çš„å†…å®¹åˆ—å‡ºåœ¨ä¸‹é¢ã€‚æˆ‘ä»¬åœ¨ L7 å¼•ç”¨äº† <code>favicon.ico</code> ä½œä¸ºç½‘ç«™å›¾æ ‡ã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge,chrome=1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>favicon.ico<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/x-icon<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>demo01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>æ¥ç€ï¼Œæˆ‘ä»¬åœ¨ <code>${PROJECT_DIR}/webpack.config.js</code> é‡Œé…ç½®ï¼Œè®© <code>copy-webpack-plugin</code> æ¥å¤„ç†ç½‘ç«™å›¾æ ‡ï¼Œè®© <code>html-webpack-plugin</code> å¤„ç† <code>.html</code> æ–‡ä»¶é‡Œçš„å¼•ç”¨ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> CopyPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token comment">// æŒ‡å®š entry</span>
  entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š output</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// å¤åˆ¶ ${PROJECT_DIR}/public/favicon.ico</span>
    <span class="token comment">// æœ€ç»ˆç”Ÿæˆ ${PROJECT_DIR}/dist/favicon.ico</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">,</span> <span class="token string">'favicon.ico'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// ä½¿ç”¨ ${PROJECT_DIR}/public/index.html ä½œä¸ºæ¨¡æ¿</span>
    <span class="token comment">// æœ€ç»ˆç”Ÿæˆ ${PROJECT_DIR}/dist/index.html</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'demo01'</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><ul><li><code>copy-webpack-plugin</code> ä¼šæŠŠ <code>favicon.ico</code> å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ä¸‹ï¼ˆåœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œè¾“å‡ºç›®å½•å°±æ˜¯ <code>${PROJECT_DIR}/dist</code>ï¼‰ä½œä¸ºç½‘ç«™å›¾æ ‡ã€‚</li> <li><code>html-webpack-plugin</code> ä¼šä½¿ç”¨ <code>${PROJECT_DIR}/public/index.html</code> ä½œä¸ºæ‰¿è½½ <code>bundle.js</code> å’Œ <code>favicon.ico</code> çš„æ¨¡æ¿ï¼Œæœ€ç»ˆä¼šç”Ÿæˆ <code>${PROJECT_DIR}/dist/index.html</code>ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šè‡ªåŠ¨å¼•ç”¨ç›¸å…³çš„ <code>.js</code> æ–‡ä»¶ã€‚</li></ul> <p>é‡æ–°æ„å»ºï¼Œæ„å»ºç»“æŸä¹‹åï¼Œæˆ‘ä»¬ä¼šå‘ç° <code>${PROJECT_DIR}/dist</code> é‡Œé¢å‡ºç°äº†ä¸‰ä¸ªæ–‡ä»¶ï¼š<code>favicon.ico</code>ï¼Œ<code>index.html</code> å’Œ <code>bundle.js</code>ï¼Œè€Œ <code>index.html</code> ä¸­è¿˜è‡ªåŠ¨å¼•ç”¨äº† <code>bundle.js</code>ã€‚</p> <p>ä¸€åˆ‡éƒ½å¾ˆå®Œç¾ï¼Œä½†ä¸èƒ½å¿½è§†çš„æ˜¯ï¼Œæ¯æ¬¡æ„å»ºä¹‹å‰éƒ½åº”è¯¥åˆ é™¤ä¸Šä¸€æ¬¡çš„æ„å»ºåŒ…ï¼Œä¹Ÿå°±æ˜¯åˆ é™¤ <code>${PROJECT_DIR}/dist</code>ã€‚ç›®å‰ä¸åˆ é™¤ä¸ä¼šæœ‰ä»€ä¹ˆå½±å“ï¼Œä½†ä»¥åæ„å»ºå‡ºæ¥çš„æ–‡ä»¶è¶Šæ¥è¶Šå¤šï¼Œä¸åˆ é™¤å¯èƒ½ä¼šå¯¼è‡´æ–°æ—§æ„å»ºå†²çªã€<code>${PROJECT_DIR}/dist</code> è¶Šæ¥è¶Šå¤§ã€<code>${PROJECT_DIR}/dist</code> é‡Œé¢çš„æ–‡ä»¶è¶Šæ¥è¶Šå¤šç­‰é—®é¢˜ã€‚</p> <p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>clean-webpack-plugin</code> æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé»˜è®¤åœ°ï¼Œ<code>clean-webpack-plugin</code> ä¼šæ ¹æ® <code>output.path</code> è‡ªåŠ¨ç¡®è®¤ã€åˆ é™¤ä¸Šä¸€æ¬¡æ„å»ºçš„ç»“æœã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin<span class="token operator">:</span> CleanPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ç§»é™¤ä¸Šä¸€æ¬¡çš„æ„å»ºæ–‡ä»¶</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>å¦‚æœæ„å»ºå‡ºç°äº†é—®é¢˜ï¼Œ<code>webpack</code> ä¼šè¾“å‡ºä¸€é•¿ä¸²é”™è¯¯ä¿¡æ¯ï¼Œä½¿ç”¨ <code>friendly-errors-webpack-plugin</code> å¯ä»¥è®©è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯æ›´åŠ å‹å¥½ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> FriendlyErrorsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'friendly-errors-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯ä¿¡æ¯</span>
    <span class="token keyword">new</span> <span class="token class-name">FriendlyErrorsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>å®Œæ•´çš„ <code>webpack.config.js</code> ä»£ç åˆ—å†™åœ¨ä¸‹é¢ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ä½¿ç”¨ path æ¨¡å—æ¥æŒ‡å®šè·¯å¾„</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä½¿ç”¨ plugin</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin<span class="token operator">:</span> CleanPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>&quot;clean<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin'<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CopyPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> FriendlyErrorsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'friendly-errors-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// æŒ‡å®š mode</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š entry</span>
  entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š output</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š plugin</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯ä¿¡æ¯</span>
    <span class="token keyword">new</span> <span class="token class-name">FriendlyErrorsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// ç§»é™¤ä¸Šä¸€æ¬¡çš„æ„å»ºæ–‡ä»¶</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// å¤åˆ¶ ${PROJECT_DIR}/public/favicon.ico</span>
    <span class="token comment">// æœ€ç»ˆç”Ÿæˆ ${PROJECT_DIR}/dist/favicon.ico</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">,</span> <span class="token string">'favicon.ico'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// ä½¿ç”¨ ${PROJECT_DIR}/public/index.html ä½œä¸ºæ¨¡æ¿</span>
    <span class="token comment">// æœ€ç»ˆç”Ÿæˆ ${PROJECT_DIR}/dist/index.html</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'demo01'</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>é‡æ–°å¼€å§‹æ„å»ºï¼Œä¹‹åå¯ä»¥çœ‹åˆ°ç®€çŸ­çš„æç¤ºä¿¡æ¯ã€‚ä¸‹é¢æ˜¯æœ€ç»ˆçš„ç›®å½•ç»“æ„ï¼ˆçœç•¥äº†<code>node_modules</code>ï¼‰ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">.</span>
â”œâ”€â”€ dist
â”‚   â”œâ”€â”€ bundle.js
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ src
â”‚   â””â”€â”€ index.js
â””â”€â”€ webpack.config.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ä½¿ç”¨ <code>live server</code> æˆ– <code>serve</code> æ¥æŸ¥çœ‹æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ° <code>Hello webpack!</code>ã€‚</p> <p>ğŸ‰æ­å–œï¼Œä¸€ä¸ªç®€å•çš„ webpack demo å·²ç»å®Œæˆå•¦ï½</p> <p>å‚è€ƒæºä»£ç è§ <a href="https://github.com/ModyQyW/webpack4-demos/tree/master/demo01" target="_blank" rel="noopener noreferrer">modyqyw/webpack-demos/demo01<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <h2 id="demo02-å†çœ‹æ ¸å¿ƒæ¦‚å¿µ"><a href="#demo02-å†çœ‹æ ¸å¿ƒæ¦‚å¿µ" class="header-anchor">#</a> demo02 - å†çœ‹æ ¸å¿ƒæ¦‚å¿µ</h2> <p>åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ¥ç¨å¾®æ·±å…¥ä¸€ä¸‹æ ¸å¿ƒæ¦‚å¿µã€‚</p> <h3 id="å†çœ‹å…¥å£-entry"><a href="#å†çœ‹å…¥å£-entry" class="header-anchor">#</a> å†çœ‹å…¥å£ entry</h3> <p>ä¸€å¼€å§‹æˆ‘ä»¬è¯´åˆ°ï¼Œ<code>webpack</code> ä¼šåˆ†æä¾èµ–ç”Ÿæˆä¾èµ–å›¾ï¼Œè€Œåˆ†æä¾èµ–ç”Ÿæˆä¾èµ–å›¾çš„èµ·ç‚¹å°±ç”± <code>entry</code> æŒ‡å®šã€‚</p> <p><img src="https://ae01.alicdn.com/kf/Hc2861d3d0e2b4ad89bfab9c37be5ecbcK.jpg" alt="webpackç¤ºæ„å›¾"></p> <p>å•é¡µé¢åº”ç”¨ SPA åªæœ‰ä¸€ä¸ªå…¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>entry</code> æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² string æˆ–ä¸€ä¸ªå¯¹è±¡ objectã€‚å¤šé¡µé¢åº”ç”¨ MPA æœ‰å¤šä¸ªå…¥å£ï¼Œ<code>entry</code> åªèƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ objectã€‚demo01 é‡Œçš„é…ç½®å°±æ˜¯ä¸€ä¸ª SPA çš„é…ç½®ã€‚</p> <p>demo01 ä¸­ <code>entry</code> çš„å†™æ³•ç­‰åŒäºä¸‹é¢çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå•å…¥å£å†™æˆå­—ç¬¦ä¸²å½¢å¼çš„æ—¶å€™ï¼Œå®é™…ä¸Šä¼šè½¬æ¢æˆå¯¹è±¡å½¢å¼ï¼Œé»˜è®¤çš„ key æ˜¯ <code>main</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    main<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>context</code> å¯èƒ½ä¼šè·Ÿ <code>entry</code> ä¸€èµ·ä½¿ç”¨ï¼Œå®ƒå¯ä»¥æŒ‡å®š <code>entry</code> çš„åŸºæœ¬è·¯å¾„ã€‚å¯¹äº MPAï¼Œä½¿ç”¨ <code>context</code> å¾€å¾€èƒ½ä½¿ <code>entry</code> æ›´ç®€æ´ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  context<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">'./index.js'</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>è€ƒè™‘åˆ°å®é™…å¼€å‘æ—¶å¿…è¦çš„å·¥ç¨‹åŒ–ï¼Œæˆ‘ä»¬æœ‰å¿…è¦æŠŠ <code>webpack</code> é…ç½®ç›¸å…³çš„æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¤¹å†…ï¼Œæ–¹ä¾¿ä¿®æ”¹ã€‚</p> <p>æˆ‘ä»¬å…ˆæŠŠæ²¡æœ‰ä½¿ç”¨åˆ° <code>context</code> çš„ <code>webpack.config.js</code> ç§»åŠ¨åˆ° <code>${PROJECT_DIR}/config</code> æ–‡ä»¶å¤¹ä¸­ï¼Œå†æŒ‡å®š <code>entry</code> çš„ key ä¸º <code>app</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ç§»åŠ¨é…ç½®æ–‡ä»¶åï¼Œå°±éœ€è¦ä¿®æ”¹ <code>package.json</code> é‡Œçš„å‘½ä»¤ï¼Œæ‰‹åŠ¨æŒ‡å®šé…ç½®æ–‡ä»¶äº†ã€‚</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...<span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./config/webpack.config.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="å†çœ‹è¾“å‡º-output"><a href="#å†çœ‹è¾“å‡º-output" class="header-anchor">#</a> å†çœ‹è¾“å‡º output</h3> <p><code>webpack</code> æ„å»ºçš„ç»“æœå¦‚ä½•è¾“å‡ºç”± <code>output</code> æŒ‡å®šã€‚</p> <p>SPA å¯ä»¥ç›´æ¥æŒ‡å®š <code>output.filename</code> å’Œ <code>output.path</code>ï¼Œåƒä¹‹å‰çš„ç¤ºä¾‹ä¸€æ ·ï¼Œä½†æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨å¯¹åº”çš„ <code>chunk</code> çš„åç§°æ¥ç»™æ–‡ä»¶å‘½åï¼Œè€Œä¸æ˜¯ç®€å•ç›´æ¥åœ°ä½¿ç”¨å›ºå®šåç§°ã€‚</p> <p><code>entry</code> ç›®å‰åªä¼šå¯¹åº”ä¸€ä¸ª <code>chunk</code>ï¼Œè€Œè¿™ä¸ª <code>chunk</code> çš„åç§°å°±æ˜¯ <code>entry</code> çš„é”®ï¼Œä¹Ÿå°±æ˜¯ <code>app</code>ã€‚</p> <p>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ <code>output</code> çš„é…ç½®ï¼Œä½¿å¾— <code>entry</code> æŒ‡å®šçš„æ–‡ä»¶æ„å»ºå‡ºæ¥ä¹‹åè·Ÿéš <code>entry</code> çš„ keyã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><code>output.filename = '[name].js'</code> è¡¨ç¤ºä½¿ç”¨å¯¹åº”çš„ <code>chunk</code> çš„åç§°æ¥ç»™æ–‡ä»¶å‘½åã€‚</li></ul> <h3 id="å†çœ‹æ’ä»¶-plugin"><a href="#å†çœ‹æ’ä»¶-plugin" class="header-anchor">#</a> å†çœ‹æ’ä»¶ plugin</h3> <p><code>plugin</code> ç”¨æ¥å¢å¼º <code>webpack</code> åŠŸèƒ½ï¼Œæ¯”å¦‚ä¼˜åŒ–æ‰“åŒ…æ–‡ä»¶ï¼Œç®¡ç†èµ„æºï¼Œæ³¨å…¥ç¯å¢ƒå˜é‡ç­‰ç­‰ï¼Œå®ƒä½œç”¨äºæ•´ä¸ªæ„å»ºè¿‡ç¨‹ã€‚</p> <p>å‰é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°äº† <code>copy-webpack-plugin</code>ï¼Œ<code>html-webpack-plugin</code> ä¸€äº›ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•çš„ <code>plugin</code>ã€‚</p> <p>æ¯ä¸ª <code>plugin</code> éƒ½éœ€è¦æ”¾åˆ° <code>plugins</code> å­—æ®µæ•°ç»„é‡Œï¼Œé¡ºåºä¸€èˆ¬ä¸å½±å“ï¼Œå…·ä½“çš„é…ç½®éœ€è¦å»æŸ¥è¯¢å¯¹åº”çš„æ–‡æ¡£ã€‚</p> <h3 id="å†çœ‹åŠ è½½å™¨-loader"><a href="#å†çœ‹åŠ è½½å™¨-loader" class="header-anchor">#</a> å†çœ‹åŠ è½½å™¨ loader</h3> <p>å› ä¸º <code>webpack</code> é»˜è®¤åªæ”¯æŒè§£æ <code>.js</code> å’Œ <code>.json</code> æ–‡ä»¶ï¼Œæ‰€ä»¥é¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„å…¶ä»–æ–‡ä»¶ï¼Œæ¯”å¦‚å›¾ç‰‡æ–‡ä»¶ã€å­—ä½“æ–‡ä»¶ã€æ ·å¼æ–‡ä»¶ç­‰ï¼Œå°±åªèƒ½ä½¿ç”¨ <code>loader</code> è§£æã€‚</p> <p>ä¸‹é¢ä¼šå…³æ³¨ä¸€äº›å¸¸ç”¨çš„ <code>loader</code>ã€‚</p> <h4 id="js-è¯­æ³•å’Œç‰¹æ€§ç›¸å…³çš„-loader"><a href="#js-è¯­æ³•å’Œç‰¹æ€§ç›¸å…³çš„-loader" class="header-anchor">#</a> js è¯­æ³•å’Œç‰¹æ€§ç›¸å…³çš„ loader</h4> <p>å› ä¸º <code>webpack</code> æœ¬èº«å¹¶ä¸æ”¯æŒè§£æ es6+ è¯­æ³•ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ es6+ è¯­æ³•ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ <code>babel</code> å’Œ <code>babel-loader</code> æ¥è§£æã€‚</p> <p><code>babel</code> çš„ä¸€ä¸ªä¸»è¦ä½œç”¨å°±æ˜¯æŠŠæ–°è¯­æ³•è½¬æ¢æˆæ—§è¯­æ³•ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è¯­æ³•è½¬æ¢ï¼Œæ¯”å¦‚æŠŠç®­å¤´å‡½æ•°è½¬æ¢æˆ <code>function</code>ã€‚<code>babel-loader</code> ä½¿å¾— <code>webpack</code> åœ¨æ„å»ºè¿‡ç¨‹ä¸­èƒ½ä½¿ç”¨ <code>babel</code> å¤„ç†ç›¸å…³çš„æ–‡ä»¶ã€‚</p> <p>é¦–å…ˆè¿˜æ˜¯è¦å®‰è£…ç›¸å…³çš„ä¾èµ–ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i @babel/runtime@~7.12.13
<span class="token function">npm</span> i core-js@~3.8.3
<span class="token function">npm</span> i react@~17.0.1
<span class="token function">npm</span> i react-dom@~17.0.1
<span class="token function">npm</span> i regenerator-runtime@~0.13.7
<span class="token function">npm</span> i @babel/cli@~7.12.13 -D
<span class="token function">npm</span> i @babel/core@~7.12.13 -D
<span class="token function">npm</span> i @babel/plugin-transform-runtime@~7.12.15 -D
<span class="token function">npm</span> i @babel/preset-env@~7.12.13 -D
<span class="token function">npm</span> i @babel/preset-react@~7.12.13 -D
<span class="token function">npm</span> i babel-loader@~8.2.2 -D
<span class="token function">npm</span> i @types/react@~17.0.1 -D
<span class="token function">npm</span> i @types/react-dom@~17.0.0 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ç„¶åä¿®æ”¹ <code>webpack</code> é…ç½®ã€‚ä¸è¦å¿˜è®°ï¼Œå¯¹äº <code>webpack</code> æ¥è¯´ï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥çœ‹æˆä¸€ä¸ªæ¨¡å—ï¼Œæ‰€ä»¥éœ€è¦åœ¨æ¨¡å—å¯¹åº”çš„å­—æ®µä¸‹å†™é…ç½®ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token comment">// æŒ‡å®š loader</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// js/jsx æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// åªå¤„ç† src é‡Œé¢çš„ js/jsx æ–‡ä»¶</span>
        include<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">src</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// ä½¿ç”¨ babel-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token operator">...</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li><code>test: /\.jsx?$/</code> è¡¨ç¤ºåªå¤„ç† <code>.js</code> å’Œ <code>.jsx</code> æ–‡ä»¶ã€‚</li> <li><code>include: /src/</code> è¡¨ç¤ºåªå¤„ç† <code>src</code> é‡Œé¢çš„ <code>.js</code> å’Œ <code>.jsx</code> æ–‡ä»¶ï¼Œè¿™èƒ½å¤Ÿæœ‰æ•ˆåœ°æé«˜æ•ˆç‡ï¼ŒåŒæ—¶é¿å…å¯èƒ½å­˜åœ¨çš„äºŒæ¬¡ç¼–è¯‘é—®é¢˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œ<code>node_modules</code> é‡Œé¢çš„ <code>.js</code> å’Œ <code>.jsx</code> æ–‡ä»¶éƒ½ä¼šç›´æ¥æ”¯æŒ es5ï¼Œæ‰€ä»¥ä¸éœ€è¦å¤„ç†ã€‚</li> <li>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>exclude</code> æ¥æŒ‡å®šä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶ï¼Œå®ƒçš„ä¼˜å…ˆçº§æ¯” <code>include</code> æ›´é«˜ã€‚</li></ul> <p>ä¿®æ”¹å®Œ <code>webpack</code> é…ç½®åï¼Œæˆ‘ä»¬è¿˜éœ€è¦é…ç½® <code>babel</code>ï¼Œè®©å®ƒæ ¹æ®æˆ‘ä»¬çš„éœ€æ±‚è½¬æ¢è¯­æ³•ã€‚æˆ‘ä»¬åˆ›å»º <code>${PROJECT_DIR}/babel.config.json</code> ä½œä¸º <code>babel</code> çš„é…ç½®æ–‡ä»¶ã€‚</p> <p>è¦æ”¯æŒ es6+ è¯­æ³•éå¸¸ç®€å•ï¼Œåªéœ€è¦ç›´æ¥ä½¿ç”¨çš„ <code>@babel/preset-env</code>ã€‚</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä½† <code>@babel/preset-env</code> é»˜è®¤çš„é…ç½®å¾€å¾€ä¸èƒ½å‡†ç¡®æ»¡è¶³é¡¹ç›®éœ€æ±‚ã€‚ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„é¡¹ç›®éœ€æ±‚æ˜¯æ”¯æŒç‰¹å®šçš„æµè§ˆå™¨å’Œç‰¹å®šçš„æµè§ˆå™¨ç‰ˆæœ¬ï¼Œæ¯”å¦‚æ”¯æŒ IE 11ã€‚</p> <p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦å‘ <code>@babel/preset-env</code> è¯´æ˜ç›®æ ‡æµè§ˆå™¨ï¼Œä¹Ÿå°±æ˜¯è¯­æ³•è½¬æ¢åçš„ä»£ç èƒ½å¤Ÿè·‘åœ¨ä»€ä¹ˆæµè§ˆå™¨ä¸Šã€‚</p> <p>æˆ‘ä»¬å¯ä»¥ç”¨ <code>${PROJECT_DIR}/.browserslistrc</code> æ–‡ä»¶æ¥è¯´æ˜ç›®æ ‡æµè§ˆå™¨ã€‚<code>.browserslistrc</code> æ–‡ä»¶æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä¾èµ–äº <code>browserslist</code> çš„æ–‡ä»¶ï¼Œå®ƒçš„å†…å®¹è¯´æ˜äº†é¡¹ç›®çš„ç›®æ ‡æµè§ˆå™¨ï¼Œä¼šè¢« <code>@babel/preset-env</code> è¯»å–å¹¶ä½¿ç”¨ã€‚</p> <p>æˆ‘ä»¬ä¸º <code>${PROJECT_DIR}/.browserslistrc</code> æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token operator">&gt;</span> <span class="token number">0.2</span>%
last <span class="token number">3</span> versions
not dead
chrome <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">70</span>
firefox <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">68</span>
safari <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">13</span>
ie <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">11</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><code>&gt; 0.2%</code> è¡¨ç¤ºéœ€è¦æ”¯æŒä½¿ç”¨ç‡è¶…è¿‡ 0.2% çš„æµè§ˆå™¨ã€‚</li> <li><code>last 3 versions</code> è¡¨ç¤ºéœ€è¦æ”¯æŒæµè§ˆå™¨çš„æœ€è¿‘ 3 ä¸ªç‰ˆæœ¬ã€‚</li> <li><code>not dead</code> è¡¨ç¤ºæµè§ˆå™¨åœ¨æœ€è¿‘ 24 ä¸ªæœˆå†…è¿˜å¾—åˆ°è¿‡å®˜æ–¹çš„æ”¯æŒã€‚</li> <li><code>chrome &gt;= 70</code> è¡¨ç¤º chrome çš„ç‰ˆæœ¬éœ€è¦ä¸å°äº 70ã€‚</li> <li><code>firefox &gt;= 68</code> è¡¨ç¤º firefox çš„ç‰ˆæœ¬éœ€è¦ä¸å°äº 68ã€‚</li> <li><code>safari &gt;= 13</code> è¡¨ç¤º safari çš„ç‰ˆæœ¬éœ€è¦ä¸å°äº 13ã€‚</li> <li><code>ie &gt;= 11</code> è¡¨ç¤º ie çš„ç‰ˆæœ¬éœ€è¦ä¸å°äº 11ã€‚</li></ul> <p>ä¸Šé¢çš„æ¡ä»¶å–å¹¶é›†ï¼Œå°±æ˜¯éœ€è¦æ”¯æŒçš„æµè§ˆå™¨èŒƒå›´ã€‚</p> <p>è¯´æ˜ç›®æ ‡æµè§ˆå™¨ä¹‹åï¼Œ<code>babel</code> åœ¨è½¬æ¢è¯­æ³•çš„æ—¶å€™ä¼šæ›´åŠ ç²¾å‡†ã€‚å®ƒä¼šæŠŠç›®æ ‡æµè§ˆå™¨ä¸æ”¯æŒçš„ es6+ è¯­æ³•è½¬æ¢æˆ es5 è¯­æ³•ï¼ŒåŒæ—¶ä¿ç•™ç›®æ ‡æµè§ˆå™¨æ”¯æŒçš„ es6+ è¯­æ³•ã€‚</p> <p>ä½†æ˜¯å¦‚æœè½¬æ¢åçš„ä»£ç ä¸­å­˜åœ¨æµè§ˆå™¨ä¸æ”¯æŒçš„ç‰¹æ€§ï¼Œæ¯”å¦‚ <code>Promise</code>ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ï¼Œ<code>babel</code> çš„å¦ä¸€ä¸ªä½œç”¨â€”â€”è‡ªåŠ¨è¡¥é½ç‰¹æ€§â€”â€”å°±å¾ˆå¥½åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p> <p>polyfill æŒ‡çš„æ˜¯èƒ½å¤Ÿæä¾›ä¸€äº›æµè§ˆå™¨æœ¬èº«æ²¡æœ‰çš„æ–°ç‰¹æ€§çš„ js ä»£ç åŒ…ã€‚æˆ‘ä»¬å¯ä»¥é…ç½® <code>babel</code> è‡ªåŠ¨å¼•å…¥ polyfill æ¥è‡ªåŠ¨è¡¥é½ç›®æ ‡æµè§ˆå™¨çš„ç‰¹æ€§ã€‚</p> <p><code>@babel/preset-env</code> é»˜è®¤åªä¼šè½¬æ¢è¯­æ³•ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨é…ç½®æ¥å¯ç”¨è‡ªåŠ¨è¡¥å…¨ç‰¹æ€§çš„åŠŸèƒ½ã€‚</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;corejs&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token property">&quot;proposals&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li><code>useBuiltIns</code> æŒ‡å®š <code>@babel/preset-env</code> æ€ä¹ˆå¤„ç† polyfillã€‚
<ul><li>é»˜è®¤åœ°ï¼Œ<code>useBuiltIns</code> çš„å€¼æ˜¯ <code>false</code>ï¼Œä¹Ÿå°±æ˜¯ä¸å¤„ç† polyfillã€‚</li> <li><code>useBuiltIns</code> å¯ä»¥æŒ‡å®šæˆ <code>entry</code>ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åœ°åœ¨é¡¹ç›®å…¥å£å¼•å…¥ <code>core-js</code> å’Œ <code>regenerator-runtime</code>ï¼Œè¿™ç§æƒ…å†µè¾ƒä¸ºå°‘è§ã€‚</li> <li>æŒ‡å®šæˆ <code>usage</code> æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹æ›´å¥½çš„é€‰æ‹©ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æ— éœ€æ‰‹åŠ¨å¼•å…¥ï¼Œ<code>babel/preset-env</code> ä¼šä¸ºæˆ‘ä»¬æ ¹æ®ç›®æ ‡æµè§ˆå™¨åšç›¸å…³çš„å¼•å…¥ã€‚</li></ul></li> <li><code>core-js</code> æŒ‡å®š <code>@babel/preset-env</code> ä½¿ç”¨ä»€ä¹ˆç‰ˆæœ¬çš„ <code>core-js</code>ï¼Œåªæœ‰ <code>useBuiltIns</code> çš„å€¼æ˜¯ <code>entry</code> æˆ– <code>usage</code> çš„æ—¶å€™èµ·ä½œç”¨ã€‚
<ul><li>é»˜è®¤åœ°ï¼Œ<code>core-js</code> çš„å€¼æ˜¯ 2ï¼Œè¡¨ç¤ºä½¿ç”¨ <code>core-js</code> v2ã€‚</li> <li>æŒ‡å®šæˆ 3 æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸º <code>core-js</code> v3 æä¾›äº†æ›´å¤šçš„ polyfillï¼ŒåŒæ—¶å‡å°‘äº†å…¨å±€æ±¡æŸ“ã€‚</li> <li>åªæŒ‡å®šç‰ˆæœ¬ï¼Œå°±åªä¼šå¼•å…¥ç¨³å®šçš„ç‰¹æ€§ã€‚è¦å¼•å…¥ææ¡ˆç‰¹æ€§ï¼Œå¯ä»¥æŒ‡å®š <code>&quot;proposals&quot;: true</code>ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨ <code>core-js</code> v3 å·²ç»æ”¯æŒçš„ææ¡ˆï¼ˆä¸€èˆ¬å·²ç»è¶³å¤Ÿç¨³å®šï¼‰ã€‚</li></ul></li></ul> <p>è¿™æ—¶å€™ï¼Œ<code>babel</code> ä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨å¼•å…¥ <code>core-js</code> v3 å’Œ <code>regenerator-runtime</code> ä¸­å’Œé¡¹ç›®ä»£ç å…³è”çš„éƒ¨åˆ†ï¼Œè‡ªåŠ¨è¡¥å…¨æµè§ˆå™¨ç‰¹æ€§ã€‚</p> <p>ä½†ä½¿ç”¨è¿™æ ·çš„é…ç½®æ„å»ºå‡ºæ¥çš„ä»£ç è¿˜ä¸èƒ½æŠ•å…¥åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚è‡ªåŠ¨è¡¥å…¨æµè§ˆå™¨ç‰¹æ€§ä¹‹åå¯èƒ½ä¼šä½¿å¾—æ¯ä¸ªæ–‡ä»¶å¤´éƒ¨éƒ½å¢åŠ äº†ç›¸åŒçš„ä»£ç ï¼Œæ¯”å¦‚å¤šä¸ªæ–‡ä»¶éƒ½ä½¿ç”¨äº† <code>Promise</code>ï¼Œè½¬è¯‘ä¹‹åå°±ä¼šåœ¨è¿™äº›æ–‡ä»¶çš„å¤´éƒ¨éƒ½å¼•å…¥ç›¸åŒçš„ <code>Promise</code> ç›¸å…³çš„ polyfillã€‚è¿™äº›é‡å¤çš„ä»£ç ä¼šå½±å“æœ€ç»ˆæ„å»ºåŒ…çš„ä½“ç§¯ï¼Œåœ¨å®é™…å¼€å‘ä¸­æ˜¯éš¾ä»¥æ¥å—çš„ã€‚</p> <p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>@babel/plugin-transform-runtime</code> æ¥æŠ½ç¦»è¿™äº›é‡å¤çš„ polyfill ä»£ç ï¼ŒæŠŠå®ƒä»¬æ”¾åˆ°ä¸€èµ·ï¼Œè¿›ä¸€æ­¥å‹ç¼©æœ€ç»ˆæ„å»ºåŒ…çš„ä½“ç§¯ã€‚ä»£ç é‡Œé¢ç”¨åˆ°å¯¹åº”åŠŸèƒ½çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å¼•å…¥å¯¹åº”çš„ polyfillã€‚</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;corejs&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token property">&quot;proposals&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>é™¤äº† es6+ çš„è¯­æ³•ï¼Œæˆ‘ä»¬è¿˜æƒ³æ”¯æŒ <code>react</code> è¯­æ³•ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ <code>babel</code> æ¥è§£æ <code>react</code> ä»£ç ï¼Œåªéœ€è¦æ ¹æ® <code>@babel/preset-react</code> çš„æ–‡æ¡£é…ç½®å°±å¯ä»¥äº†ã€‚</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;corejs&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token property">&quot;proposals&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@babel/preset-react&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-react&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>ä¹‹åå¯ä»¥ä¿®æ”¹ <code>${PROJECT_DIR}/src/index.js</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/src/index.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.jsx'</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>å¦‚æœä¸æƒ³å†™ <code>.jsx</code> ç­‰åç¼€ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è®¾ç½® <code>resolve.extensions</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¸ç”¨å†™ .jsï¼Œ.jsxï¼Œ.ts å’Œ .tsx</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.jsx'</span><span class="token punctuation">,</span> <span class="token string">'.ts'</span><span class="token punctuation">,</span> <span class="token string">'.tsx'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æˆ‘ä»¬åœ¨ <code>App.jsx</code> é‡Œä½¿ç”¨ <code>react</code>ï¼Œ<code>react-dom</code>ï¼Œ<code>Promise</code> ä»¥æµ‹è¯•æˆ‘ä»¬çš„é…ç½®ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/src/App.jsx</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> iconWebpack <span class="token keyword">from</span> <span class="token string">'./assets/webpack.png'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello World!'</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Hello Webpack<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>ä¹‹åæ„å»ºå¹¶è¿è¡Œæµ‹è¯•ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢ä¸Šä¼šå‡ºç° <code>Hello Webpack!</code> çš„æ–‡å­—ï¼Œ5 ç§’å·¦å³æ ‡ç­¾é¡µçš„æ ‡é¢˜è¢«ä¿®æ”¹æˆ <code>Hello World!</code>ã€‚ie 11 æœ¬èº«ä¸æ”¯æŒ <code>Promise</code>ï¼Œä½†åœ¨ ie 11 ä¸Šæµ‹è¯•ä¹Ÿèƒ½æœ‰è¿™æ ·çš„æ•ˆæœï¼Œè¯´æ˜ <code>Promise</code> å·²ç»è¢«åŠ å…¥è¿›å»äº†ã€‚</p> <p>å·²ç»æ”¯æŒäº†ç‰¹å®šç‰¹æ€§çš„æµè§ˆå™¨ä¸ä¼šå†åº¦å¼•å…¥å¯¹åº”çš„ polyfillã€‚</p> <p><code>@babel/plugin-transform-runtime</code> ä¹Ÿå¯ä»¥å’Œ <code>core-js</code> æ­é…ä½¿ç”¨ï¼Œä½ å¯ä»¥è‡ªè¡Œå°è¯•ã€‚</p> <h4 id="æ ·å¼ç›¸å…³çš„-loader"><a href="#æ ·å¼ç›¸å…³çš„-loader" class="header-anchor">#</a> æ ·å¼ç›¸å…³çš„ loader</h4> <p>ç”±äº <code>webpack</code> æœ¬èº«å¹¶ä¸æ”¯æŒè§£æ <code>.css</code>ï¼Œ<code>.sass</code> å’Œ <code>.scss</code> æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨ <code>loader</code> å»è§£æè¿™äº›æ–‡ä»¶ã€‚è¦è§£æ <code>.less</code> å’Œ <code>.styl</code> æ–‡ä»¶ï¼Œç›¸å¯¹åº”çš„ <code>loader</code> çš„é…ç½®å¤§åŒå°å¼‚ï¼Œå‚è€ƒå¯¹åº”æ–‡æ¡£æ‘¸ç´¢å°±å¯ä»¥äº†ï¼Œè¿™é‡Œä¸å†æ¼”ç¤ºã€‚</p> <p>é¦–å…ˆè¿˜æ˜¯è¦å®‰è£…ç›¸å…³çš„ä¾èµ–ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i zent@~9.3.0
<span class="token function">npm</span> i babel-plugin-zent@~2.2.2 -D
<span class="token function">npm</span> i style-loader@~2.0.0 -D
<span class="token function">npm</span> i css-loader@~5.0.2 -D
<span class="token function">npm</span> i sass@~1.32.6 -D
<span class="token function">npm</span> i sass-loader@~10.1.1 -D
<span class="token function">npm</span> i resolve-url-loader@~3.1.2 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>css-loader</code> èƒ½å¤ŸæŠŠ <code>.css</code> æ–‡ä»¶è§£ææˆ css æ¨¡å—ï¼Œè€Œ <code>style-loader</code> èƒ½å¤Ÿå°† css æ¨¡å—åµŒå…¥åˆ°æ–‡ä»¶ä¸­ã€‚</p> <p>æˆ‘ä»¬å…ˆåœ¨ <code>${PROJECT_DIR}/src/index.js</code> å¼•å…¥ <code>.css</code> æ–‡ä»¶ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/src/index.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ç„¶ååˆ›å»º <code>${PROJECT_DIR}/src/index.css</code>ï¼Œè®¾ç½®ä¸€äº›æ ·å¼ã€‚</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* ${PROJECT_DIR}/src/index.css */</span>
<span class="token selector">*,
::before,
::after</span> <span class="token punctuation">{</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">html,
body</span> <span class="token punctuation">{</span>
  <span class="token property">min-width</span><span class="token punctuation">:</span> 1280px<span class="token punctuation">;</span>
  <span class="token property">min-height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> -apple-system<span class="token punctuation">,</span> BlinkMacSystemFont<span class="token punctuation">,</span> <span class="token string">&quot;Segoe UI&quot;</span><span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> <span class="token string">&quot;Helvetica Neue&quot;</span><span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> <span class="token string">&quot;PingFang SC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hiragino Sans GB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Microsoft YaHei&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å¾®è½¯é›…é»‘&quot;</span><span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> <span class="token string">&quot;Noto Sans&quot;</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">,</span> <span class="token string">&quot;Apple Color Emoji&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Segoe UI Emoji&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Segoe UI Symbol&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Noto Color Emoji&quot;</span><span class="token punctuation">;</span>
  <span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased<span class="token punctuation">;</span>
  <span class="token property">-moz-osx-font-smoothing</span><span class="token punctuation">:</span> grayscale<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>æœ€åï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ <code>webpack</code> é…ç½®ï¼Œå¢åŠ å¯¹ <code>.css</code> æ–‡ä»¶çš„è§£æã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š loader</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// css æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// å…ˆä½¿ç”¨ css-loader å†ä½¿ç”¨ style-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'css-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token operator">...</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li><code>loader</code> çš„è°ƒç”¨é¡ºåºæ˜¯ä»åå¾€å‰çš„ã€‚ä¸Šé¢çš„ç¤ºä¾‹é‡Œï¼Œä¼šå…ˆè°ƒç”¨ <code>css-loader</code> å¤„ç† <code>.css</code> æ–‡ä»¶ï¼Œå†è°ƒç”¨ <code>style-loader</code> åšè¿›ä¸€æ­¥å¤„ç†ã€‚</li></ul> <p>é‡æ–°æ„å»ºå¹¶è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­çœ‹åˆ°ï¼Œæ ·å¼å·²ç»ä½œä¸º <code>&lt;style&gt;</code> è¢«æ’å…¥åˆ° <code>&lt;head&gt;</code> æ ‡ç­¾é‡Œé¢ã€‚</p> <p>å¤„ç† <code>.sass</code> å’Œ <code>.scss</code> æ–‡ä»¶æœ‰å°‘è®¸çš„ä¸åŒã€‚<code>sass-loader</code> ä¼šæŠŠ <code>.sass</code> å’Œ <code>.scss</code> æ–‡ä»¶è½¬æ¢æˆ <code>.css</code> æ–‡ä»¶ï¼Œè€Œ <code>.css</code> æ–‡ä»¶çš„å¤„ç†æ­¥éª¤å°±è·Ÿä¸Šé¢ä¸€è‡´ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦å¤åˆ¶ç²˜è´´ï¼Œç„¶åé…ç½® <code>sass-loader</code> å°±å¯ä»¥äº†ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š loader</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// css æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// å…ˆä½¿ç”¨ css-loader å†ä½¿ç”¨ style-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'css-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// sass/scss æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s[ac]ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// ä¾æ¬¡ä½¿ç”¨ sass-loaderï¼Œcss-loader å’Œ style-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'css-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'sass-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><code>sass-loader</code> ä¼šå¤„ç† <code>@import</code> è¯­å¥ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦é…ç½® <code>css-loader</code>ï¼Œè¯´æ˜åœ¨ <code>css-loader</code> ä¹‹å‰è¿˜æœ‰ 1 ä¸ª <code>loader</code> ä¼šå¤„ç† <code>@import</code> è¯­å¥ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š loader</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// css æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// å…ˆä½¿ç”¨ css-loader å†ä½¿ç”¨ style-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'css-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// sass/scss æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s[ac]ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// ä¾æ¬¡ä½¿ç”¨ sass-loaderï¼Œcss-loader å’Œ style-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'sass-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>sass/scss æ²¡æœ‰ url é‡å†™çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦åŠ å…¥ <code>resolve-url-loader</code>ï¼Œé¿å…å®é™…ä½¿ç”¨çš„æ—¶å€™å‡ºç° url æŒ‡å‘ä¸æ­£ç¡®çš„é—®é¢˜ã€‚<code>resolve-url-loader</code> ä¸ä¼šå¤„ç† <code>@import</code> è¯­å¥ï¼Œæ‰€ä»¥ä¸ç”¨å†ä¿®æ”¹ <code>css-loader</code> çš„ <code>importLoaders</code> é…ç½®é¡¹ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š loader</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// css æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// å…ˆä½¿ç”¨ css-loader å†ä½¿ç”¨ style-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'css-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// sass/scss æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s[ac]ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// ä¾æ¬¡ä½¿ç”¨ sass-loaderï¼Œresolve-url-loaderï¼Œcss-loader å’Œ style-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'resolve-url-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'sass-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>æˆ‘ä»¬æŠŠ <code>index.css</code> é‡å‘½åä¸º <code>index.scss</code>ï¼Œä¿®æ”¹ <code>${PROJECT_DIR}/src/index.js</code> é‡Œé¢çš„å¼•å…¥ã€‚é‡æ–°æ„å»ºã€æµ‹è¯•ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚</p> <p>æˆ‘ä»¬å†æ¥è¯•ç€æ·»åŠ å¹¶ä½¿ç”¨ <code>zent</code> è¿™ä¸ªç»„ä»¶åº“ã€‚æˆ‘ä»¬ä¿®æ”¹ <code>${PROJECT_DIR}/src/App.jsx</code>ï¼ŒåŠ å…¥æ …æ ¼ç³»ç»Ÿå’Œå¸¦å›¾æ ‡çš„æŒ‰é’®ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/src/App.jsx</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  LayoutRow <span class="token keyword">as</span> Row<span class="token punctuation">,</span>
  LayoutCol <span class="token keyword">as</span> Col<span class="token punctuation">,</span>
  LayoutGrid <span class="token keyword">as</span> Grid<span class="token punctuation">,</span>
  Button<span class="token punctuation">,</span>
  Icon<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'zent'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello World!'</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Grid<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Row<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Col span<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">24</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">&quot;youzan&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            Hello Zent<span class="token operator">!</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Col<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Row<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>ç„¶åä¿®æ”¹ <code>${PROJECT_DIR}/babel.config.json</code>ï¼Œæ ¹æ® <code>babel-plugin-zent</code> è¯´æ˜åŠ å…¥æŒ‰éœ€åŠ è½½çš„ä¼˜åŒ–ã€‚</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...<span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;zent&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;libraryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zent&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;noModuleRewrite&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;automaticStyleImport&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;useRawStyle&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>é‡æ–°æ„å»ºã€æµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªè“è‰²çš„æŒ‰é’®ï¼ŒæŒ‰é’®å†…å·¦è¾¹æ˜¯æœ‰èµçš„å›¾æ ‡ï¼Œæ–‡å­—æ˜¯ <code>Hello Zent</code>ã€‚</p> <p>ä½†ä»…ä»…æ˜¯è§£æ <code>.css</code>ï¼Œ<code>.sass</code> å’Œ <code>scss</code> è¿˜è¿œè¿œä¸èƒ½è¾¾åˆ°å®é™…çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šéœ€è¦ä½¿ç”¨ css æ–°ç‰¹æ€§ï¼Œæˆ–è€…å‹ç¼© css ä»£ç ï¼Œåˆæˆ–è€…ä¸º css å±æ€§æ·»åŠ æµè§ˆå™¨å‰ç¼€ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ <code>postcss</code> å’Œ <code>postcss-loader</code>ï¼Œä¸å°‘äººæŠŠ <code>postcss</code> å«åš css ç•Œçš„ <code>babel</code>ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i postcss@~8.2.5 -D
<span class="token function">npm</span> i postcss-loader@~4.2.0 -D
<span class="token function">npm</span> i autoprefixer@~10.2.4 -D
<span class="token function">npm</span> i postcss-preset-env@~6.7.0 -D
<span class="token function">npm</span> i cssnano@~4.1.10 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åœ¨ <code>webpack</code> é…ç½®æ–‡ä»¶é‡Œä½¿ç”¨ <code>postcss-loader</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š loader</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// css æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// ä¾æ¬¡ä½¿ç”¨ postcss-loaderï¼Œcss-loaderï¼Œstyle-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// sass/scss æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s[ac]ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// ä¾æ¬¡ä½¿ç”¨ sass-loaderï¼Œresolve-url-loaderï¼Œpostcss-loaderï¼Œcss-loaderï¼Œstyle-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'resolve-url-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'sass-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><ul><li><code>postcss-loader</code> ä¼šå¤„ç† <code>@import</code> è¯­å¥ï¼Œæ³¨æ„ä¿®æ”¹ <code>css-loader</code> çš„ <code>importLoaders</code> é…ç½®é¡¹ã€‚</li></ul> <p>åˆ›å»ºä¸€ä¸ª <code>${PROJECT_DIR}/postcss.config.js</code> æ–‡ä»¶ä½œä¸º <code>postcss</code> çš„é…ç½®æ–‡ä»¶ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/postcss.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç©ºæ–‡ä»¶ç­‰åŒäºæ²¡æœ‰é…ç½® <code>postcss</code>ã€‚è¦è®© <code>postcss</code> å¤„ç† cssï¼Œå°±éœ€è¦ä½¿ç”¨æ’ä»¶ã€‚</p> <p>æµè§ˆå™¨å‚å•†ä»¬æœ‰æ—¶ä¼šç»™å®éªŒæ€§çš„æˆ–è€…éæ ‡å‡†çš„ css å±æ€§æ·»åŠ å‰ç¼€ï¼Œè¿™æ ·å°±å¯ä»¥è®©å¼€å‘è€…è¿›è¡Œè¯•éªŒï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šä½¿å¾—æ ‡å‡†åŒ–ä¹‹åç°æœ‰ä»£ç è¢«ç ´åã€‚</p> <p>å› ä¸ºå­˜åœ¨æµè§ˆå™¨å‚å•†è‡ªå®ç°æŸäº›å®éªŒæ€§çš„å±æ€§ã€åœæ­¢æ›´æ–°æµè§ˆå™¨å¯¼è‡´æ²¡æœ‰æµè§ˆå™¨è·Ÿéšæ ‡å‡†ç­‰æƒ…å†µï¼Œæ‰€ä»¥ä¸º css å±æ€§æ·»åŠ ç‰¹å®šæµè§ˆå™¨çš„å‰ç¼€ä¹Ÿå¸¦æœ‰äº† polyfill çš„æ„å‘³ã€‚</p> <p>æ‰‹åŠ¨æ·»åŠ å‰ç¼€æ˜¯ç›¸å½“éº»çƒ¦çš„ä¸€ä»¶äº‹æƒ…ï¼Œä½¿ç”¨ <code>autoprefixer</code> æ’ä»¶å¯ä»¥è®© <code>postcss</code> è‡ªåŠ¨ä¸ºæˆ‘ä»¬è¡¥å…¨æµè§ˆå™¨çš„æ ·å¼å‰ç¼€ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/postcss.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ— éœ€é¢å¤–çš„é…ç½®ï¼Œ<code>autoprefixer</code> ä¼šè‡ªåŠ¨å¯»æ‰¾ç›®æ ‡æµè§ˆå™¨çš„è¯´æ˜ï¼Œä¹Ÿå°±æ˜¯ <code>${PROJECT_DIR}/.browserslistrc</code>ï¼Œå¹¶ä¸”æ ¹æ®ç›®æ ‡æµè§ˆå™¨è‡ªåŠ¨åœ°æ·»åŠ å‰ç¼€ã€‚</p> <p>è€Œè¦å¤„ç†æŸäº› css çš„æ–°è¯­æ³•å’Œæ–°ç‰¹æ€§ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°å¦å¤–ä¸€ä¸ªæ’ä»¶ <code>postcss-preset-env</code>ã€‚å’Œ <code>@babel/preset-env</code> ç±»ä¼¼ï¼Œå®ƒå¯ä»¥ä¸ºæˆ‘ä»¬å¤„ç† css çš„æŸäº›æ–°è¯­æ³•å’Œæ–°ç‰¹æ€§ï¼Œè€Œä¸”ï¼Œå®ƒè¿˜å†…ç½®äº† <code>autoprefixer</code> çš„åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠ <code>autoprefixer</code> æ¢æˆ <code>postcss-preset-env</code>ï¼Œ<code>${PROJECT_DIR}/.browserslistrc</code> ä¹Ÿä¼šè¢«è‡ªåŠ¨åœ°è¯»å–ä½¿ç”¨ã€‚</p> <p>è¿™æ—¶å€™ï¼Œ<code>postcss</code> å°±ä¼šæ ¹æ®ç›®æ ‡æµè§ˆå™¨è‡ªåŠ¨æ·»åŠ å±æ€§å‰ç¼€ã€å¤„ç†ç›¸å¯¹ç¨³å®šçš„æ–°è¯­æ³•å’Œæ–°ç‰¹æ€§äº†ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/postcss.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-preset-env'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>é»˜è®¤åœ°ï¼Œ<code>postcss-preset-env</code> ä¼šè‡ªåŠ¨å¤„ç† stage 2+ çš„æ–°è¯­æ³•å’Œæ–°ç‰¹æ€§ï¼Œä½ å¯ä»¥åœ¨å®ƒçš„å®˜æ–¹ç½‘ç«™ä¸­æŸ¥çœ‹ã€‚</p> <p>æœ€åï¼Œ<code>cssnano</code> æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‹ç¼© <code>.css</code> æ–‡ä»¶å¹¶ä¸”å»é™¤æ‰å¤šä½™çš„æ³¨é‡Šï¼Œç”¨æ³•ä¹ŸåŒæ ·å¾ˆç®€å•ã€‚ä½†è¦æ³¨æ„ï¼Œåªæœ‰åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ‰éœ€è¦å‹ç¼©å¹¶å»é™¤æ³¨é‡Šï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒæ—¶å†å¼•å…¥ <code>cssnano</code>ã€‚</p> <p>è¿™é‡Œæˆ‘ä»¬å‚è€ƒå®˜æ–¹æ–‡æ¡£çš„é…ç½®ï¼Œä½¿ç”¨ <code>cssnano-preset-default</code>ï¼Œé…ç½®ç§»é™¤æ‰€æœ‰æ³¨é‡Šã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/postcss.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-preset-env'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span>
      <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cssnano'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        preset<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> discardComments<span class="token operator">:</span> <span class="token punctuation">{</span> removeAll<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>å¦‚æœä½ åœ¨åŠ å…¥ <code>cssnano</code> å‰æŸ¥çœ‹è¿‡ç”Ÿäº§ç¯å¢ƒä¸‹æ„å»ºå‡ºæ¥çš„ <code>.css</code> æ–‡ä»¶ï¼Œä½ ä¼šå‘ç°æ–‡ä»¶å·²ç»è¢«å‹ç¼©è¿‡äº†ï¼Œåªæ˜¯æ³¨é‡Šæ²¡æœ‰è¢«å»æ‰ã€‚è¿™æ˜¯å› ä¸ºç›®å‰æˆ‘ä»¬æ‰€æœ‰çš„ <code>.css</code> æ–‡ä»¶éƒ½æ˜¯ç”± <code>.scss</code> ç¼–è¯‘è€Œæ¥ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œ<code>sass</code> ä¾èµ–ä¼šç»™ <code>sass-loader</code> æŒ‡å®š <code>outputStyle: 'compressed'</code>ï¼Œè¿™å°±å¯¼è‡´äº†æˆ‘ä»¬å¾—åˆ°çš„ <code>.css</code> æ–‡ä»¶å·²ç»è¢«å‹ç¼©è¿‡ä¸€æ¬¡ï¼Œä½†æ³¨é‡Šä»ç„¶è¿˜åœ¨ã€‚</p> <p>åŠ å…¥ <code>cssnano</code> æ’ä»¶ä»ç„¶æ˜¯æœ‰å¿…è¦çš„ï¼Œå› ä¸º <code>.css</code> æ–‡ä»¶ä¾æ—§æ²¡æœ‰è¢«å‹ç¼©ï¼Œè€Œ <code>.css</code> å’Œ <code>.scss</code> æ–‡ä»¶çš„æ³¨é‡Šä¹Ÿæ²¡æœ‰è¢«å»æ‰ï¼Œ<code>cssnano</code> å¯ä»¥å¾ˆå¥½åœ°å®Œæˆè¿™éƒ¨åˆ†å·¥ä½œã€‚</p> <p>åˆ°æ­¤ä¸ºæ­¢ï¼Œ<code>postcss</code> å·²ç»èƒ½è‡ªåŠ¨å¤„ç†æˆ‘ä»¬çš„ css ä»£ç ä¸­ç”¨åˆ°çš„æ–°è¯­æ³•å’Œæ–°ç‰¹æ€§ï¼Œä¼šè‡ªåŠ¨æ·»åŠ å±æ€§å‰ç¼€ï¼Œèƒ½å‹ç¼©å¹¶ç§»é™¤æ³¨é‡Šäº†ã€‚</p> <p>æŸäº›æ ·å¼åº“å¯èƒ½éœ€è¦æˆ‘ä»¬å¼•å…¥å¯¹åº”çš„ç»„ä»¶æ ·å¼ï¼Œæ¯”å¦‚ä¸Šé¢çš„ <code>zent</code>ã€‚æˆ‘ä»¬åœ¨é…ç½®å¯¹åº”çš„ <code>loader</code> çš„æ—¶å€™æ²¡æœ‰åƒé…ç½® <code>babel-loader</code> ä¸€æ ·åªå¤„ç† <code>src</code> å†…çš„æ ·å¼æ–‡ä»¶ï¼Œè¿™ä¹ˆåšæ˜¯æœ‰åŸå› çš„ã€‚</p> <ul><li>æ¯”èµ· js/jsx æ–‡ä»¶çš„å†…å®¹ï¼Œæ ·å¼æ–‡ä»¶çš„å†…å®¹å¾€å¾€æ›´å°ï¼Œå¤„ç†èµ·æ¥ä¸ä¼šè€—è´¹è¿‡å¤šèµ„æºã€‚</li> <li>æ ·å¼æ–‡ä»¶æœ¬èº«æœ‰å¯èƒ½æ²¡è¢«å¤„ç†è¿‡ï¼Œæ— è®ºæœ‰æ²¡æœ‰è¢«å¤„ç†è¿‡ï¼Œé‡æ–°å¤„ç†ä¸€æ¬¡çš„ç»“æœä¹Ÿä¸ä¼šæœ‰ä»»ä½•å½±å“ï¼Œç”±æˆ‘ä»¬çš„ <code>loader</code> å¤„ç†ä¸€æ¬¡æ˜¯ä¿é™©çš„é€‰æ‹©ã€‚</li></ul> <h4 id="èµ„äº§ç›¸å…³çš„-loader"><a href="#èµ„äº§ç›¸å…³çš„-loader" class="header-anchor">#</a> èµ„äº§ç›¸å…³çš„ loader</h4> <p>ä¸€èˆ¬æˆ‘ä»¬æŠŠé¡¹ç›®ä½¿ç”¨åˆ°çš„å›¾ç‰‡ã€å­—ä½“ã€éŸ³é¢‘ã€è§†é¢‘ä¹‹ç±»çš„æ–‡ä»¶å«åšé¡¹ç›®èµ„äº§æ–‡ä»¶ï¼Œå®ƒä»¬ä¸€èˆ¬ä¸èƒ½è¢«ç›´æ¥ä¿®æ”¹ã€‚</p> <p>æœ€å¸¸ç”¨çš„å¤„ç†èµ„äº§çš„ <code>loader</code> å°±æ˜¯ <code>file-loader</code> å’Œ <code>url-loader</code>ã€‚<code>url-loader</code> æ˜¯ <code>file-loader</code> çš„å‡çº§ç‰ˆï¼Œå¢åŠ äº†æ–‡ä»¶å¤§å°çš„ä¸Šé™é…ç½®ï¼Œè¾¾åˆ°å¤§å°ä¸Šé™æ—¶ä¼šè‡ªåŠ¨ä½¿ç”¨ <code>file-loader</code>ï¼Œæ²¡è¾¾åˆ°å¤§å°ä¸Šé™çš„æ—¶å€™ï¼Œä¼šæŠŠæ–‡ä»¶è½¬æ¢æˆ base64 æ•°æ®ï¼Œç„¶åç¡¬ç¼–ç åˆ°ä»£ç é‡Œã€‚</p> <p>ä¸ºä»€ä¹ˆè¦è½¬æ¢æˆ base64 æ•°æ®ç¡¬ç¼–ç è¿›ä»£ç å‘¢ï¼Ÿä¸€æ–¹é¢ï¼Œç›´æ¥ç¡¬ç¼–ç è¿›ä»£ç å¯ä»¥å‡è½»åœ¨è¯»å–è¯¥éƒ¨åˆ†æ–‡ä»¶æ—¶çš„é¡µé¢é—ªçƒï¼Œæé«˜ç”¨æˆ·ä½“éªŒï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥å‡å°‘ç½‘ç»œè¯·æ±‚ï¼Œé™ä½æœåŠ¡å™¨å‹åŠ›ã€‚</p> <p>å¦‚æœ base64 æ•°æ®å¤ªå¤šå¤ªå¤§ï¼ŒåŠ è½½ç½‘é¡µçš„é€Ÿåº¦ä¾æ—§ä¼šå˜æ…¢ï¼Œæ‰€ä»¥ä¸æ˜¯æ‰€æœ‰æ–‡ä»¶éƒ½é€‚å®œè½¬æ¢æˆ base64 æ•°æ®ã€‚</p> <p>ä¸‹é¢æ¥æ¼”ç¤ºå¦‚ä½•åŠ å…¥å’Œä½¿ç”¨è¿™ä¸¤ä¸ª <code>loader</code>ã€‚é¦–å…ˆè¿˜æ˜¯å®‰è£…ä¾èµ–ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i file-loader@~6.2.0 -D
<span class="token function">npm</span> i url-loader@~4.1.1 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token comment">// æŒ‡å®š loader</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// å›¾ç‰‡æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// ä½¿ç”¨ url-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 2 MB ä¸Šé™</span>
              limit<span class="token operator">:</span> <span class="token number">2097152</span><span class="token punctuation">,</span>
              <span class="token comment">// æ”¾è¿› ${output.path}/img æ–‡ä»¶å¤¹é‡Œ</span>
              outputPath<span class="token operator">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span>
              <span class="token comment">// ä½¿ç”¨ ${output.path}/img æ–‡ä»¶å¤¹é‡Œçš„å›¾ç‰‡</span>
              publicPath<span class="token operator">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// å­—ä½“æ–‡ä»¶</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// ä½¿ç”¨ url-loader å¤„ç†</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              limit<span class="token operator">:</span> <span class="token number">2097152</span><span class="token punctuation">,</span>
              outputPath<span class="token operator">:</span> <span class="token string">'fonts'</span><span class="token punctuation">,</span>
              publicPath<span class="token operator">:</span> <span class="token string">'fonts'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><ul><li>æŒ‡å®š <code>limit: 2097152</code> åï¼Œè¶…è¿‡ 2 MB æ—¶ï¼Œ<code>url-loader</code> ä¼šè‡ªåŠ¨é™çº§æˆ <code>file-loader</code>ã€‚åœ¨å®é™…åº”ç”¨é‡Œå¯ä»¥è‡ªè¡Œè°ƒæ•´è¿™ä¸ªé™åˆ¶ã€‚</li> <li><code>outputPath</code> å’Œ <code>publicPath</code> æ˜¯å’Œé¡¹ç›®ä¸­é…ç½®çš„è¾“å‡ºè·¯å¾„ <code>output.path</code> ç›¸å…³çš„ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®é‡Œï¼Œä¹Ÿå°±æ˜¯å’Œ <code>${PROJECT_DIR}/dist</code> ç›¸å…³ã€‚åƒä¸Šé¢çš„é…ç½®ï¼Œæœ€ç»ˆæ„å»ºç»“æœæ˜¯å›¾ç‰‡æ”¾è¿›äº† <code>${PROJECT_DIR}/dist/img</code> é‡Œï¼Œè€Œå­—ä½“æ”¾è¿›äº† <code>${PROJECT_DIR}/dist/fonts</code> é‡Œï¼Œä½¿ç”¨èµ„äº§çš„æ—¶å€™ä»£ç ä¼šè‡ªåŠ¨åˆ°å¯¹åº”çš„æ–‡ä»¶å¤¹é‡Œè·å–ã€‚</li> <li>æŠŠå›¾ç‰‡å’Œå­—ä½“æ”¾å…¥å„è‡ªçš„æ–‡ä»¶å¤¹ä¸­ï¼Œä¸»è¦ç›®çš„æ˜¯åŒºåˆ†å¼€ä¸åŒç±»å‹çš„æ–‡ä»¶ï¼Œé¿å…æ‰€æœ‰æ–‡ä»¶éƒ½ç›´æ¥æ”¾åœ¨ <code>${PROJECT_DIR}/dist</code>ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æŠŠå›¾ç‰‡ã€å­—ä½“ç­‰éƒ½æ”¾å…¥åˆ° <code>${PROJECT_DIR}/dist/assets</code> é‡Œï¼Œåªéœ€è¦æ³¨æ„ä¿®æ”¹ <code>outputPath</code> å’Œ <code>publicPath</code> å³å¯ã€‚</li></ul> <p>æ”¾ä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶åœ¨ <code>${PROJECT_DIR}/src/assets</code> é‡Œé¢ï¼ˆæˆ‘è¿™é‡Œæ”¾äº† <code>webpack.png</code>ï¼‰ï¼Œç„¶ååœ¨ <code>${PROJECT_DIR}/src/App.jsx</code> é‡Œå¼•å…¥ã€ä½¿ç”¨å®ƒã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/src/App.jsx</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  LayoutRow <span class="token keyword">as</span> Row<span class="token punctuation">,</span>
  LayoutCol <span class="token keyword">as</span> Col<span class="token punctuation">,</span>
  LayoutGrid <span class="token keyword">as</span> Grid<span class="token punctuation">,</span>
  Button<span class="token punctuation">,</span>
  Icon<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'zent'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> iconWebpack <span class="token keyword">from</span> <span class="token string">'./assets/webpack.png'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./App.scss'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello World!'</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Grid<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Row<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Col span<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">24</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>img className<span class="token operator">=</span><span class="token string">&quot;icon&quot;</span> src<span class="token operator">=</span><span class="token punctuation">{</span>iconWebpack<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">&quot;youzan&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            Hello Zent<span class="token operator">!</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Col<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Row<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">// ${PROJECT_DIR}/src/App.scss</span>
<span class="token selector">.icon </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
  <span class="token property">margin-right</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
  <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ”¾ä¸€ä¸ªå­—ä½“æ–‡ä»¶åœ¨ <code>${PROJECT_DIR}/src/assets</code> é‡Œé¢ï¼ˆæˆ‘è¿™é‡Œæ”¾å…¥äº†é˜¿é‡Œæ™®æƒ ä½“çš„å­—ä½“æ–‡ä»¶ <code>Alibaba-PuHuiTi-Regular.ttf</code>ï¼‰ï¼Œç„¶ååœ¨ <code>${PROJECT_DIR}/src/index.scss</code> é‡Œå¼•å…¥ã€ä½¿ç”¨å®ƒã€‚</p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">// ${PROJECT_DIR}/src/index.scss</span>
<span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&quot;Alibaba PuHuiTi&quot;</span><span class="token punctuation">;</span>
  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url">url</span><span class="token punctuation">(</span><span class="token string">&quot;./assets/Alibaba-PuHuiTi-Regular.ttf&quot;</span><span class="token punctuation">)</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;ttf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">*,
::before,
::after </span><span class="token punctuation">{</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">html,
body </span><span class="token punctuation">{</span>
  <span class="token property">min-width</span><span class="token punctuation">:</span> 1280px<span class="token punctuation">;</span>
  <span class="token property">min-height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&quot;Alibaba PuHuiTi&quot;</span><span class="token punctuation">,</span> -apple-system<span class="token punctuation">,</span> BlinkMacSystemFont<span class="token punctuation">,</span> <span class="token string">&quot;Segoe UI&quot;</span><span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> <span class="token string">&quot;Helvetica Neue&quot;</span><span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> <span class="token string">&quot;PingFang SC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hiragino Sans GB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Microsoft YaHei&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å¾®è½¯é›…é»‘&quot;</span><span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> <span class="token string">&quot;Noto Sans&quot;</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">,</span> <span class="token string">&quot;Apple Color Emoji&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Segoe UI Emoji&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Segoe UI Symbol&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Noto Color Emoji&quot;</span><span class="token punctuation">;</span>
  <span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased<span class="token punctuation">;</span>
  <span class="token property">-moz-osx-font-smoothing</span><span class="token punctuation">:</span> grayscale<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>é‡æ–°æ„å»ºï¼Œå¯ä»¥çœ‹åˆ° <code>${PROJECT_DIR}/dist</code> ç›®å½•ä¸‹å¤šå‡ºäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ <code>fonts</code>ï¼Œé‡Œé¢æ˜¯ä¸€ä¸ªå­—ä½“æ–‡ä»¶ï¼Œåå­—è¢«ä¿®æ”¹æˆä¸€ä¸²å­—ç¬¦ä¸²ï¼ˆä¹Ÿå°±æ˜¯æ–‡ä»¶æŒ‡çº¹ï¼Œåé¢ä¼šåšè¿›ä¸€æ­¥è§£é‡Šï¼‰ï¼Œè€Œå›¾ç‰‡æ–‡ä»¶è¢«ç¡¬ç¼–ç è¿›ä»£ç é‡Œã€‚æµ‹è¯•ä¸€åˆ‡æ­£å¸¸ã€‚</p> <p><code>url-loader</code> å’Œ <code>file-loader</code> åªä¼šå¤„ç† <code>.js</code> ä¸­å¼•ç”¨çš„å›¾ç‰‡ã€‚å¦‚æœéœ€è¦åœ¨ <code>.html</code> é‡Œå¼•ç”¨ï¼Œé‚£å°±éœ€è¦ä½¿ç”¨ <code>html-loader</code> å¤„ç†ï¼›å¦‚æœéœ€è¦åœ¨ <code>.vue</code> é‡Œå¼•ç”¨ï¼Œé‚£å°±éœ€è¦ä½¿ç”¨ <code>vue-loader</code> å¤„ç†ã€‚</p> <p>æˆ–è®¸ä½ è¿˜æƒ³äº†è§£ svg è¯¥å¦‚ä½•å¤„ç†ï¼Œä¸å¦¨è‡ªå·±å»æŸ¥æŸ¥èµ„æ–™ï¼Œäº²æ‰‹å®è·µä¸€ä¸‹ã€‚</p> <h3 id="å†çœ‹æ¨¡å¼-mode"><a href="#å†çœ‹æ¨¡å¼-mode" class="header-anchor">#</a> å†çœ‹æ¨¡å¼ mode</h3> <p>æŒ‡å®šä¸åŒçš„æ¨¡å¼ï¼Œ<code>webpack</code> ä¼šè‡ªåŠ¨å¯ç”¨ä¸åŒçš„ä¼˜åŒ–ã€‚é»˜è®¤æ¨¡å¼æ˜¯ <code>production</code>ï¼Œé»˜è®¤å–å€¼èŒƒå›´æ˜¯ <code>development</code>ï¼Œ<code>production</code> å’Œ <code>none</code>ã€‚</p> <p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¯ä¸€æ¬¡æŸ¥çœ‹ä»£ç æ•ˆæœï¼Œéƒ½è¦æ‰§è¡Œ <code>npm run build</code>ï¼Œç„¶åç”¨ <code>live server</code> æˆ– <code>serve</code> å¯åŠ¨ã€‚è¿™ç›¸å½“éº»çƒ¦ï¼Œå°¤å…¶æ˜¯å¼€å‘çš„æ—¶å€™ï¼Œè¿™ä¹ˆåšä¼šè€—è´¹å¾ˆå¤šæ—¶é—´ï¼Œè€Œä¸”å¼€å‘æ—¶ä¹Ÿä¸åº”è¯¥ä½¿ç”¨ <code>production</code> æ¨¡å¼ï¼Œè€Œåº”è¯¥ä½¿ç”¨ <code>development</code> æ¨¡å¼ã€‚</p> <p><code>webpack-dev-server</code> å¸®æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä½¿ç”¨ <code>webpack-dev-server</code> å¯ä»¥ä¸åˆ·æ–°æµè§ˆå™¨å°±çœ‹åˆ°æˆ‘ä»¬å¼€å‘çš„æ—¶å€™ä¿®æ”¹ä»£ç åçš„ç»“æœï¼ˆè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„çƒ­æ›´æ–°ï¼‰ï¼Œä¹Ÿä¸ä¼šç”Ÿæˆæ–‡ä»¶æ”¾åˆ° <code>dist</code> ç›®å½•ä¸‹ã€‚å®é™…ä¸Šï¼Œç”Ÿæˆæ–‡ä»¶ä¼šè¢«æ”¾åˆ°å†…å­˜é‡Œã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i cross-env@~7.0.3 -D
<span class="token function">npm</span> i webpack-dev-server@~3.11.2 -D
<span class="token function">npm</span> i webpack-merge@~5.7.3 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æˆ‘ä»¬è¿˜è¦æ ¹æ®ç¯å¢ƒæ¥ä½¿ç”¨ä¸åŒçš„æ„å»ºé…ç½®ã€‚åŸºäºå¯ç»´æŠ¤æ€§è€ƒè™‘ï¼Œæˆ‘ä»¬åº”è¯¥æ‹†åˆ†å‡ºä¸åŒç¯å¢ƒçš„æ„å»ºé…ç½®æ–‡ä»¶ï¼Œæœ€ç»ˆæ ¹æ®ç¯å¢ƒæš´éœ²å‡ºå¯¹åº”ç¯å¢ƒçš„æ„å»ºé…ç½®ã€‚</p> <p>é¦–å…ˆä¿®æ”¹<code>package.json</code>ã€‚</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...<span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=development webpack serve --config ./config/webpack.config.js --progress&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=production webpack --config ./config/webpack.config.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><code>cross-env</code> å¯ä»¥ä¿®æ”¹ <code>process.env.NODE_ENV</code> çš„å€¼ï¼Œè¿›è€Œä¾›æˆ‘ä»¬ç¡®è®¤ç¯å¢ƒã€‚</li> <li><code>webpack serve</code> ä¼šè‡ªåŠ¨è°ƒç”¨ <code>webpack-dev-server</code>ã€‚</li></ul> <p>æ¥ç€ï¼Œæˆ‘ä»¬æŠŠåŸæœ¬ <code>${PROJECT_DIR}/config/webpack.config.js</code> ä¸­é™¤ <code>mode</code> ä¹‹å¤–çš„å†…å®¹æŠ½ç¦»å‡ºæ¥ï¼Œæ”¾åˆ° <code>${PROJECT_DIR}/config/webpack.base.js</code> é‡Œã€‚è¿™éƒ¨åˆ†å†…å®¹ä½œä¸ºåŸºç¡€é…ç½®ï¼Œä¼šè¢«æ‰€æœ‰ç¯å¢ƒçš„é…ç½®æ‰€å¼•ç”¨ã€‚</p> <p>å†æ–°å»ºä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œå†…å®¹åˆ—å†™åœ¨ä¸‹é¢ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.dev.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    quiet<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">'eval-cheap-source-map'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><code>devServer.hot = true</code> è¡¨ç¤ºå¼€å¯ <code>webpack-dev-server</code> çš„çƒ­æ›´æ–°ã€‚</li> <li><code>devServer.quiet = true</code> è¡¨ç¤ºå‡å°‘æ„å»ºè¾“å‡ºçš„ä¿¡æ¯æ˜¾ç¤ºã€‚</li> <li><code>devtool</code> å¯ä»¥ç¡®å®šé”™è¯¯å¯¹åº”çš„ä»£ç ï¼Œèƒ½å¸®åŠ©è°ƒè¯•ï¼Œè¿™é‡ŒæŒ‡å®šä¸º <code>source-map</code>ã€‚</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æœ€åä¿®æ”¹ <code>${PROJECT_DIR}/config/webpack.config.js</code>ï¼Œè®©å®ƒåœ¨ä¸åŒç¯å¢ƒæš´éœ²ä¸åŒçš„æ„å»ºé…ç½®ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.dev.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.prod.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>ä½¿ç”¨ <code>webpack-merge</code> ç»„åˆåŸºæœ¬é…ç½®å’Œç‰¹å®šç¯å¢ƒé…ç½®ã€‚</li></ul> <p>æœ€ååˆ†åˆ«æ‰§è¡Œ <code>npm run dev</code> å’Œ <code>npm run build</code> åšæµ‹è¯•ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚ä¸‹é¢æ˜¯æœ€ç»ˆé¡¹ç›®ç›®å½•ï¼ˆçœç•¥äº† <code>node_modules</code>ï¼‰ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">.</span>
â”œâ”€â”€ babel.config.json
â”œâ”€â”€ config
â”‚   â”œâ”€â”€ webpack.base.js
â”‚   â”œâ”€â”€ webpack.config.js
â”‚   â”œâ”€â”€ webpack.dev.js
â”‚   â””â”€â”€ webpack.prod.js
â”œâ”€â”€ dist
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ app.js.map
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ fonts
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ report.html
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ postcss.config.js
â”œâ”€â”€ public
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ index.html
â””â”€â”€ src
    â”œâ”€â”€ assets
    â”œâ”€â”€ App.jsx
    â”œâ”€â”€ App.scss
    â”œâ”€â”€ index.js
    â””â”€â”€ index.scss
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>å¯¹äº<code>react</code>ï¼Œè¿˜å¯ä»¥åŠ å…¥<code>react-hot-loader</code>è¿›ä¸€æ­¥æå‡ä½¿ç”¨ä½“éªŒã€‚æœ‰å…´è¶£å¯ä»¥æŸ¥é˜…ç›¸å…³èµ„æ–™å­¦ä¹ ã€‚</p> <p>ğŸ‰æ­å–œï¼Œä½ çš„ç¬¬äºŒä¸ª webpack demo å·²ç»å®Œæˆå•¦ï½</p> <p>å‚è€ƒæºä»£ç è§ <a href="https://github.com/ModyQyW/webpack4-demos/tree/master/demo02" target="_blank" rel="noopener noreferrer">modyqyw/webpack-demos/demo02<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <h2 id="demo03-ä¼˜åŒ–"><a href="#demo03-ä¼˜åŒ–" class="header-anchor">#</a> demo03 - ä¼˜åŒ–</h2> <h3 id="ä½¿ç”¨æ–‡ä»¶æŒ‡çº¹åšç‰ˆæœ¬ç®¡ç†"><a href="#ä½¿ç”¨æ–‡ä»¶æŒ‡çº¹åšç‰ˆæœ¬ç®¡ç†" class="header-anchor">#</a> ä½¿ç”¨æ–‡ä»¶æŒ‡çº¹åšç‰ˆæœ¬ç®¡ç†</h3> <p>äººçš„æŒ‡çº¹æ˜¯ç‰¹æ®Šçš„ï¼Œä¸å­˜åœ¨å®Œå…¨ç›¸åŒçš„äººçš„æŒ‡çº¹ï¼Œæ‰€ä»¥ä¾é äººçš„æŒ‡çº¹å¯ä»¥ç¡®å®šå”¯ä¸€çš„äººã€‚æ–‡ä»¶æŒ‡çº¹çš„ç”¨é€”å’Œäººçš„æŒ‡çº¹ç›¸è¿‘ï¼Œå¯ä»¥ç”¨æ¥ç¡®å®šæ–‡ä»¶æœ‰æ²¡æœ‰æ”¹å˜ï¼Œæ–¹ä¾¿åšç‰ˆæœ¬ç®¡ç†ã€‚</p> <p>å¸¸ç”¨çš„æ–‡ä»¶æŒ‡çº¹æœ‰ä¸‰ç±»ã€‚</p> <ul><li><code>hash</code> - å’Œæ•´ä¸ªé¡¹ç›®çš„æ„å»ºæœ‰å…³ï¼Œåªè¦é¡¹ç›®é‡Œæœ‰æ–‡ä»¶è¢«ä¿®æ”¹ï¼Œå€¼å°±ä¼šæœ‰å˜åŒ–ã€‚ç‰¹åˆ«åœ°ï¼Œå¯¹äºå›¾ç‰‡ã€å­—ä½“è¿™äº›èµ„äº§æ–‡ä»¶ï¼Œ<code>hash</code> å’Œæ•´ä¸ªé¡¹ç›®çš„æ„å»ºæ— å…³ï¼Œè€Œæ˜¯å’Œæ–‡ä»¶å†…å®¹ç›¸å…³ã€‚ä¸€èˆ¬åªä¼šåœ¨èµ„äº§æ–‡ä»¶ä¸Šä½¿ç”¨ã€‚</li> <li><code>chunkhash</code> - æ ¹æ®ä¸åŒçš„ <code>chunk</code> ç”Ÿæˆ <code>hash</code>ã€‚é€šå¸¸ä¼šæŠŠä¾èµ–åº“å’Œä¸šåŠ¡ä»£ç åˆ†åˆ«æŠ½ç¦»å‡ºå¯¹åº”çš„ <code>chunk</code>ï¼Œç„¶åä½¿ç”¨ <code>chunkhash</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€èˆ¬å¯¹ <code>.js</code> æ–‡ä»¶ä½¿ç”¨ <code>chunkhash</code>ã€‚</li> <li><code>contenthash</code> - æ ¹æ®æ–‡ä»¶å†…å®¹ç”Ÿæˆ <code>hash</code>ã€‚<code>.js</code> æ–‡ä»¶å¸¸å¸¸ä¼šå¼•ç”¨ <code>.css</code> æ–‡ä»¶ï¼Œå¦‚æœä½¿ç”¨ <code>chunkhash</code>ï¼Œå°±ä¼šå¯¼è‡´ä¿®æ”¹ <code>.js</code> æ–‡ä»¶ã€æ²¡æœ‰ä¿®æ”¹ <code>.css</code> æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œ<code>.css</code> æ–‡ä»¶çš„ <code>hash</code> ä¹Ÿå˜åŒ–äº†ï¼Œè¿™ä¸å¤ªç¬¦åˆå·¥ç¨‹è¦æ±‚ï¼Œæ‰€ä»¥ <code>.css</code> æ–‡ä»¶ä¸€èˆ¬ä½¿ç”¨ <code>contenthash</code>ã€‚èµ„äº§æ–‡ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>contenthash</code>ã€‚</li></ul> <p>æˆ‘ä»¬å…ˆæ¥ä¿®æ”¹ <code>${PROJECT_DIR}/config/webpack.base.js</code>ï¼Œä¸ºå›¾ç‰‡å’Œå­—ä½“æ·»åŠ æ–‡ä»¶æŒ‡çº¹ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.base.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token operator">...</span><span class="token punctuation">,</span>
              name<span class="token operator">:</span> <span class="token string">'[name].[contenthash:8].[ext]'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token operator">...</span><span class="token punctuation">,</span>
              name<span class="token operator">:</span> <span class="token string">'[name].[contenthash:8].[ext]'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><ul><li><code>[name]</code> è¡¨ç¤ºä½¿ç”¨æ–‡ä»¶æœ¬èº«çš„å‘½åã€‚</li> <li><code>[contenthash:8]</code> è¡¨ç¤ºä½¿ç”¨ <code>contenthash</code> çš„å‰ 8 ä½ï¼Œä¹Ÿå¯ä»¥å†™æˆ <code>[hash:8]</code>ï¼Œç»“æœä¼šæ˜¯ä¸€æ ·çš„ï¼Œè¿™æ˜¯å› ä¸º <code>url-loader</code> å’Œ <code>file-loader</code> å°†ä¼šä»¥åŒæ ·çš„æ–¹å¼å¤„ç† <code>contenthash</code> å’Œ <code>hash</code>ï¼Œè¿™æ˜¯æ–‡ä»¶æŒ‡çº¹çš„ç‰¹ä¾‹ã€‚</li> <li><code>[ext]</code> è¡¨ç¤ºä½¿ç”¨æ–‡ä»¶æœ¬èº«çš„åç¼€ã€‚</li></ul> <p>è€Œè¦åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ä¸º <code>.css</code> æ–‡ä»¶æ·»åŠ æ–‡ä»¶æŒ‡çº¹ï¼Œå°±ä¸èƒ½ä½¿ç”¨ <code>style-loader</code>ã€‚<code>style-loader</code> ä¼šæŠŠ <code>.css</code> æ–‡ä»¶åµŒå…¥åˆ° <code>.js</code> æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æ— æ³•å¾—åˆ°å•ç‹¬çš„ <code>.css</code> æ–‡ä»¶ï¼Œè‡ªç„¶ä¹Ÿå°±æ— æ³•æ·»åŠ æ–‡ä»¶æŒ‡çº¹äº†ã€‚</p> <p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ <code>mini-css-extract-plugin</code>ï¼Œå®ƒèƒ½åˆ†ç¦»å‡º <code>.css</code> æ–‡ä»¶è®©æˆ‘ä»¬æ·»åŠ æ–‡ä»¶æŒ‡çº¹ã€‚ä¸€èˆ¬åªä¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å®ƒï¼Œåœ¨å¼€å‘ç¯å¢ƒé‡Œï¼Œä»æ•ˆç‡è€ƒè™‘ï¼Œè¿˜æ˜¯ä¼šä½¿ç”¨ <code>style-loader</code>ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i mini-css-extract-plugin@~1.3.6 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æˆ‘ä»¬å†æŠŠ <code>${PROJECT_DIR}/config/webpack.base.js</code> é‡Œå…³äº css çš„éƒ¨åˆ†éƒ½æ”¾åˆ° <code>${PROJECT_DIR}/config/webpack.dev.js</code> é‡Œã€‚</p> <p>ç°åœ¨ï¼Œå®Œæ•´çš„ <code>${PROJECT_DIR}/config/webpack.base.js</code> åŒ…å«äº† <code>entry</code>ï¼Œ<code>plugin</code> å’Œ <code>loader</code>ã€‚å…¶ä¸­ï¼Œå›¾ç‰‡æ–‡ä»¶å’Œå­—ä½“æ–‡ä»¶çš„å¤„ç†éƒ½ä½¿ç”¨äº† <code>contenthash</code> çš„å‰ 8 ä½ã€‚</p> <p>æˆ‘ä»¬åªæ˜¯ç§»é™¤äº†å…¶ä¸­å…³äº css çš„éƒ¨åˆ†ï¼Œä¸‹é¢ç»™å‡ºå®Œæ•´çš„æ–‡ä»¶å†…å®¹ä¾›å‚è€ƒã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.base.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin<span class="token operator">:</span> CleanPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CopyPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> FriendlyErrorsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'friendly-errors-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">FriendlyErrorsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">,</span> <span class="token string">'favicon.ico'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'demo03'</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(node_modules|bower_components)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              limit<span class="token operator">:</span> <span class="token number">8192</span><span class="token punctuation">,</span>
              outputPath<span class="token operator">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span>
              publicPath<span class="token operator">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span>
              name<span class="token operator">:</span> <span class="token string">'[name].[contenthash:8].[ext]'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              limit<span class="token operator">:</span> <span class="token number">8192</span><span class="token punctuation">,</span>
              outputPath<span class="token operator">:</span> <span class="token string">'fonts'</span><span class="token punctuation">,</span>
              publicPath<span class="token operator">:</span> <span class="token string">'fonts'</span><span class="token punctuation">,</span>
              name<span class="token operator">:</span> <span class="token string">'[name].[contenthash:8].[ext]'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><p>å®Œæ•´çš„ <code>${PROJECT_DIR}/config/webpack.dev.js</code> å†…å®¹ä¹Ÿæ”¾åœ¨ä¸‹é¢ã€‚é™¤å»åŸºæœ¬çš„é…ç½®å¤–ï¼Œè¿˜å£°æ˜äº† <code>mode</code>ï¼Œ<code>webpack-dev-server</code>ï¼Œ<code>devtool</code> å’Œ <code>loader</code>ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>style-loader</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.dev.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">'eval-cheap-source-map'</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'less-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s[ac]ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'resolve-url-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'sass-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><p>æˆ‘ä»¬å†æ¥ä¿®æ”¹ <code>${PROJECT_DIR}/config/webpack.prod.js</code>ï¼Œä¸ä½¿ç”¨ <code>style-loader</code> è€Œæ˜¯ä½¿ç”¨ <code>mini-css-extract-plugin</code>ã€‚</p> <p>é¦–å…ˆç”¨ <code>mini-css-extract-plugin</code> é™„å¸¦çš„ <code>loader</code> æ›¿æ¢æ‰åŸæœ¬ä½¿ç”¨çš„ <code>style-loader</code>ã€‚æˆ‘ä»¬è¿˜è¦æŒ‡å®š <code>publicPath</code>ï¼Œä¹Ÿå°±æ˜¯æŒ‡å®šä»£ç ä½¿ç”¨çš„ <code>.css</code> æ–‡ä»¶æ‰€åœ¨çš„ç›¸å¯¹äº <code>output.path</code> çš„æ–‡ä»¶å¤¹ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
<span class="token operator">...</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token operator">:</span> <span class="token string">'css'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token operator">:</span> <span class="token string">'css'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'less-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s[ac]ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token operator">:</span> <span class="token string">'css'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'resolve-url-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'sass-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><ul><li><code>publicPath: 'css'</code> è¡¨ç¤ºè¦ä½¿ç”¨ <code>${output.path}/css</code> é‡Œçš„ <code>.css</code> æ–‡ä»¶ã€‚</li></ul> <p>æ¥ç€ï¼ŒæŠŠ <code>mini-css-extract-plugin</code> åŠ åˆ° <code>plugins</code> é‡Œï¼ŒæŒ‡å®šè¾“å‡ºæ–‡ä»¶åã€‚åœ¨å‰é¢æˆ‘ä»¬å·²ç»æŒ‡å®šè¦ä½¿ç”¨ <code>${output.path}/css</code> æ–‡ä»¶å¤¹é‡Œçš„ <code>.css</code> æ–‡ä»¶ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦æŠŠæ–‡ä»¶å¤¹åä¹Ÿæ·»åŠ ä¸Šå»ï¼Œè®© <code>.css</code> æ–‡ä»¶è¾“å‡ºåˆ° <code>${output.path}/css</code> ç›®å½•ä¸‹ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
<span class="token operator">...</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'css/[name].[contenthash:8].css'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>è€Œè¦ä¸º <code>entry</code> å¯¹åº”çš„è¾“å‡ºæ–‡ä»¶æ·»åŠ æ–‡ä»¶æŒ‡çº¹éå¸¸ç®€å•ï¼Œåªéœ€è¦ç›´æ¥ä½¿ç”¨ <code>chunkhash</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].[chunkhash:8].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>å®Œæ•´çš„ <code>${PROJECT_DIR}/config/webpack.prod.js</code> å¦‚ä¸‹æ‰€ç¤ºã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].[chunkhash:8].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'css/[name].[contenthash:8].css'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token operator">:</span> <span class="token string">'css'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token operator">:</span> <span class="token string">'css'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'less-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s[ac]ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token operator">:</span> <span class="token string">'css'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'resolve-url-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">'sass-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><p>å…¶ä»–æ–‡ä»¶çš„å¤„ç†ä¹Ÿå¯ä»¥å‚è€ƒä»¥ä¸Šåšæ³•ã€‚</p> <h3 id="ç§»é™¤-js-ä¸­çš„æ³¨é‡Šä»¥å‹ç¼©-js"><a href="#ç§»é™¤-js-ä¸­çš„æ³¨é‡Šä»¥å‹ç¼©-js" class="header-anchor">#</a> ç§»é™¤ js ä¸­çš„æ³¨é‡Šä»¥å‹ç¼© js</h3> <p>å¦‚æœæˆ‘ä»¬å®Œæˆä¹‹åæ‰“å¼€ <code>${PROJECT_DIR}/dist/js/app.[chunkhash:8].js</code>ï¼Œå°±ä¼šå‘ç°å¤§é‡ js ä»£ç å †å åˆ°ä¸€èµ·ï¼Œè¿™æ˜¯æ­£å¸¸çš„å‹ç¼©ç°è±¡ã€‚ä½†æ˜¯ï¼Œæ–‡ä»¶é‡Œè¿˜æœ‰ä¸€äº›æ³¨é‡Šï¼Œè¿™æ˜¯ç”Ÿäº§ç¯å¢ƒä¸éœ€è¦çš„ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨é…ç½®æ¥å»é™¤è¿™äº›æ³¨é‡Šï¼Œè¿›ä¸€æ­¥åœ°å‹ç¼© <code>.js</code> æ–‡ä»¶ã€‚</p> <p><code>webpack</code> é»˜è®¤åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨ <code>terser-webpack-plugin</code> æ¥å‹ç¼© <code>.js</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦åšè¿›ä¸€æ­¥çš„é…ç½®å³å¯ã€‚</p> <p>è™½ç„¶å®‰è£… <code>webpack</code> ä¾èµ–çš„æ—¶å€™ä¼šè‡ªåŠ¨å®‰è£…è¯¥ä¾èµ–ï¼Œä½†æ˜¯æˆ‘ä»¬é€šå¸¸ä¼šæ˜¾å¼å®‰è£…æˆ‘ä»¬æ‰€éœ€è¦çš„ä¾èµ–å¹¶æŒ‡å®šç‰ˆæœ¬ï¼Œé¿å…ç‰ˆæœ¬ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i terser-webpack-plugin@~4.2.3 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æˆ‘ä»¬ä¸æ˜¯ä»å¤´é…ç½® <code>terser-webpack-plugin</code>ï¼Œè€Œæ˜¯ä¿®æ”¹ <code>webpack</code> åŸæœ¬çš„ <code>terser-webpack-plugin</code> é…ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯åœ¨ <code>optimization</code> å­—æ®µä¸­ï¼ˆè€Œä¸æ˜¯åœ¨ <code>plugins</code> å­—æ®µä¸­ï¼‰ä½¿ç”¨ <code>terser-webpack-plugin</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
<span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'terser-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          output<span class="token operator">:</span> <span class="token punctuation">{</span>
            comments<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        extractComments<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li><code>extractComments: false</code> è¡¨ç¤ºä¸éœ€è¦æŠŠæ³¨é‡Šåˆ†ç¦»åˆ°å•ç‹¬çš„æ–‡ä»¶é‡Œã€‚</li> <li><code>terserOptions.output.comments: false</code> è¡¨ç¤ºæœ€ç»ˆè¾“å‡ºçœç•¥æ³¨é‡Šã€‚</li></ul> <p>è¿™ä¸ªé…ç½®ä¹Ÿæ˜¯ <code>terser-webpack-plugin</code> æ–‡æ¡£ä¸­æä¾›çš„ä¾‹å­ã€‚</p> <h3 id="å‹ç¼©-html"><a href="#å‹ç¼©-html" class="header-anchor">#</a> å‹ç¼© html</h3> <p>è¦å‹ç¼© <code>.html</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¹‹å‰ç”¨åˆ°çš„ <code>html-webpack-plugin</code>ã€‚é™¤äº†æˆ‘ä»¬ä¹‹å‰ç”¨åˆ°çš„æŒ‡å®šæ¨¡æ¿çš„åŠŸèƒ½ï¼Œå®ƒè¿˜æœ‰å‹ç¼© html çš„åŠŸèƒ½ï¼Œè€Œä¸”æ˜¯é»˜è®¤å¼€å¯çš„ã€‚</p> <p>å¦‚æœæˆ‘ä»¬éœ€è¦ä¿®æ”¹ <code>html-webpack-plugin</code> çš„å‹ç¼©é€‰é¡¹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸º <code>${PROJECT_DIR}/config/webpack.base.js</code> ä¸­çš„ <code>html-webpack-plugin</code> çš„é…ç½®æ·»åŠ ä¸€ä¸ª <code>minify</code> å­—æ®µï¼Œç„¶åå†™å…¥è‡ªå·±çš„é…ç½®å³å¯ã€‚</p> <p>ä¸‹é¢æ˜¯é»˜è®¤çš„ <code>html-webpack-plugin</code> çš„å‹ç¼©é€‰é¡¹ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'demo03'</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeRedundantAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeScriptTypeAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeStyleLinkTypeAttributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        useShortDoctype<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li><code>collapseWhitespace: true</code> è¡¨ç¤ºå‡å°‘ html ä¸­ä¸å¿…è¦çš„ç©ºç™½ã€‚</li> <li><code>removeComments: true</code> è¡¨ç¤ºç§»é™¤ html ä¸­çš„æ³¨é‡Šã€‚</li> <li><code>removeRedundantAttributes: true</code> è¡¨ç¤ºç§»é™¤æ ‡ç­¾ä¸Šä½¿ç”¨äº†é»˜è®¤å€¼çš„å±æ€§ï¼Œæ¯”å¦‚ <code>&lt;input type=&quot;text&quot; /&gt;</code>ï¼Œå¯ä»¥ç§»é™¤ <code>type=&quot;text&quot;</code>ã€‚</li> <li><code>removeScriptTypeAttributes: true</code> è¡¨ç¤ºç§»é™¤ <code>&lt;script&gt;</code> æ ‡ç­¾ä¸Šçš„ <code>type=&quot;text/javascript&quot;</code>ã€‚</li> <li><code>removeStyleLinkTypeAttributes: true</code> è¡¨ç¤ºç§»é™¤ <code>&lt;style&gt;</code> å’Œ <code>&lt;link&gt;</code> æ ‡ç­¾ä¸Šçš„ <code>type=&quot;text/css&quot;</code>ã€‚</li> <li><code>useShortDoctype: true</code> è¡¨ç¤ºä½¿ç”¨è¾ƒçŸ­çš„ html æ ¼å¼å£°æ˜ã€‚</li></ul> <p>ä¸€èˆ¬ä¸éœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œå¦‚æœæœ‰è¿™æ–¹é¢éœ€æ±‚ï¼Œå¯ä»¥ç¿»çœ‹æ–‡æ¡£å†åšä¿®æ”¹ã€‚å†™å…¥çš„è‡ªå·±çš„é…ç½®ä¸ä¼šå’Œé»˜è®¤é…ç½®ç»„åˆä½¿ç”¨ï¼ˆé»˜è®¤é…ç½®ä¼šè¢«è¦†ç›–ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»ç¡®ä¿å†™å…¥çš„è‡ªå·±çš„é…ç½®æ˜¯å®Œæ•´çš„ã€‚</p> <h3 id="åŸºç¡€ä¾èµ–çš„å¤„ç†"><a href="#åŸºç¡€ä¾èµ–çš„å¤„ç†" class="header-anchor">#</a> åŸºç¡€ä¾èµ–çš„å¤„ç†</h3> <p>é¡¹ç›®å†…å¾€å¾€æœ‰ä¸€äº›æ¯”è¾ƒåŸºç¡€çš„ä¾èµ–ï¼Œæ¯”å¦‚ <code>react</code> å’Œ <code>react-dom</code>ã€‚é»˜è®¤åœ°ï¼Œ<code>webpack</code> ä¼šæŠŠè¿™äº›åŸºç¡€ä¾èµ–æ”¾å…¥ <code>entry</code> å¯¹åº”çš„è¾“å‡ºæ–‡ä»¶ä¸­ã€‚</p> <p>è¿™äº›åŸºç¡€ä¾èµ–å¾€å¾€æ¯”è¾ƒç¨³å®šï¼Œä¸ä¼šç»å¸¸æ›´æ–°ï¼Œå¦‚æœæ‰“åŒ…è¿› <code>entry</code> å¯¹åº”çš„è¾“å‡ºæ–‡ä»¶ï¼Œå°±ä¼šå‡ºç°ä¸šåŠ¡ä»£ç å˜åŒ–ã€åŸºç¡€ä¾èµ–æ²¡æœ‰å˜åŒ–ã€ä½†ç”¨æˆ·éœ€è¦é‡æ–°æ‹‰å–åŒ…å«äº†åŸºç¡€ä¾èµ–çš„ä»£ç çš„æƒ…å†µï¼Œè¿™ç›¸å½“ä¸åˆç†ã€‚</p> <p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¬å…± cdn æ¥åŠ è½½è¿™äº›ä¾èµ–ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜ã€‚é¦–å…ˆè¦åœ¨ <code>${PROJECT_DIR}/config/webpack.prod.js</code> é…ç½® <code>externals</code>ï¼Œå‘ <code>webpack</code> è¯´æ˜æ— éœ€æ·»åŠ åˆ°æ„å»ºåŒ…ä¸­çš„ä¾èµ–ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    react<span class="token operator">:</span> <span class="token string">'React'</span><span class="token punctuation">,</span>
    <span class="token string">'react-dom'</span><span class="token operator">:</span> <span class="token string">'ReactDOM'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>externals</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ objectï¼Œå®ƒçš„é”®å°±æ˜¯ <code>webpack</code> éœ€è¦æ’é™¤çš„ä¾èµ–åï¼Œç¨åæˆ‘ä»¬å†è¯´æ˜å¯¹åº”çš„å€¼ã€‚ä¸Šé¢çš„é…ç½®ä¼šè®© <code>webpack</code> æ„å»ºæ—¶æ’é™¤ <code>react</code> å’Œ <code>react-dom</code> ä¸¤ä¸ªä¾èµ–ï¼Œä¸æŠŠå®ƒä»¬åŠ å…¥åˆ°æœ€ç»ˆæ„å»ºåŒ…ä¸­ã€‚</p> <p>ä¹‹åï¼Œè¿˜éœ€è¦æ‰‹åŠ¨åŠ å…¥ <code>react</code> å’Œ <code>react-dom</code> çš„å…¬å…± cdn é“¾æ¥ï¼Œä½¿å¾—é¡¹ç›®èƒ½å¤Ÿä½¿ç”¨ <code>react</code> å’Œ <code>react-dom</code> è¿™ä¸¤ä¸ªä¾èµ–ï¼Œå¦åˆ™æ„å»ºåŒ…æ²¡åŠæ³•æ­£å¸¸è¿è¡Œã€‚</p> <p>è¿™é‡Œä½¿ç”¨äº† <a href="https://www.jsdelivr.com/" target="_blank" rel="noopener noreferrer">jsdelivr<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¿™ä¸ªå…¬å…± cdnï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://unpkg.com/" target="_blank" rel="noopener noreferrer">unpkg<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge,chrome=1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>favicon.ico<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/x-icon<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>demo03<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/react@17.0.1/umd/react.production.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/react-dom@17.0.1/umd/react-dom.production.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>å…¬å…± cdn é“¾æ¥æŒ‡å®šçš„ä¾èµ–ç‰ˆæœ¬ï¼Œè¦å’Œé¡¹ç›®å†…ä½¿ç”¨çš„ä¾èµ–ç‰ˆæœ¬ä¸€è‡´ï¼Œä¸ç„¶å¯èƒ½å¯¼è‡´å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„è¡¨ç°ä¸ä¸€è‡´ã€‚</li> <li><code>react</code> çš„ cdn é“¾æ¥ä¸­æš´éœ²äº† <code>React</code> è¿™ä¸ªå˜é‡ï¼Œè€Œ <code>react-dom</code> çš„ cdn é“¾æ¥ä¸­æš´éœ²äº† <code>ReactDOM</code> è¿™ä¸ªå˜é‡ï¼Œå¯¹åº”åœ°ï¼Œæˆ‘ä»¬è¦æŠŠè¿™ä¸¤ä¸ªå˜é‡æŒ‡å®šä¸ºå¯¹åº”é”®çš„å€¼ã€‚</li></ul> <p>æˆ‘ä»¬å°è¯•æ„å»ºä¸€ä¸‹ã€‚æœ€ç»ˆæ„å»ºçš„æ–‡ä»¶ä¸­ï¼Œæ²¡æœ‰ <code>react</code> å’Œ <code>react-dom</code> çš„å­˜åœ¨ã€‚è¿è¡Œæµ‹è¯•æ­£å¸¸ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å€ŸåŠ© <code>html-webpack-externals-plugin</code> æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼Œè¿™é‡Œä¸å†åšç›¸åº”çš„æ¼”ç¤ºï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹èµ„æ–™ã€‚</p> <p>ä½†æ˜¯æ›´å¤šæ—¶å€™ï¼Œæ¯”èµ·ç›¸ä¿¡å…¬å…± cdnï¼Œç›¸ä¿¡è‡ªå·±æ›´å¥½ã€‚ä¸ä½¿ç”¨å…¬å…± cdnï¼Œæˆ‘ä»¬å¯ä»¥è‡ªè¡ŒæŠŠè¿™äº›åŸºç¡€ä¾èµ–æŠ½ç¦»å‡ºæ¥ç»Ÿä¸€æ”¾ç½®ã€‚è¿™ä¹ˆåšè¦æ¯”ä½¿ç”¨å…¬å…± cdn æ›´å¥½ï¼Œæ— éœ€æ‰‹åŠ¨æŒ‡å®šã€æ›´æ–°å…¬å…± cdn çš„ä¾èµ–ç‰ˆæœ¬ï¼Œä¹Ÿæ— éœ€è€ƒè™‘å…¬å…± cdn çš„ç¨³å®šæ€§ã€‚</p> <p><code>webpack</code> å·²ç»å†…ç½®äº†è¿™éƒ¨åˆ†ä¼˜åŒ–ï¼Œä½†è¿˜éœ€è¦è¿›ä¸€æ­¥é…ç½®ã€‚æˆ‘ä»¬è¦åšçš„å°±æ˜¯é…ç½® <code>optimization.splitChunks</code>ï¼Œè®©è¿™éƒ¨åˆ†å†…ç½®çš„ä¼˜åŒ–æ›´ç´§è´´æˆ‘ä»¬çš„é¡¹ç›®ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>ä½¿ç”¨ <code>optimization.splitChunks</code>ï¼Œè¡¨ç¤ºæˆ‘ä»¬æƒ³è¦æ‰‹åŠ¨é…ç½®åœ°åˆ†ç¦» <code>chunk</code>ï¼Œè€Œè·¯å¾„å’Œåç§°ä¼šè·Ÿéš <code>output.path</code>ã€‚</li> <li>æŒ‡å®š <code>chunks: 'all'</code>ï¼Œè¡¨ç¤ºæˆ‘ä»¬æƒ³è¦æŠŠæ‰€æœ‰å¼•å…¥çš„åº“ä»å·²æœ‰çš„ä¸šåŠ¡ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ã€‚</li></ul> <p>å…·ä½“éœ€è¦æ€ä¹ˆåˆ†ç¦»å‘¢ï¼Ÿä¸€ä¸ªå¸¸è§çš„é…ç½®æ˜¯ï¼Œé¡¹ç›®å†…çš„ç»„ä»¶åº“å•ç‹¬æˆä¸€ä¸ª <code>chunk</code>ï¼Œç„¶å <code>node_modules</code> æ–‡ä»¶å¤¹å†…åŒæ­¥å¼•å…¥çš„å…¶ä»–ä¾èµ–å•ç‹¬æˆä¸€ä¸ª <code>chunk</code>ï¼Œæœ€åæ˜¯é¡¹ç›®å†…å°è£…çš„è‡ªå®šä¹‰ç»„ä»¶ï¼ˆä¹Ÿå°±æ˜¯é¡µé¢å…¬å…±ç»„ä»¶ï¼‰å•ç‹¬æˆä¸€ä¸ª <code>chunk</code>ã€‚</p> <p>æˆ‘ä»¬é€šè¿‡ <code>optimization.cacheGroups</code> æ¥é…ç½®ã€‚é¦–å…ˆæ˜¯é¡¹ç›®å†…çš„ç»„ä»¶åº“ <code>zent</code> å•ç‹¬æˆä¸€ä¸ª <code>chunk</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        zent<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'chunk-zent'</span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]_?zent(.*)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>æ¥ç€æ˜¯ <code>node_modules</code> æ–‡ä»¶å¤¹å†…åŒæ­¥å¼•å…¥çš„å…¶ä»–ä¾èµ–ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span><span class="token punctuation">,</span>
        vendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'chunk-vendors'</span><span class="token punctuation">,</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
          chunks<span class="token operator">:</span> <span class="token string">'initial'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li><code>vendors</code> çš„ <code>priority</code> è®¾ç½®å¾—æ¯” <code>zent</code> çš„ <code>priority</code> ä½ï¼Œå› æ­¤ï¼Œ<code>zent</code> ä¼šä¼˜å…ˆç”Ÿæˆä¸€ä¸ª <code>chunk</code>ï¼Œè€Œ <code>vendors</code> å¯¹åº”çš„ <code>chunk</code> ä¸ä¼šå†åŒ…å« <code>zent</code>ã€‚</li> <li>è®¾ç½® <code>vendors.chunks</code> ä¸º <code>initial</code>ï¼Œæ„å‘³ç€ <code>chunk-vendors</code> åªä¼šåŒ…å«ä»£ç ä¸­åŒæ­¥å¼•å…¥çš„éƒ¨åˆ†ï¼Œå¼‚æ­¥å¼•å…¥çš„éƒ¨åˆ†ä¼šåŠ å…¥åˆ° <code>${PROJECT_DIR}/dist/app.[chunkhash:8].js</code> ä¸­ã€‚</li></ul> <p>æœ€ååˆ™æ˜¯é¡µé¢å…¬å…±ç»„ä»¶ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span><span class="token punctuation">,</span>
        components<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'chunk-components'</span><span class="token punctuation">,</span>
          test<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'components'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          minChunks<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li><code>minChunks</code> è¡¨ç¤ºæœ€å°å¼•ç”¨æ¬¡æ•°ï¼Œè¿™é‡Œè®¾ç½®ä¸º 2ï¼Œå³ <code>chunk-components</code> å†…çš„ä»£ç éƒ½è¢«å…¶ä»– <code>.js</code> ä¸­çš„ä»£ç å¼•ç”¨è¿‡ 2 æ¬¡æˆ–ä»¥ä¸Šã€‚</li> <li><code>reuseExistingChunk: true</code> è¡¨ç¤ºå¦‚æœ <code>chunk-components</code> åŒ…å«äº†å·²ç»è¢«åˆ†ç¦»å‡ºæ¥çš„éƒ¨åˆ†ï¼ˆæŸäº›ä»£ç å·²ç»è¢«åˆ†è¿›äº†è‡ªå®šä¹‰ <code>chunk</code> ä¸­ï¼‰ï¼Œè¿™äº›éƒ¨åˆ†ä¼šè¢«å¤ç”¨è€Œä¸å†æ‰“åŒ…è¿› <code>chunk-components</code> ä¸­ã€‚</li></ul> <p>æˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸‹ï¼Œçœ‹çœ‹æ•ˆæœã€‚æŸ¥çœ‹æ„å»ºæ–‡ä»¶å¯ä»¥å‘ç°ï¼Œ<code>html-webpack-plugin</code> å·²ç»è‡ªåŠ¨å¼•å…¥äº†å„ä¸ª <code>chunk</code>ï¼Œæ— éœ€æˆ‘ä»¬æ“å¿ƒã€‚</p> <p>ä¸‹é¢æ˜¯æˆ‘åœ¨æ„å»ºåçš„æˆªå›¾ï¼ˆå¹¶éæœ€æ–°ç‰ˆæœ¬ï¼Œä»…ä¾›å‚è€ƒï¼‰ã€‚</p> <p><img src="https://ae01.alicdn.com/kf/U9cbdde6f3a1f4b728dcb3f9902ac9300C.jpg" alt="æœ‰ splitChunks æ„å»ºæ•ˆæœå›¾"></p> <ul><li>åˆ— <code>Asset</code> ç»™å‡ºäº†æ‰“åŒ…å‡ºæ¥çš„å„ä¸ªæ–‡ä»¶çš„ä½ç½®å’Œåç§°ã€‚</li> <li>åˆ— <code>Size</code> ç»™å‡ºäº†æ‰“åŒ…å‡ºæ¥çš„å„ä¸ªæ–‡ä»¶çš„å¤§å°ã€‚</li> <li>åˆ— <code>Chunks</code> å’Œ <code>Chunk Names</code> æ˜¯æˆ‘ä»¬æ‰€è¦å…³æ³¨çš„é‡ç‚¹ã€‚
<ul><li><code>Chunk Names</code> ä¸€å…±ä¸‰ä¸ªï¼š<code>app</code>ï¼Œ<code>chunk-zent</code> å’Œ <code>chunk-vendors</code>ã€‚</li> <li><code>app</code> å°±æ˜¯æˆ‘ä»¬è®¾ç½®çš„ <code>entry</code> é”®å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>entry</code> æœ¬èº«å°±ä¼šç”Ÿæˆä¸€ä¸ª <code>chunk</code>ã€‚</li> <li><code>chunk-zent</code> å’Œ <code>chunk-vendors</code> æ˜¯æˆ‘ä»¬é…ç½®åä» <code>chunk app</code> ä¸­åˆ†ç¦»å‡ºæ¥çš„ <code>chunk</code>ï¼Œä½ç½®å’Œå‘½åä¼šè·Ÿéš <code>output.filename</code>ï¼ˆä¹Ÿå°±æ˜¯ <code>${PROJECT_DIR}/dist/[name]:[chunkhash:8].js</code>ï¼‰ã€‚</li> <li><code>react</code> å’Œ <code>react-dom</code> å·²ç»è¢«åŠ å…¥åˆ° <code>chunk-vendors</code> ä¸­ã€‚</li> <li>æˆ‘ä»¬å¦‚æœä¿®æ”¹ <code>${PROJECT_DIR}/src/index.js</code>ï¼Œå°±ä¼šå‘ç°åªæœ‰ <code>app</code> å¯¹åº”çš„æ–‡ä»¶æŒ‡çº¹å‘ç”Ÿäº†å˜åŒ–ï¼Œè€Œ <code>chunk-zent</code> å’Œ <code>chunk-vendors</code> çš„æ–‡ä»¶æŒ‡çº¹æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚è¿™æ ·å°±ä½¿å¾—è¿™ä¸¤ä¸ªéƒ¨åˆ†èƒ½æœ‰æ•ˆåœ°ç¼“å­˜ï¼Œå‡å°‘è¯·æ±‚æ—¶é—´ã€‚</li> <li>æ²¡æœ‰ <code>chunk-components</code>ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ç›®å‰æ²¡æœ‰ä½¿ç”¨ä»»ä½•çš„é¡µé¢å…¬å…±ç»„ä»¶ã€‚</li></ul></li></ul> <p>æ²¡æœ‰ <code>splitChunks</code> çš„æ„å»ºåçš„æˆªå›¾å¦‚ä¸‹æ‰€ç¤ºã€‚</p> <p><img src="https://ae01.alicdn.com/kf/Uabea4a17c0224557bf1213cd32339ea01.jpg" alt="æ²¡æœ‰ splitChunks æ„å»ºæ•ˆæœå›¾"></p> <p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœä¸ä½¿ç”¨ <code>splitChunks</code>ï¼Œå‡ ä¹æ‰€æœ‰çš„ä»£ç éƒ½ä¼šæŒ¤åˆ° <code>app.[chunkhash:8].js</code> é‡Œï¼Œåœ¨æ¯”è¾ƒå¤§çš„é¡¹ç›®ä¸­ï¼Œæ–‡ä»¶å°±ä¼šå˜å¾—éå¸¸å¤§ã€‚å¦‚æœä¸æ›´æ–°åŸºç¡€åº“ï¼Œç”¨æˆ·å°±è¦è€—è´¹å¤§é‡æ—¶é—´åœ¨è·å–åŒ…å«äº†åŸºç¡€åº“ä»£ç çš„æ–‡ä»¶ä¸Šã€‚è€Œä½¿ç”¨äº† <code>splitChunks</code>ï¼Œåœ¨ä¸æ›´æ–°åŸºç¡€åº“çš„å‰æä¸‹ï¼Œç”¨æˆ·åªéœ€è¦è·å–åŒ…å«äº†æœ€æ–°ä¸šåŠ¡ä»£ç çš„ç›¸å…³æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯ <code>app</code> ç›¸å…³çš„æ–‡ä»¶ï¼‰ï¼Œç¼©çŸ­äº†è·å–çš„æ—¶é—´ã€‚</p> <p>ä½†ä½¿ç”¨äº† <code>splitChunks</code> åï¼Œå¦ä¸€ä¸ªé—®é¢˜ä¹Ÿæš´éœ²å‡ºæ¥äº†ï¼Œé‚£å°±æ˜¯æ‰€æœ‰ <code>.js</code> æ–‡ä»¶éƒ½æ”¾åˆ°äº† <code>${PROJECT_DIR}/dist</code> ç›®å½•ä¸‹ï¼Œè¿™å¹¶ä¸åˆ©äºç®¡ç†ã€‚</p> <p>å’Œå‰é¢å¯¹å­—ä½“ã€å›¾ç‰‡ã€<code>.css</code> æ–‡ä»¶çš„é…ç½®ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥è®© <code>.js</code> æ–‡ä»¶éƒ½æ”¾å…¥ç‰¹å®šçš„æ–‡ä»¶å¤¹ä¸­ã€‚æˆ‘ä»¬ä¿®æ”¹ <code>output.filename</code>ï¼Œä½¿å¾—æ‰€æœ‰çš„ <code>.js</code> æ–‡ä»¶éƒ½ä¼šæ”¾å…¥ <code>${PROJECT_DIR}/dist/js</code> æ–‡ä»¶å¤¹é‡Œã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'js/[name].[chunkhash:8].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="ä½¿ç”¨-gzip-æ–‡ä»¶"><a href="#ä½¿ç”¨-gzip-æ–‡ä»¶" class="header-anchor">#</a> ä½¿ç”¨ gzip æ–‡ä»¶</h3> <p>gzip æ˜¯ä¸€ç§æ•°æ®å‹ç¼©æ ¼å¼ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ç§æ–‡ä»¶æ ¼å¼ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…çš„æœ€åé˜¶æ®µï¼Œä¸ºç”Ÿæˆçš„æ–‡ä»¶ç”Ÿæˆå¯¹åº”çš„ <code>.gz</code> æ–‡ä»¶ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å‡å°æ–‡ä»¶ä½“ç§¯ï¼Œè®©æ”¯æŒ gzip çš„æµè§ˆå™¨æ›´å¿«åœ°åŠ è½½é¡µé¢ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i compression-webpack-plugin@~6.1.1 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç„¶åæˆ‘ä»¬åœ¨ <code>${PROJECT_DIR}/config/webpack.prod.js</code> é‡Œé…ç½®å®ƒã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
<span class="token operator">...</span>
<span class="token keyword">const</span> CompressionPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'compression-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(html|css|js|png|jpg|jpeg|gif|woff|woff2|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬é…ç½®äº† <code>compression-webpack-plugin</code> å»å¤„ç†ç”Ÿæˆçš„ <code>.html</code>ï¼Œ<code>.css</code>ï¼Œ<code>.js</code>ï¼Œ<code>.png</code> ç­‰æ–‡ä»¶ã€‚é»˜è®¤åœ°ï¼Œå®ƒä¼šä½¿ç”¨ gzip ç®—æ³•å»å‹ç¼©å¤„ç†ã€‚</p> <p>ä½† <code>compression-webpack-plugin</code> è¿˜æœ‰ä¸€ä¸ªé»˜è®¤çš„é™åˆ¶ï¼Œé‚£å°±æ˜¯å¦‚æœç”Ÿæˆçš„ <code>.gz</code> æ–‡ä»¶çš„å¤§å°ä¸èƒ½è¾¾åˆ°åŸæ–‡ä»¶çš„ 80% æˆ–ä»¥ä¸‹ï¼Œå°±ä¸ä¼šå»ç”Ÿæˆ<code>.gz</code>æ–‡ä»¶ã€‚è¿™æ˜¯ä¸ºäº†å‡å°‘ä¸å¿…è¦çš„å‹ç¼©ï¼Œæé«˜å¤„ç†é€Ÿåº¦ï¼Œåœ¨å¤§å‹é¡¹ç›®é‡Œæé«˜çš„é€Ÿåº¦å°¤ä¸ºæ˜æ˜¾ã€‚</p> <p>æˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸‹ï¼Œçœ‹çœ‹æ•ˆæœã€‚æŸ¥çœ‹æ„å»ºæ–‡ä»¶å¯ä»¥å‘ç°ï¼Œæ–‡ä»¶åŸºæœ¬éƒ½å‡ºç°äº†å¯¹åº”çš„ <code>.gz</code> æ–‡ä»¶ã€‚</p> <h3 id="ç¯å¢ƒå˜é‡å’Œæ¨¡å¼"><a href="#ç¯å¢ƒå˜é‡å’Œæ¨¡å¼" class="header-anchor">#</a> ç¯å¢ƒå˜é‡å’Œæ¨¡å¼</h3> <p>åœ¨å®é™…å¼€å‘çš„æ—¶å€™ï¼Œ<code>development</code> å’Œ <code>production</code> ä¸¤ä¸ªæ¨¡å¼è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬å¾€å¾€è¿˜éœ€è¦ç¬¬ä¸‰ä¸ªç”šè‡³ç¬¬å››ä¸ªæ¨¡å¼ï¼Œæ¯ä¸ªæ¨¡å¼å¯èƒ½è¿˜ä¼šæœ‰ä¸åŒçš„ç¯å¢ƒå˜é‡ï¼Œä½†é…ç½®åŸºæœ¬éƒ½æ˜¯ä½¿ç”¨ <code>development</code> æ¨¡å¼æˆ– <code>production</code> æ¨¡å¼çš„é…ç½®ã€‚</p> <p>é¦–å…ˆå®‰è£…ç›¸å…³çš„ä¾èµ–ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i dotenv@~8.2.0 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ¥ç€æ¥ä¿®æ”¹ä¸€ä¸‹ <code>${PROJECT_DIR}/config/webpack.config.js</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.dev.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.prod.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mode <span class="token operator">=</span> argv<span class="token punctuation">.</span>mode <span class="token operator">||</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

  process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">||</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'development'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> devConfig<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> prodConfig<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li>æŠŠ <code>module.exports</code> æ”¹å†™æˆå‡½æ•°å½¢å¼ï¼Œç¬¬ä¸€ä¸ªå‚æ•° <code>env</code> æ˜¯ <code>webpack</code> å‘½ä»¤é‡Œä½¿ç”¨ <code>--env</code> è®¾ç½®çš„å€¼ç»„æˆçš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ‰€æœ‰å‘½ä»¤å‚æ•°ç»„æˆçš„å¯¹è±¡ã€‚</li> <li>ä¸º <code>process.env.NODE_ENV</code> è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ <code>production</code>ã€‚</li> <li><code>env</code> å’Œ <code>process.env</code> æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œ<code>env</code> æ˜¯ <code>webpack</code> ç”Ÿæˆçš„ï¼Œè€Œ <code>process.env</code> æ˜¯ç”± node ç”Ÿæˆçš„ï¼Œå¯ä»¥åœ¨ <code>webpack</code> é…ç½®æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨ã€‚</li> <li>ä¸€èˆ¬åœ°ï¼Œæˆ‘ä»¬ç”¨ <code>process.env.NODE_ENV</code> æ¥æŒ‡å®šæ„å»ºæ¨¡å¼ï¼Œä¸€èˆ¬åªæœ‰ <code>development</code> å’Œ <code>production</code> ä¸¤ç§å–å€¼ã€‚</li></ul> <p>ç„¶åä¿®æ”¹ <code>${PROJECT_DIR}/package.json</code> é‡Œé¢çš„ <code>scripts</code>ã€‚éå¤æ‚æƒ…å†µä¸‹ï¼Œ<code>cross-env</code> å¯ä»¥ä¸å†ä½¿ç”¨ï¼Œå¤æ‚æƒ…å†µå¯ä»¥å‚è€ƒ uni-app å®˜æ–¹æ¨¡æ¿ï¼Œä¸ºäº†åœ¨ç»Ÿä¸€æ¨¡å¼ä¸‹æ„å»ºä¸åŒç«¯çš„ä»£ç ï¼Œéœ€è¦ç”¨åˆ° <code>cross-env</code> æ¥æŒ‡å®šä¸åŒç«¯çš„ <code>process.env.UNI_PLATFORM</code>ã€‚</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...<span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack serve --config ./config/webpack.config.js --progress --mode=development&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./config/webpack.config.js --mode=production&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><code>--mode=development</code> æŒ‡å®šäº† <code>argv.mode</code> å’Œ <code>process.env.NODE_ENV</code> ä¸º <code>development</code>ã€‚</li> <li><code>--mode=production</code> æŒ‡å®šäº† <code>argv.mode</code> å’Œ <code>process.env.NODE_ENV</code> ä¸º <code>production</code>ã€‚</li> <li>è¿™é‡Œçš„ <code>mode</code> ä»…ç”¨äºæŒ‡å®šæ¨¡å¼ï¼Œä»¥è¯»å–å¯¹åº”çš„ç¯å¢ƒå˜é‡ã€‚</li></ul> <p>æˆ‘ä»¬å†æ¥ä¸ºå·²æœ‰çš„ä¸¤ç§æ¨¡å¼æ·»åŠ ç¯å¢ƒå˜é‡ã€‚ä¸€èˆ¬å¯¹äºç¯å¢ƒå˜é‡æœ‰ä»¥ä¸‹çš„çº¦å®šï¼Œå†…å®¹ä¼˜å…ˆçº§ä¾æ¬¡é€’å¢ã€‚</p> <table><thead><tr><th>æ–‡ä»¶</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td><code>${PROJECT_DIR}/.env</code></td> <td>æ‰€æœ‰æ¨¡å¼çš„ç¯å¢ƒå˜é‡</td></tr> <tr><td><code>${PROJECT_DIR}/.env.local</code></td> <td>æ‰€æœ‰æ¨¡å¼çš„ç¯å¢ƒå˜é‡ï¼Œæœ¬åœ°ä½¿ç”¨</td></tr> <tr><td><code>${PROJECT_DIR}/.env.[mode]</code></td> <td>ç‰¹å®šæ¨¡å¼çš„ç¯å¢ƒå˜é‡</td></tr> <tr><td><code>${PROJECT_DIR}/.env.[mode].local</code></td> <td>ç‰¹å®šæ¨¡å¼çš„ç¯å¢ƒå˜é‡ï¼Œæœ¬åœ°ä½¿ç”¨</td></tr></tbody></table> <p>è€Œç¯å¢ƒå˜é‡æ–‡ä»¶åªä¼šåŒ…å«ç¯å¢ƒå˜é‡çš„é”®å€¼å¯¹ï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„ä¸‰ä¸ªæ–‡ä»¶ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># env.development</span>
<span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>development
<span class="token assign-left variable">APP_MODE</span><span class="token operator">=</span>development

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># env.staging</span>
<span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production
<span class="token assign-left variable">APP_MODE</span><span class="token operator">=</span>staging

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># env.production</span>
<span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production
<span class="token assign-left variable">APP_MODE</span><span class="token operator">=</span>production

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä¹‹åï¼Œæˆ‘ä»¬åœ¨ <code>${PROJECT_DIR}/config/webpack.config.js</code> é‡Œæ ¹æ® <code>mode</code> è¯»å–å¯¹åº”çš„ç¯å¢ƒå˜é‡æ–‡ä»¶å¹¶æ·»åŠ åˆ° <code>process.env</code> é‡Œã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
<span class="token keyword">const</span> dotenv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dotenv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> SpeedMeasurePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'speed-measure-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.dev.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.prod.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mode <span class="token operator">=</span> argv<span class="token punctuation">.</span>mode <span class="token operator">||</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> envConfig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> tmpEnvConfig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> envFiles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'.env'</span><span class="token punctuation">,</span> <span class="token string">'.env.local'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.env.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.env.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.local</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  envFiles<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">envFile</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> envFilePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>envFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>envFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      tmpEnvConfig <span class="token operator">=</span> dotenv<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>envFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>tmpEnvConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
      keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        envConfig<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> tmpEnvConfig<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  envConfig<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">=</span> envConfig<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">||</span> <span class="token string">'production'</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>envConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
  keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    process<span class="token punctuation">.</span>env<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> envConfig<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'development'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><ul><li><code>dotenv</code> æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†ç¯å¢ƒå˜é‡æ–‡ä»¶çš„åº“ï¼Œä½¿ç”¨ <code>dotenv.parse</code> å¯ä»¥è§£æç¯å¢ƒå˜é‡æ–‡ä»¶çš„å†…å®¹ï¼Œå¾—åˆ°ä¸€ä¸ªå¯¹è±¡ã€‚</li> <li><code>fs</code> æ˜¯ node çš„å†…ç½®åº“ï¼Œ<code>fs.existsSync</code> å¯ä»¥æ£€æŸ¥å¯¹åº”è·¯å¾„çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±è°ƒç”¨ <code>fs.readFileSync</code> æ¥è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå¹¶ä¼ é€’ç»™ <code>dotenv.parse</code> åšè§£æã€‚</li></ul> <p>å¦å¤–ä¿®æ”¹ <code>package.json</code> é‡Œé¢çš„ <code>scripts</code> å­—æ®µã€‚</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...<span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack serve --config ./config/webpack.config.js --progress --mode=development&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;staging-build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack serve --config ./config/webpack.config.js --mode=staging&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./config/webpack.config.js --mode=production&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±å·²ç»æ·»åŠ äº†ä¸€ä¸ª <code>staging</code> ç¯å¢ƒï¼Œå®ƒä¼šä½¿ç”¨ <code>production</code> æ¨¡å¼çš„æ„å»ºé…ç½®ã€‚</p> <p>ä¸ºäº†åœ¨ js é‡Œä¹Ÿèƒ½ç›´æ¥ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨ <code>webpack.DefinePlugin</code> æŒ‡å®šå¯¹åº”çš„å€¼ã€‚ä¸‹é¢æ˜¯å®Œæ•´çš„é…ç½®æ–‡ä»¶ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> dotenv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dotenv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> SpeedMeasurePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'speed-measure-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.dev.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.prod.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mode <span class="token operator">=</span> argv<span class="token punctuation">.</span>mode <span class="token operator">||</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> envConfig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> tmpEnvConfig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> envFiles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'.env'</span><span class="token punctuation">,</span> <span class="token string">'.env.local'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.env.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.env.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.local</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  envFiles<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">envFile</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> envFilePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>envFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>envFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      tmpEnvConfig <span class="token operator">=</span> dotenv<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>envFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>tmpEnvConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
      keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        envConfig<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> tmpEnvConfig<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  envConfig<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">=</span> envConfig<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">||</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> definePluginOptions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>envConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
  keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    process<span class="token punctuation">.</span>env<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> envConfig<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
    definePluginOptions<span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">process.env.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>k<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>envConfig<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span>definePluginOptions<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'development'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        plugins<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        plugins<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»æ·»åŠ äº†ä¸€ä¸ªæ–°æ„å»ºæ¨¡å¼ <code>staging</code>ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ js ä»£ç é‡Œä½¿ç”¨ <code>process.env.NODE_ENV</code> å’Œ <code>process.env.APP_MODE</code> æ¥è·å–æ„å»ºæ¨¡å¼å¯¹åº”çš„ç¯å¢ƒå˜é‡äº†ï¼Œç”šè‡³ä½ å¯ä»¥åœ¨ <code>${PROJECT_DIR}/public/index.html</code> é‡Œä½¿ç”¨å®ƒä»¬ï¼ˆ<a href="https://github.com/jantimon/html-webpack-plugin#writing-your-own-templates" target="_blank" rel="noopener noreferrer">å‚è€ƒ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ã€‚</p> <h3 id="æ ¼å¼åŒ–å’Œæ£€éªŒä»£ç "><a href="#æ ¼å¼åŒ–å’Œæ£€éªŒä»£ç " class="header-anchor">#</a> æ ¼å¼åŒ–å’Œæ£€éªŒä»£ç </h3> <p><code>eslint</code> æ˜¯ç°åœ¨æœ€çƒ­é—¨çš„ js æ ¡éªŒå·¥å…·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ <code>webpack</code> ä¸­ä½¿ç”¨ <code>eslint</code>ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i @modyqyw/fabric@~1.14.0 -D
<span class="token function">npm</span> i eslint@~7.19.0 -D
<span class="token function">npm</span> i eslint-webpack-plugin@~2.5.0 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>eslint-webpack-plugin</code> æ˜¯ <code>eslint-loader</code> çš„æ›¿ä»£å“ï¼Œé…ç½®ç›¸å·®ä¸å¤§ï¼Œè€Œä¸” <code>eslint-webpack-plugin</code> è¿˜ä¿®å¤äº†ä¸€äº›é—®é¢˜ï¼Œæ¨èä½¿ç”¨ã€‚</p> <p>å®‰è£…å®Œä¾èµ–ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ ¹ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªæ–°æ–‡ä»¶ <code>.eslintrc.js</code> ä½œä¸º <code>eslint</code> çš„é…ç½®æ–‡ä»¶ã€‚è¿™é‡Œç”¨æˆ‘è‡ªå·±å°è£…çš„ <code>eslint</code> è§„åˆ™æ¥æ¼”ç¤ºã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/.eslintrc.js</span>
<span class="token comment">/* eslint-disable import/no-extraneous-dependencies */</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@modyqyw/fabric/eslint/react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>config<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ— è®ºæ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒéƒ½éœ€è¦ä½¿ç”¨åˆ° <code>eslint</code> åœ¨æ„å»ºè¿‡ç¨‹ä¸­æ ¡éªŒï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å…¬å…±çš„é…ç½®æ–‡ä»¶é‡ŒåŠ å…¥ <code>eslint-webpack-plugin</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.base.js</span>
<span class="token comment">/* eslint-disable import/no-extraneous-dependencies */</span>
<span class="token operator">...</span>
<span class="token keyword">const</span> ESLintPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eslint-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">ESLintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      files<span class="token operator">:</span> <span class="token string">'src'</span><span class="token punctuation">,</span>
      extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'js'</span><span class="token punctuation">,</span> <span class="token string">'jsx'</span><span class="token punctuation">,</span> <span class="token string">'ts'</span><span class="token punctuation">,</span> <span class="token string">'tsx'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      fix<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li><code>/* eslint-disable import/no-extraneous-dependencies */</code> è¡¨ç¤ºè®© <code>eslint</code> åœ¨è¿™ä¸ªæ–‡ä»¶å†…å¿½ç•¥ <code>eslint-plugin-import</code> é‡Œé¢çš„ <code>no-extraneous-dependencies</code> è§„åˆ™ï¼Œå‡å°‘ä¸å¿…è¦çš„éº»çƒ¦ã€‚</li> <li><code>files: src</code> è¡¨ç¤ºéœ€è¦æ ¡éªŒ <code>src</code> ç›®å½•ï¼Œé»˜è®¤åœ°ï¼Œç­‰åŒäº <code>${PROJECT_DIR}/src</code>ã€‚</li> <li><code>extensions: ['js', 'jsx', 'ts', 'tsx']</code> è¡¨ç¤ºéœ€è¦æ ¡éªŒ <code>.js</code>ï¼Œ<code>.jsx</code>ï¼Œ<code>.ts</code>ï¼Œ<code>.tsx</code>ã€‚</li> <li><code>fix: true</code>è¡¨ç¤ºå¼€å¯è‡ªåŠ¨ä¿®å¤åŠŸèƒ½ã€‚</li></ul> <p>ç°åœ¨ï¼Œæˆ‘ä»¬æ‰§è¡Œå‘½ä»¤ <code>npm run dev</code> å’Œ <code>npm run build</code>ï¼Œ<code>eslint</code> ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚å¦‚æœå‡ºç°äº†ä¸èƒ½è‡ªåŠ¨ä¿®å¤çš„é”™è¯¯ï¼Œä¼šåœ¨å‘½ä»¤è¡Œé‡Œé¢æç¤ºé”™è¯¯ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code> ERROR  Failed to compile with <span class="token number">1</span> errors

 error


<span class="token punctuation">..</span>./webpack4-demos/demo03/src/App.jsx
  <span class="token number">14</span>:5  error  Do not use <span class="token string">'new'</span> <span class="token keyword">for</span> side effects  no-new
  <span class="token number">26</span>:11  error  img elements must have an alt prop, either with meaningful text, or an empty string <span class="token keyword">for</span> decorative images  jsx-a11y/alt-text

âœ– <span class="token number">2</span> problem <span class="token punctuation">(</span><span class="token number">2</span> errors, <span class="token number">0</span> warnings<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>æˆ‘ä»¬åªéœ€è¦æç¤ºå¯¹åº”åœ°æ”¹ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚å‰é¢åŠ å…¥ <code>Promise</code> åªæ˜¯ä¸ºäº†éªŒè¯æˆ‘ä»¬çš„é…ç½®ï¼Œç°åœ¨å¯ä»¥ç›´æ¥å»æ‰ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/src/App.jsx</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  LayoutRow <span class="token keyword">as</span> Row<span class="token punctuation">,</span>
  LayoutCol <span class="token keyword">as</span> Col<span class="token punctuation">,</span>
  LayoutGrid <span class="token keyword">as</span> Grid<span class="token punctuation">,</span>
  Button<span class="token punctuation">,</span>
  Icon<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'zent'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> iconWebpack <span class="token keyword">from</span> <span class="token string">'./assets/webpack.png'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./App.scss'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello World!'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Grid<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Row<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Col span<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">24</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>img alt<span class="token operator">=</span><span class="token string">&quot;webpack&quot;</span> className<span class="token operator">=</span><span class="token string">&quot;icon&quot;</span> src<span class="token operator">=</span><span class="token punctuation">{</span>iconWebpack<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">&quot;youzan&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            Hello Zent<span class="token operator">!</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Col<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Row<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Grid<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>è€Œ <code>stylelint</code> æ˜¯ cssï¼Œlessï¼Œsassï¼Œscss ç­‰æ ·å¼è¯­è¨€çš„æ ¡éªŒå·¥å…·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ <code>webpack</code> ä¸­ä½¿ç”¨ <code>stylelint</code>ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i stylelint@~13.9.0 -D
<span class="token function">npm</span> i stylelint-webpack-plugin@~2.1.1 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å®‰è£…å®Œä¾èµ–ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ ¹ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªæ–°æ–‡ä»¶ <code>stylelint.config.js</code> ä½œä¸º <code>stylelint</code> çš„é…ç½®æ–‡ä»¶ã€‚è¿™é‡Œç”¨æˆ‘è‡ªå·±å°è£…çš„ <code>stylelint</code> è§„åˆ™æ¥æ¼”ç¤ºã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/stylelint.config.js</span>
<span class="token comment">/* eslint-disable import/no-extraneous-dependencies */</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@modyqyw/fabric/stylelint/scss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>config<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ— è®ºæ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒéƒ½éœ€è¦ä½¿ç”¨åˆ° <code>stylelint</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å…¬å…±çš„é…ç½®æ–‡ä»¶é‡ŒåŠ å…¥ <code>stylelint-webpack-plugin</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
<span class="token keyword">const</span> StylelintPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'stylelint-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">StylelintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      files<span class="token operator">:</span> <span class="token string">'src/**/*.scss'</span><span class="token punctuation">,</span>
      fix<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><code>files: 'src/**/*.scss'</code> è¡¨ç¤ºè®© <code>stylelint</code> æ ¡éªŒ <code>src</code> ç›®å½•ä¸‹æ‰€æœ‰çš„ <code>.scss</code> æ–‡ä»¶ã€‚</li> <li><code>fix: true</code> è¡¨ç¤ºå¼€å¯è‡ªåŠ¨ä¿®å¤åŠŸèƒ½ã€‚</li></ul> <p>ç°åœ¨ï¼Œæˆ‘ä»¬æ‰§è¡Œå‘½ä»¤ <code>npm run dev</code> å’Œ <code>npm run build</code>ï¼Œ<code>stylelint</code> ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚å¦‚æœå‡ºç°äº†ä¸èƒ½è‡ªåŠ¨ä¿®å¤çš„é”™è¯¯ï¼Œä¼šåœ¨å‘½ä»¤è¡Œé‡Œé¢æç¤ºé”™è¯¯ã€‚</p> <p>è€ƒè™‘åˆ°æˆ‘ä»¬çš„ä»£ç ä»“åº“å¤§éƒ¨åˆ†éƒ½æ˜¯éœ€è¦åä½œçš„ git ä»“åº“ï¼Œè¿˜æœ‰å¿…è¦è€ƒè™‘ä½¿ç”¨ <code>editorconfig</code>ï¼Œ<code>prettier</code>ï¼Œ<code>commitizen</code>, <code>commitlint</code>ï¼Œ<code>husky</code>ï¼Œ<code>lint-staged</code> ç­‰å·¥å…·ã€‚å› ä¸ºå’Œ <code>webpack</code> å…³ç³»ä¸å¤§ï¼Œæ‰€ä»¥è¿™é‡Œä¸åšå±•å¼€ï¼Œä½†æºä»£ç ä¸­æœ‰ç»™å‡ºç¤ºä¾‹é…ç½®ã€‚</p> <h3 id="ä¼˜åŒ–æ—¥å¿—æ˜¾ç¤º"><a href="#ä¼˜åŒ–æ—¥å¿—æ˜¾ç¤º" class="header-anchor">#</a> ä¼˜åŒ–æ—¥å¿—æ˜¾ç¤º</h3> <p>ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œè¿è¡Œ <code>npm run build</code> è¾“å‡ºçš„ä¿¡æ¯ï¼Œè¦æ¯” <code>npm run dev</code> è¾“å‡ºçš„ä¿¡æ¯å¤šå¾—å¤šã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ§åˆ¶äº† <code>webpack-dev-server</code> è¾“å‡ºçš„ä¿¡æ¯ï¼Œç±»ä¼¼åœ°æˆ‘ä»¬ä¹Ÿå¯ä»¥æ§åˆ¶ <code>webpack</code> è¾“å‡ºçš„ä¿¡æ¯ã€‚</p> <p>è¦æ§åˆ¶ <code>webpack</code> è¾“å‡ºçš„ä¿¡æ¯å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨ <code>${PROJECT_DIR}/config/webpack.prod.js</code> ä¸­è®¾ç½® <code>stats</code> å­—æ®µã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/webpack.prod.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  stats<span class="token operator">:</span> <span class="token string">'minimal'</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>stats</code> ç”¨äºæ§åˆ¶æ˜¾ç¤ºå“ªäº›ä¿¡æ¯ï¼Œé»˜è®¤ä¸º <code>normal</code>ã€‚ä¿®æ”¹æˆ <code>minimal</code>ï¼Œå°±å¯ä»¥è¾¾åˆ°å’Œ <code>webpack-dev-server</code> çš„é…ç½®ä¸€æ ·çš„æ•ˆæœã€‚ä½†åœ¨éœ€è¦åˆ†ææ—¶ï¼Œæˆ‘æ›´å»ºè®®ä½¿ç”¨ <code>normal</code>ã€‚</p> <h3 id="æ„å»ºåˆ†æ"><a href="#æ„å»ºåˆ†æ" class="header-anchor">#</a> æ„å»ºåˆ†æ</h3> <p>åœ¨å¼€å‘å¤§å‹é¡¹ç›®çš„æ—¶å€™ï¼Œå¾€å¾€éœ€è¦æ ¹æ®å®é™…æƒ…å†µå»åšç‰¹å®šçš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€äº›åˆ†æå·¥å…·ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i webpack-bundle-analyzer@~4.4.0 -D
<span class="token function">npm</span> i speed-measure-webpack-plugin@~1.4.2 -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä½¿ç”¨ <code>webpack-bundle-analyzer</code> æ¥ç¡®å®šå¯¹åº” <code>chunk</code> çš„å¤§å°ï¼Œç„¶åè€ƒè™‘æ˜¯å¦è¿˜éœ€è¦è°ƒæ•´ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.prod.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> BundleAnalyzerPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-bundle-analyzer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      analyzerMode<span class="token operator">:</span> <span class="token string">'static'</span><span class="token punctuation">,</span>
      defaultSizes<span class="token operator">:</span> <span class="token string">'stat'</span><span class="token punctuation">,</span>
      openAnalyzer<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ç°åœ¨æ‰§è¡Œ <code>npm run build</code>ï¼Œä¼šç”Ÿæˆä¸€ä¸ªåˆ†ææ–‡ä»¶ <code>${PROJECT_DIR}/dist/report.html</code>ï¼Œå®ƒé‡Œé¢çš„å†…å®¹å°±æ˜¯å„ä¸ª <code>chunk</code> çš„å¤§å°ï¼Œå¯ä»¥æ®æ­¤æ¥åšé€‚å½“çš„è°ƒæ•´ï¼Œå…·ä½“è°ƒæ•´æ–¹æ¡ˆå’Œå®é™…æƒ…å†µç›¸å…³ã€‚</p> <p>è€Œè€ƒé‡ä¸åŒé˜¶æ®µæ‰“åŒ…çš„æ—¶é—´ï¼Œå°±éœ€è¦ä½¿ç”¨ <code>speed-measure-webpack-plugin</code>ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ${PROJECT_DIR}/config/webpack.config.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> SpeedMeasurePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'speed-measure-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.dev.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.prod.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'development'</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        plugins<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SpeedMeasurePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>
        <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          plugins<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>ç°åœ¨æ‰§è¡Œ <code>npm run build</code>ï¼Œå‘½ä»¤è¡Œé‡Œé¢ä¼šæ˜¾ç¤ºæˆ‘ä»¬ä½¿ç”¨çš„ <code>plugin</code> å’Œ <code>loader</code> çš„è€—æ—¶ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™äº›è€—æ—¶æ¥åšé€‚å½“çš„è°ƒæ•´ï¼Œç¼©çŸ­ç­‰å¾…æ—¶é—´ã€‚</p> <p>ğŸ‰æ­å–œï¼Œä½ çš„ç¬¬ä¸‰ä¸ª webpack demo å·²ç»å®Œæˆå•¦ï½</p> <p>å‚è€ƒæºä»£ç è§ <a href="https://github.com/ModyQyW/webpack4-demos/tree/master/demo03" target="_blank" rel="noopener noreferrer">modyqyw/webpack-demos/demo03<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <h2 id="ä¸€äº›ç®€å•çš„æ‹“å±•"><a href="#ä¸€äº›ç®€å•çš„æ‹“å±•" class="header-anchor">#</a> ä¸€äº›ç®€å•çš„æ‹“å±•</h2> <ul><li>Scope Hoisting ä½œç”¨åŸŸæå‡</li></ul> <p>js é‡Œé¢æœ‰å˜é‡æå‡å’Œå‡½æ•°æå‡çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯æŠŠå˜é‡å’Œå‡½æ•°çš„å£°æ˜æå‡åˆ°å½“å‰ä½œç”¨åŸŸé¡¶éƒ¨ã€‚<code>webpack</code> é‡Œé¢çš„ä½œç”¨åŸŸæå‡å’Œå®ƒä»¬ç±»ä¼¼ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œ<code>webpack</code> ä¼šæŠŠè¢«å¼•å…¥çš„ js æ–‡ä»¶æå‡åˆ°å¼•å…¥è€…çš„é¡¶éƒ¨ï¼Œå‡å°‘åˆ›å»ºçš„ä»£ç ä½œç”¨åŸŸï¼Œä½¿å¾—ä»£ç ä½“ç§¯å’Œå†…å­˜å¼€é”€å˜å°ã€‚</p> <p>æ„å»ºæ¨¡å¼æ˜¯ <code>production</code> æ—¶ï¼Œ<code>webpack</code> ä¼šè‡ªåŠ¨å¼€å¯ä½œç”¨åŸŸæå‡ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ <code>ModuleConcatenationPlugin</code> æ¥æ‰‹åŠ¨å¼€å¯ã€‚</p> <p>ä½œç”¨åŸŸæå‡æ˜¯é’ˆå¯¹ ESM çš„ï¼Œé ESM çš„æƒ…å†µä¸‹ï¼Œ<code>webpack</code> ä¼šè‡ªåŠ¨å›é€€ï¼Œä¸ä½¿ç”¨ä½œç”¨åŸŸæå‡ã€‚</p> <ul><li>Hot Module Reload æ¨¡å—çƒ­æ›´æ–°</li></ul> <p><img src="https://user-gold-cdn.xitu.io/2019/12/1/16ec13499800dfce" alt="çƒ­æ›´æ–°åŸç†å›¾"></p> <p><a href="https://juejin.im/post/6844904008432222215" target="_blank" rel="noopener noreferrer">å›¾æº<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="https://user-gold-cdn.xitu.io/2019/9/2/16cf203824359397" alt="çƒ­æ›´æ–°åŸç†å›¾"></p> <p><a href="https://juejin.cn/post/6844903933157048333" target="_blank" rel="noopener noreferrer">å›¾æº<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>Tree Shaking æ‘‡æ ‘ä¼˜åŒ–</li></ul> <p>ä½¿ç”¨æ‘‡æ ‘ä¼˜åŒ–æ˜¯ä¸ºäº†åˆ é™¤ä¸€äº›æ²¡æœ‰è¢«ä½¿ç”¨çš„ä»£ç ï¼ŒåŒæ ·ï¼Œå®ƒä¹Ÿæ˜¯ä¾èµ–äº ESM çš„ã€‚</p> <h2 id="ç»“æŸ"><a href="#ç»“æŸ" class="header-anchor">#</a> ç»“æŸ</h2> <p>è¿™ç¯‡ç¬”è®°å’Œç¤ºä¾‹åˆ°è¿™é‡Œå°±ç»“æŸäº†ã€‚å½“ç„¶ï¼Œä½ çš„å­¦ä¹ è¿˜æ²¡æœ‰ç»“æŸï¼Œæ¯•ç«Ÿè¿™é‡Œæ²¡æœ‰æåŠã€æ·±å…¥å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚ CSS Modules æ”¯æŒï¼ŒMPA çš„å®è·µï¼ŒSSR æ”¯æŒï¼Œ<code>webpack</code> é…ç½®å°è£…ï¼Œä½¿ç”¨ <code>webpack</code> æ„å»º <code>vue</code> åº”ç”¨ç­‰ç­‰ã€‚ä¸è¦å¿˜äº†é˜…è¯»å‚è€ƒéƒ¨åˆ†ï¼Œé‚£é‡Œåˆ—ä¸¾äº†å¤§é‡å‚è€ƒèµ„æ–™ã€‚ä½ ä¹Ÿå¯ä»¥å»æŸ¥çœ‹ <code>create-react-app</code>ï¼Œ<code>@vue/cli</code>ï¼Œ<code>poi</code> ç­‰ä¼˜ç§€æºç ï¼Œå­¦ä¹ æ›´å¤šçš„ <code>webpack</code> é…ç½®ã€‚çœŸæ­£å¼€å‘çš„æ—¶å€™ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨ cliã€‚</p> <p>å¦‚æœä½ å‘ç°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨ä¸‹é¢è¯„è®ºææ„è§ï¼Œæˆ–è€…æäº¤ issue / prã€‚æ„Ÿè°¢ä½ çš„é˜…è¯» ğŸ˜„</p> <h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="header-anchor">#</a> å‚è€ƒ</h2> <ul><li><a href="https://nodejs.org/dist/latest-v12.x/docs/api/path.html" target="_blank" rel="noopener noreferrer">nodejs 12.x - path<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://en.wikipedia.org/wiki/CommonJS" target="_blank" rel="noopener noreferrer">CommonJS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v4.webpack.js.org" target="_blank" rel="noopener noreferrer">webpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5d2b300de51d45775b419c76" target="_blank" rel="noopener noreferrer">ç†è§£ webpack chunk<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/johnagan/clean-webpack-plugin#readme" target="_blank" rel="noopener noreferrer">clean-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/copy-webpack-plugin#readme" target="_blank" rel="noopener noreferrer">copy-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/geowarin/friendly-errors-webpack-plugin#readme" target="_blank" rel="noopener noreferrer">friendly-errors-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/jantimon/html-webpack-plugin#readme" target="_blank" rel="noopener noreferrer">html-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://stackoverflow.com/questions/41470771/webpack-does-the-order-of-plugins-matter" target="_blank" rel="noopener noreferrer">webpack plugins çš„é¡ºåºä¼šå½±å“ä»€ä¹ˆå—ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://babeljs.io/" target="_blank" rel="noopener noreferrer">babel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/babel/babel-loader#readme" target="_blank" rel="noopener noreferrer">babel-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.jiangruitao.com/docs/babel/" target="_blank" rel="noopener noreferrer">babel æ•™ç¨‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/browserslist/browserslist#readme" target="_blank" rel="noopener noreferrer">browserslist<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://babeljs.io/docs/en/babel-preset-env" target="_blank" rel="noopener noreferrer">@babel/preset-env<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://babeljs.io/docs/en/babel-preset-react" target="_blank" rel="noopener noreferrer">@babel/preset-react<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://babeljs.io/docs/en/babel-plugin-transform-runtime" target="_blank" rel="noopener noreferrer">@babel/plugin-transform-runtime<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/147083132" target="_blank" rel="noopener noreferrer">@babel/plugin-transform-runtime åˆ°åº•æ˜¯ä»€ä¹ˆ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://babeljs.io/docs/en/babel-polyfill" target="_blank" rel="noopener noreferrer">@babel/polyfill<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/babel-preset-app" target="_blank" rel="noopener noreferrer">@vue/babel-preset-app<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/zloirock/core-js#readme" target="_blank" rel="noopener noreferrer">core-js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/facebook/regenerator/tree/master/packages/regenerator-runtime" target="_blank" rel="noopener noreferrer">regenerator-runtime<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/style-loader#readme" target="_blank" rel="noopener noreferrer">style-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/css-loader#readme" target="_blank" rel="noopener noreferrer">css-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://lesscss.org/" target="_blank" rel="noopener noreferrer">less<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/less-loader#readme" target="_blank" rel="noopener noreferrer">less-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://sass-lang.com/" target="_blank" rel="noopener noreferrer">sass<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/sass-loader#readme" target="_blank" rel="noopener noreferrer">sass-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/bholloway/resolve-url-loader#readme" target="_blank" rel="noopener noreferrer">resolve-url-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://stylus-lang.com/" target="_blank" rel="noopener noreferrer">stylus<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/shama/stylus-loader#readme" target="_blank" rel="noopener noreferrer">stylus-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://postcss.org/" target="_blank" rel="noopener noreferrer">postcss<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.zhihu.com/question/20597072" target="_blank" rel="noopener noreferrer">CSS 3 ä¸­ -webkit-, -moz-, -o-, -ms- è¿™äº›ç§æœ‰å‰ç¼€ä»€ä¹ˆæ—¶å€™å¯ä»¥ç§»é™¤ï¼Ÿ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/postcss/autoprefixer#readme" target="_blank" rel="noopener noreferrer">autoprefixer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/csstools/postcss-preset-env#readme" target="_blank" rel="noopener noreferrer">postcss-preset-env<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cssnano.co/" target="_blank" rel="noopener noreferrer">cssnano<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://youzan.github.io/zent/zh/" target="_blank" rel="noopener noreferrer">zent<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/file-loader#readme" target="_blank" rel="noopener noreferrer">file-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/url-loader#readme" target="_blank" rel="noopener noreferrer">url-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/html-loader#readme" target="_blank" rel="noopener noreferrer">html-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/kentcdodds/cross-env" target="_blank" rel="noopener noreferrer">cross-env<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/survivejs/webpack-merge#readme" target="_blank" rel="noopener noreferrer">webpack-merge<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/gaearon/react-hot-loader#readme" target="_blank" rel="noopener noreferrer">react-hot-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jkfhto.github.io/2019-10-18/webpack/webpack-%E6%96%87%E4%BB%B6%E6%8C%87%E7%BA%B9%E7%AD%96%E7%95%A5%EF%BC%9Achunkhash%E3%80%81contenthash%E5%92%8Chash/" target="_blank" rel="noopener noreferrer">webpack æ–‡ä»¶æŒ‡çº¹ç­–ç•¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/mini-css-extract-plugin#readme" target="_blank" rel="noopener noreferrer">mini-css-extract-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/terser-webpack-plugin/#readme" target="_blank" rel="noopener noreferrer">terser-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/compression-webpack-plugin#readme" target="_blank" rel="noopener noreferrer">compression-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/motdotla/dotenv#readme" target="_blank" rel="noopener noreferrer">dotenv<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">eslint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/eslint-loader#readme" target="_blank" rel="noopener noreferrer">eslint-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/eslint-webpack-plugin#readme" target="_blank" rel="noopener noreferrer">eslint-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://stylelint.io/" target="_blank" rel="noopener noreferrer">stylelint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/stylelint-webpack-plugin#readme" target="_blank" rel="noopener noreferrer">stylelint-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/MillCloud/fabric#readme" target="_blank" rel="noopener noreferrer">@modyqyw/fabric<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/webpack-contrib/awesome-webpack#readme" target="_blank" rel="noopener noreferrer">awesome-webpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.ruanyifeng.com/blog/2013/01/javascript_source_map.html" target="_blank" rel="noopener noreferrer">é˜®ä¸€å³° - JavaScript Source Map è¯¦è§£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5b56909a518825195f499806" target="_blank" rel="noopener noreferrer">æ½˜å˜‰æ™¨ - æ‰‹æ‘¸æ‰‹ï¼Œå¸¦ä½ ç”¨åˆç†çš„å§¿åŠ¿ä½¿ç”¨ webpack4ï¼ˆä¸Šï¼‰<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5b5d6d6f6fb9a04fea58aabc" target="_blank" rel="noopener noreferrer">æ½˜å˜‰æ™¨ - æ‰‹æ‘¸æ‰‹ï¼Œå¸¦ä½ ç”¨åˆç†çš„å§¿åŠ¿ä½¿ç”¨ webpack4ï¼ˆä¸‹ï¼‰<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v4.webpack.js.org/plugins/module-concatenation-plugin/" target="_blank" rel="noopener noreferrer">webpack - ModuleConcatenationPlugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v2.parceljs.org/features/scope-hoisting/" target="_blank" rel="noopener noreferrer">Parcel - Scope Hoisting<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/6844904008432222215" target="_blank" rel="noopener noreferrer">è½»æ¾ç†è§£ webpack çƒ­æ›´æ–°åŸç†<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6844903933157048333" target="_blank" rel="noopener noreferrer">ææ‡‚ webpack çƒ­æ›´æ–°åŸç†<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v4.webpack.js.org/guides/tree-shaking/" target="_blank" rel="noopener noreferrer">webpack - Tree Shaking<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.rollupjs.org/guide/en/#tree-shaking" target="_blank" rel="noopener noreferrer">rollup - Tree Shaking<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="è‡´è°¢"><a href="#è‡´è°¢" class="header-anchor">#</a> è‡´è°¢</h2> <ul><li><a href="https://github.com/XuXianTao" target="_blank" rel="noopener noreferrer">XuXianTao<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - é˜…è¯»äº†åˆç¨¿å¹¶æä¾›äº†å¼¥è¶³çè´µçš„å»ºè®®å’Œæ„è§</li></ul></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/ModyQyW/modyqyw.github.io/edit/origin/webpack4/README.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘æ­¤é¡µ</a></div> <div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº:</span> <span class="info">2021å¹´7æœˆ5æ—¥ 05:18</span></div> <!----></footer> <!----> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="å…³é—­" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">è¯¥åº”ç”¨å¯ä»¥å®‰è£…åœ¨æ‚¨çš„ PC æˆ–ç§»åŠ¨è®¾å¤‡ä¸Šã€‚è¿™å°†ä½¿è¯¥ Web åº”ç”¨ç¨‹åºå¤–è§‚å’Œè¡Œä¸ºä¸å…¶ä»–åº”ç”¨ç¨‹åºç›¸åŒã€‚å®ƒå°†åœ¨å‡ºç°åœ¨åº”ç”¨ç¨‹åºåˆ—è¡¨ä¸­ï¼Œå¹¶å¯ä»¥å›ºå®šåˆ°ä¸»å±å¹•ï¼Œå¼€å§‹èœå•æˆ–ä»»åŠ¡æ ã€‚æ­¤ Web åº”ç”¨ç¨‹åºè¿˜å°†èƒ½å¤Ÿä¸å…¶ä»–åº”ç”¨ç¨‹åºå’Œæ‚¨çš„æ“ä½œç³»ç»Ÿå®‰å…¨åœ°è¿›è¡Œäº¤äº’ã€‚</p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>è¯¦æƒ…</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        å®‰è£… <span></span></button> <button class="cancel-button">
        å–æ¶ˆ
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.97090625.js" defer></script><script src="/assets/js/vendors~layout-Layout.2575cae3.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.98c9c1a5.js" defer></script><script src="/assets/js/page-Webpack4.88b01faa.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.ec478e91.js" defer></script>
  </body>
</html>
